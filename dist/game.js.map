{
  "version": 3,
  "sources": ["../node_modules/kaboom/src/math.ts", "../node_modules/kaboom/src/utils.ts", "../node_modules/kaboom/src/fps.ts", "../node_modules/kaboom/src/timer.ts", "../node_modules/kaboom/src/kaboom.ts", "../code/plugins/ssControllerComponent.js", "../code/plugins/Grid/gridObject.js", "../code/plugins/Grid/gridComponent.js", "../code/plugins/GameManager/gameManager.js", "../code/scenes/menuScene.js", "../code/scenes/gameScene.js", "../code/scenes/levelEditScene.js", "../code/scenes/customLevelScene.js", "../code/levels.js", "../code/main.js"],
  "sourcesContent": ["import {\n\tVec4,\n\tPoint,\n\tRNGValue,\n} from \"./types\"\n\nexport function deg2rad(deg: number): number {\n\treturn deg * Math.PI / 180\n}\n\nexport function rad2deg(rad: number): number {\n\treturn rad * 180 / Math.PI\n}\n\nexport function clamp(\n\tval: number,\n\tmin: number,\n\tmax: number,\n): number {\n\tif (min > max) {\n\t\treturn clamp(val, max, min)\n\t}\n\treturn Math.min(Math.max(val, min), max)\n}\n\nexport function lerp(\n\ta: number,\n\tb: number,\n\tt: number,\n): number {\n\treturn a + (b - a) * t\n}\n\nexport function map(\n\tv: number,\n\tl1: number,\n\th1: number,\n\tl2: number,\n\th2: number,\n): number {\n\treturn l2 + (v - l1) / (h1 - l1) * (h2 - l2)\n}\n\nexport function mapc(\n\tv: number,\n\tl1: number,\n\th1: number,\n\tl2: number,\n\th2: number,\n): number {\n\treturn clamp(map(v, l1, h1, l2, h2), l2, h2)\n}\n\nexport class Vec2 {\n\tx: number = 0\n\ty: number = 0\n\tconstructor(x: number = 0, y: number = x) {\n\t\tthis.x = x\n\t\tthis.y = y\n\t}\n\tstatic fromAngle(deg: number) {\n\t\tconst angle = deg2rad(deg)\n\t\treturn new Vec2(Math.cos(angle), Math.sin(angle))\n\t}\n\tstatic LEFT = new Vec2(-1, 0)\n\tstatic RIGHT = new Vec2(1, 0)\n\tstatic UP = new Vec2(0, -1)\n\tstatic DOWN = new Vec2(0, 1)\n\tclone(): Vec2 {\n\t\treturn new Vec2(this.x, this.y)\n\t}\n\tadd(...args): Vec2 {\n\t\tconst p2 = vec2(...args)\n\t\treturn new Vec2(this.x + p2.x, this.y + p2.y)\n\t}\n\tsub(...args): Vec2 {\n\t\tconst p2 = vec2(...args)\n\t\treturn new Vec2(this.x - p2.x, this.y - p2.y)\n\t}\n\tscale(...args): Vec2 {\n\t\tconst s = vec2(...args)\n\t\treturn new Vec2(this.x * s.x, this.y * s.y)\n\t}\n\tdist(...args): number {\n\t\tconst p2 = vec2(...args)\n\t\treturn Math.sqrt(\n\t\t\t(this.x - p2.x) * (this.x - p2.x)\n\t\t\t+ (this.y - p2.y) * (this.y - p2.y),\n\t\t)\n\t}\n\tlen(): number {\n\t\treturn this.dist(new Vec2(0, 0))\n\t}\n\tunit(): Vec2 {\n\t\tconst len = this.len()\n\t\treturn len === 0 ? new Vec2(0) : this.scale(1 / len)\n\t}\n\tnormal(): Vec2 {\n\t\treturn new Vec2(this.y, -this.x)\n\t}\n\tdot(p2: Vec2): number {\n\t\treturn this.x * p2.x + this.y * p2.y\n\t}\n\tangle(...args): number {\n\t\tconst p2 = vec2(...args)\n\t\treturn rad2deg(Math.atan2(this.y - p2.y, this.x - p2.x))\n\t}\n\tlerp(p2: Vec2, t: number): Vec2 {\n\t\treturn new Vec2(lerp(this.x, p2.x, t), lerp(this.y, p2.y, t))\n\t}\n\tisZero(): boolean {\n\t\treturn this.x === 0 && this.y === 0\n\t}\n\ttoFixed(n: number): Vec2 {\n\t\treturn new Vec2(Number(this.x.toFixed(n)), Number(this.y.toFixed(n)))\n\t}\n\teq(other: Vec2): boolean {\n\t\treturn this.x === other.x && this.y === other.y\n\t}\n\ttoString(): string {\n\t\treturn `vec2(${this.x.toFixed(2)}, ${this.y.toFixed(2)})`\n\t}\n}\n\nexport function vec2(...args): Vec2 {\n\tif (args.length === 1) {\n\t\tif (args[0] instanceof Vec2) {\n\t\t\treturn vec2(args[0].x, args[0].y)\n\t\t} else if (Array.isArray(args[0]) && args[0].length === 2) {\n\t\t\treturn vec2(...args[0])\n\t\t}\n\t}\n\treturn new Vec2(...args)\n}\n\nexport class Vec3 {\n\tx: number = 0\n\ty: number = 0\n\tz: number = 0\n\tconstructor(x: number, y: number, z: number) {\n\t\tthis.x = x\n\t\tthis.y = y\n\t\tthis.z = z\n\t}\n\txy() {\n\t\treturn vec2(this.x, this.y)\n\t}\n}\n\nexport const vec3 = (x, y, z) => new Vec3(x, y, z)\n\nexport class Color {\n\n\tr: number = 255\n\tg: number = 255\n\tb: number = 255\n\n\tconstructor(r: number, g: number, b: number) {\n\t\tthis.r = clamp(r, 0, 255)\n\t\tthis.g = clamp(g, 0, 255)\n\t\tthis.b = clamp(b, 0, 255)\n\t}\n\n\tstatic fromArray(arr: number[]) {\n\t\treturn new Color(arr[0], arr[1], arr[2])\n\t}\n\n\tstatic fromHex(hex: string | number) {\n\t\tif (typeof hex === \"number\") {\n\t\t\treturn new Color(\n\t\t\t\t(hex >> 16) & 0xff,\n\t\t\t\t(hex >> 8) & 0xff,\n\t\t\t\t(hex >> 0) & 0xff,\n\t\t\t)\n\t\t} else {\n\t\t\tconst result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n\t\t\treturn new Color(\n\t\t\t\tparseInt(result[1], 16),\n\t\t\t\tparseInt(result[2], 16),\n\t\t\t\tparseInt(result[3], 16),\n\t\t\t)\n\t\t}\n\t}\n\n\tstatic fromHSL(h: number, s: number, l: number) {\n\n\t\tif (s == 0){\n\t\t\treturn rgb(255 * l, 255 * l, 255 * l)\n\t\t}\n\n\t\tconst hue2rgb = (p, q, t) => {\n\t\t\tif (t < 0) t += 1\n\t\t\tif (t > 1) t -= 1\n\t\t\tif (t < 1 / 6) return p + (q - p) * 6 * t\n\t\t\tif (t < 1 / 2) return q\n\t\t\tif (t < 2 / 3) return p + (q - p) * (2/3 - t) * 6\n\t\t\treturn p\n\t\t}\n\n\t\tconst q = l < 0.5 ? l * (1 + s) : l + s - l * s\n\t\tconst p = 2 * l - q\n\t\tconst r = hue2rgb(p, q, h + 1 / 3)\n\t\tconst g = hue2rgb(p, q, h)\n\t\tconst b = hue2rgb(p, q, h - 1 / 3)\n\n\t\treturn new Color(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255))\n\n\t}\n\n\tstatic RED = rgb(255, 0, 0)\n\tstatic GREEN = rgb(0, 255, 0)\n\tstatic BLUE = rgb(0, 0, 255)\n\tstatic YELLOW = rgb(255, 255, 0)\n\tstatic MAGENTA = rgb(255, 0, 255)\n\tstatic CYAN = rgb(0, 255, 255)\n\tstatic WHITE = rgb(255, 255, 255)\n\tstatic BLACK = rgb(0, 0, 0)\n\n\tclone(): Color {\n\t\treturn new Color(this.r, this.g, this.b)\n\t}\n\n\tlighten(a: number): Color {\n\t\treturn new Color(this.r + a, this.g + a, this.b + a)\n\t}\n\n\tdarken(a: number): Color {\n\t\treturn this.lighten(-a)\n\t}\n\n\tinvert(): Color {\n\t\treturn new Color(255 - this.r, 255 - this.g, 255 - this.b)\n\t}\n\n\tmult(other: Color): Color {\n\t\treturn new Color(\n\t\t\tthis.r * other.r / 255,\n\t\t\tthis.g * other.g / 255,\n\t\t\tthis.b * other.b / 255,\n\t\t)\n\t}\n\n\teq(other: Color): boolean {\n\t\treturn this.r === other.r\n\t\t\t&& this.g === other.g\n\t\t\t&& this.b === other.b\n\n\t}\n\n\ttoString(): string {\n\t\treturn `rgb(${this.r}, ${this.g}, ${this.b})`\n\t}\n\n\ttoHex(): string {\n\t\treturn \"#\" + ((1 << 24) + (this.r << 16) + (this.g << 8) + this.b).toString(16).slice(1)\n\t}\n\n}\n\nexport function rgb(...args): Color {\n\tif (args.length === 0) {\n\t\treturn new Color(255, 255, 255)\n\t} else if (args.length === 1) {\n\t\tif (args[0] instanceof Color) {\n\t\t\treturn args[0].clone()\n\t\t} else if (Array.isArray(args[0]) && args[0].length === 3) {\n\t\t\treturn Color.fromArray(args[0])\n\t\t}\n\t}\n\t// @ts-ignore\n\treturn new Color(...args)\n}\n\nexport const hsl2rgb = (h, s, l) => Color.fromHSL(h, s, l)\n\nexport class Quad {\n\tx: number = 0\n\ty: number = 0\n\tw: number = 1\n\th: number = 1\n\tconstructor(x: number, y: number, w: number, h: number) {\n\t\tthis.x = x\n\t\tthis.y = y\n\t\tthis.w = w\n\t\tthis.h = h\n\t}\n\tscale(other: Quad): Quad {\n\t\treturn new Quad(\n\t\t\tthis.x + this.w * other.x,\n\t\t\tthis.y + this.h * other.y,\n\t\t\tthis.w * other.w,\n\t\t\tthis.h * other.h,\n\t\t)\n\t}\n\tclone(): Quad {\n\t\treturn new Quad(this.x, this.y, this.w, this.h)\n\t}\n\teq(other: Quad): boolean {\n\t\treturn this.x === other.x\n\t\t\t&& this.y === other.y\n\t\t\t&& this.w === other.w\n\t\t\t&& this.h === other.h\n\t}\n\ttoString(): string {\n\t\treturn `quad(${this.x}, ${this.y}, ${this.w}, ${this.h})`\n\t}\n}\n\nexport function quad(x: number, y: number, w: number, h: number): Quad {\n\treturn new Quad(x, y, w, h)\n}\n\nexport class Mat4 {\n\n\tm: number[] = [\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1,\n\t]\n\n\tconstructor(m?: number[]) {\n\t\tif (m) {\n\t\t\tthis.m = m\n\t\t}\n\t}\n\n\tstatic translate(p: Vec2): Mat4 {\n\t\treturn new Mat4([\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\tp.x, p.y, 0, 1,\n\t\t])\n\t}\n\n\tstatic scale(s: Vec2): Mat4 {\n\t\treturn new Mat4([\n\t\t\ts.x, 0, 0, 0,\n\t\t\t0, s.y, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1,\n\t\t])\n\t}\n\n\tstatic rotateX(a: number): Mat4 {\n\t\ta = deg2rad(-a)\n\t\treturn new Mat4([\n\t\t\t1, 0, 0, 0,\n\t\t\t0, Math.cos(a), -Math.sin(a), 0,\n\t\t\t0, Math.sin(a), Math.cos(a), 0,\n\t\t\t0, 0, 0, 1,\n\t\t])\n\t}\n\n\tstatic rotateY(a: number): Mat4 {\n\t\ta = deg2rad(-a)\n\t\treturn new Mat4([\n\t\t\tMath.cos(a), 0, Math.sin(a), 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t-Math.sin(a), 0, Math.cos(a), 0,\n\t\t\t0, 0, 0, 1,\n\t\t])\n\t}\n\n\tstatic rotateZ(a: number): Mat4 {\n\t\ta = deg2rad(-a)\n\t\treturn new Mat4([\n\t\t\tMath.cos(a), -Math.sin(a), 0, 0,\n\t\t\tMath.sin(a), Math.cos(a), 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1,\n\t\t])\n\t}\n\n\ttranslate(p: Vec2): Mat4 {\n\t\treturn this.mult(Mat4.translate(p))\n\t}\n\n\tscale(s: Vec2): Mat4 {\n\t\treturn this.mult(Mat4.scale(s))\n\t}\n\n\trotateX(a: number): Mat4 {\n\t\treturn this.mult(Mat4.rotateX(a))\n\t}\n\n\trotateY(a: number): Mat4 {\n\t\treturn this.mult(Mat4.rotateY(a))\n\t}\n\n\trotateZ(a: number): Mat4 {\n\t\treturn this.mult(Mat4.rotateZ(a))\n\t}\n\n\tmult(other: Mat4): Mat4 {\n\n\t\tconst out = []\n\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\tfor (let j = 0; j < 4; j++) {\n\t\t\t\tout[i * 4 + j] =\n\t\t\t\t\tthis.m[0 * 4 + j] * other.m[i * 4 + 0] +\n\t\t\t\t\tthis.m[1 * 4 + j] * other.m[i * 4 + 1] +\n\t\t\t\t\tthis.m[2 * 4 + j] * other.m[i * 4 + 2] +\n\t\t\t\t\tthis.m[3 * 4 + j] * other.m[i * 4 + 3]\n\t\t\t}\n\t\t}\n\n\t\treturn new Mat4(out)\n\n\t}\n\n\tmultVec4(p: Vec4): Vec4 {\n\t\treturn {\n\t\t\tx: p.x * this.m[0] + p.y * this.m[4] + p.z * this.m[8] + p.w * this.m[12],\n\t\t\ty: p.x * this.m[1] + p.y * this.m[5] + p.z * this.m[9] + p.w * this.m[13],\n\t\t\tz: p.x * this.m[2] + p.y * this.m[6] + p.z * this.m[10] + p.w * this.m[14],\n\t\t\tw: p.x * this.m[3] + p.y * this.m[7] + p.z * this.m[11] + p.w * this.m[15],\n\t\t}\n\t}\n\n\tmultVec3(p: Vec3): Vec3 {\n\t\tconst p4 = this.multVec4({\n\t\t\tx: p.x,\n\t\t\ty: p.y,\n\t\t\tz: p.z,\n\t\t\tw: 1.0,\n\t\t})\n\t\treturn vec3(p4.x, p4.y, p4.z)\n\t}\n\n\tmultVec2(p: Vec2): Vec2 {\n\t\treturn vec2(\n\t\t\tp.x * this.m[0] + p.y * this.m[4] + 0 * this.m[8] + 1 * this.m[12],\n\t\t\tp.x * this.m[1] + p.y * this.m[5] + 0 * this.m[9] + 1 * this.m[13],\n\t\t)\n\t}\n\n\tinvert(): Mat4 {\n\n\t\tconst out = []\n\n\t\tconst f00 = this.m[10] * this.m[15] - this.m[14] * this.m[11]\n\t\tconst f01 = this.m[9] * this.m[15] - this.m[13] * this.m[11]\n\t\tconst f02 = this.m[9] * this.m[14] - this.m[13] * this.m[10]\n\t\tconst f03 = this.m[8] * this.m[15] - this.m[12] * this.m[11]\n\t\tconst f04 = this.m[8] * this.m[14] - this.m[12] * this.m[10]\n\t\tconst f05 = this.m[8] * this.m[13] - this.m[12] * this.m[9]\n\t\tconst f06 = this.m[6] * this.m[15] - this.m[14] * this.m[7]\n\t\tconst f07 = this.m[5] * this.m[15] - this.m[13] * this.m[7]\n\t\tconst f08 = this.m[5] * this.m[14] - this.m[13] * this.m[6]\n\t\tconst f09 = this.m[4] * this.m[15] - this.m[12] * this.m[7]\n\t\tconst f10 = this.m[4] * this.m[14] - this.m[12] * this.m[6]\n\t\tconst f11 = this.m[5] * this.m[15] - this.m[13] * this.m[7]\n\t\tconst f12 = this.m[4] * this.m[13] - this.m[12] * this.m[5]\n\t\tconst f13 = this.m[6] * this.m[11] - this.m[10] * this.m[7]\n\t\tconst f14 = this.m[5] * this.m[11] - this.m[9] * this.m[7]\n\t\tconst f15 = this.m[5] * this.m[10] - this.m[9] * this.m[6]\n\t\tconst f16 = this.m[4] * this.m[11] - this.m[8] * this.m[7]\n\t\tconst f17 = this.m[4] * this.m[10] - this.m[8] * this.m[6]\n\t\tconst f18 = this.m[4] * this.m[9] - this.m[8] * this.m[5]\n\n\t\tout[0] = this.m[5] * f00 - this.m[6] * f01 + this.m[7] * f02\n\t\tout[4] = -(this.m[4] * f00 - this.m[6] * f03 + this.m[7] * f04)\n\t\tout[8] = this.m[4] * f01 - this.m[5] * f03 + this.m[7] * f05\n\t\tout[12] = -(this.m[4] * f02 - this.m[5] * f04 + this.m[6] * f05)\n\n\t\tout[1] = -(this.m[1] * f00 - this.m[2] * f01 + this.m[3] * f02)\n\t\tout[5] = this.m[0] * f00 - this.m[2] * f03 + this.m[3] * f04\n\t\tout[9] = -(this.m[0] * f01 - this.m[1] * f03 + this.m[3] * f05)\n\t\tout[13] = this.m[0] * f02 - this.m[1] * f04 + this.m[2] * f05\n\n\t\tout[2] = this.m[1] * f06 - this.m[2] * f07 + this.m[3] * f08\n\t\tout[6] = -(this.m[0] * f06 - this.m[2] * f09 + this.m[3] * f10)\n\t\tout[10] = this.m[0] * f11 - this.m[1] * f09 + this.m[3] * f12\n\t\tout[14] = -(this.m[0] * f08 - this.m[1] * f10 + this.m[2] * f12)\n\n\t\tout[3] = -(this.m[1] * f13 - this.m[2] * f14 + this.m[3] * f15)\n\t\tout[7] = this.m[0] * f13 - this.m[2] * f16 + this.m[3] * f17\n\t\tout[11] = -(this.m[0] * f14 - this.m[1] * f16 + this.m[3] * f18)\n\t\tout[15] = this.m[0] * f15 - this.m[1] * f17 + this.m[2] * f18\n\n\t\tconst det =\n\t\t\tthis.m[0] * out[0] +\n\t\t\tthis.m[1] * out[4] +\n\t\t\tthis.m[2] * out[8] +\n\t\t\tthis.m[3] * out[12]\n\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\tfor (let j = 0; j < 4; j++) {\n\t\t\t\tout[i * 4 + j] *= (1.0 / det)\n\t\t\t}\n\t\t}\n\n\t\treturn new Mat4(out)\n\n\t}\n\n\tclone(): Mat4 {\n\t\treturn new Mat4(this.m)\n\t}\n\n\ttoString(): string {\n\t\treturn this.m.toString()\n\t}\n\n}\n\nexport function wave(lo: number, hi: number, t: number, f = Math.sin): number {\n\treturn lo + (f(t) + 1) / 2 * (hi - lo)\n}\n\n// basic ANSI C LCG\nconst A = 1103515245\nconst C = 12345\nconst M = 2147483648\n\nexport class RNG {\n\tseed: number\n\tconstructor(seed: number) {\n\t\tthis.seed = seed\n\t}\n\tgen(): number {\n\t\tthis.seed = (A * this.seed + C) % M\n\t\treturn this.seed / M\n\t}\n\tgenNumber(a: number, b: number): number {\n\t\treturn a + this.gen() * (b - a)\n\t}\n\tgenVec2(a: Vec2, b?: Vec2): Vec2 {\n\t\treturn new Vec2(\n\t\t\tthis.genNumber(a.x, b.x),\n\t\t\tthis.genNumber(a.y, b.y),\n\t\t)\n\t}\n\tgenColor(a: Color, b: Color): Color {\n\t\treturn new Color(\n\t\t\tthis.genNumber(a.r, b.r),\n\t\t\tthis.genNumber(a.g, b.g),\n\t\t\tthis.genNumber(a.b, b.b),\n\t\t)\n\t}\n\tgenAny<T extends RNGValue>(...args: T[]): T {\n\t\tif (args.length === 0) {\n\t\t\treturn this.gen() as T\n\t\t} else if (args.length === 1) {\n\t\t\tif (typeof args[0] === \"number\") {\n\t\t\t\treturn this.genNumber(0, args[0]) as T\n\t\t\t} else if (args[0] instanceof Vec2) {\n\t\t\t\treturn this.genVec2(vec2(0, 0), args[0]) as T\n\t\t\t} else if (args[0] instanceof Color) {\n\t\t\t\treturn this.genColor(rgb(0, 0, 0), args[0]) as T\n\t\t\t}\n\t\t} else if (args.length === 2) {\n\t\t\tif (typeof args[0] === \"number\" && typeof args[1] === \"number\") {\n\t\t\t\treturn this.genNumber(args[0], args[1]) as T\n\t\t\t} else if (args[0] instanceof Vec2 && args[1] instanceof Vec2) {\n\t\t\t\treturn this.genVec2(args[0], args[1]) as T\n\t\t\t} else if (args[0] instanceof Color && args[1] instanceof Color) {\n\t\t\t\treturn this.genColor(args[0], args[1]) as T\n\t\t\t}\n\t\t}\n\t}\n}\n\n// TODO: let user pass seed\nconst defRNG = new RNG(Date.now())\n\nexport function randSeed(seed?: number): number {\n\tif (seed != null) {\n\t\tdefRNG.seed = seed\n\t}\n\treturn defRNG.seed\n}\n\nexport function rand(...args) {\n\t// @ts-ignore\n\treturn defRNG.genAny(...args)\n}\n\n// TODO: randi() to return 0 / 1?\nexport function randi(...args: number[]) {\n\treturn Math.floor(rand(...args))\n}\n\nexport function chance(p: number): boolean {\n\treturn rand() <= p\n}\n\nexport function choose<T>(list: T[]): T {\n\treturn list[randi(list.length)]\n}\n\n// TODO: better name\nexport function testRectRect2(r1: Rect, r2: Rect): boolean {\n\treturn r1.pos.x + r1.width >= r2.pos.x\n\t\t&& r1.pos.x <= r2.pos.x + r2.width\n\t\t&& r1.pos.y + r1.height >= r2.pos.y\n\t\t&& r1.pos.y <= r2.pos.y + r2.height\n}\n\nexport function testRectRect(r1: Rect, r2: Rect): boolean {\n\treturn r1.pos.x + r1.width > r2.pos.x\n\t\t&& r1.pos.x < r2.pos.x + r2.width\n\t\t&& r1.pos.y + r1.height > r2.pos.y\n\t\t&& r1.pos.y < r2.pos.y + r2.height\n}\n\n// TODO: better name\nexport function testLineLineT(l1: Line, l2: Line): number | null {\n\n\tif ((l1.p1.x === l1.p2.x && l1.p1.y === l1.p2.y) || (l2.p1.x === l2.p2.x && l2.p1.y === l2.p2.y)) {\n\t\treturn null\n\t}\n\n\tconst denom = ((l2.p2.y - l2.p1.y) * (l1.p2.x - l1.p1.x) - (l2.p2.x - l2.p1.x) * (l1.p2.y - l1.p1.y))\n\n\t// parallel\n\tif (denom === 0) {\n\t\treturn null\n\t}\n\n\tconst ua = ((l2.p2.x - l2.p1.x) * (l1.p1.y - l2.p1.y) - (l2.p2.y - l2.p1.y) * (l1.p1.x - l2.p1.x)) / denom\n\tconst ub = ((l1.p2.x - l1.p1.x) * (l1.p1.y - l2.p1.y) - (l1.p2.y - l1.p1.y) * (l1.p1.x - l2.p1.x)) / denom\n\n\t// is the intersection on the segments\n\tif (ua < 0 || ua > 1 || ub < 0 || ub > 1) {\n\t\treturn null\n\t}\n\n\treturn ua\n\n}\n\nexport function testLineLine(l1: Line, l2: Line): Vec2 | null {\n\tconst t = testLineLineT(l1, l2)\n\tif (!t) return null\n\treturn vec2(\n\t\tl1.p1.x + t * (l1.p2.x - l1.p1.x),\n\t\tl1.p1.y + t * (l1.p2.y - l1.p1.y),\n\t)\n}\n\nexport function testRectLine(r: Rect, l: Line): boolean {\n\tif (testRectPoint(r, l.p1) || testRectPoint(r, l.p2)) {\n\t\treturn true\n\t}\n\tconst pts = r.points()\n\treturn !!testLineLine(l, new Line(pts[0], pts[1]))\n\t\t|| !!testLineLine(l, new Line(pts[1], pts[2]))\n\t\t|| !!testLineLine(l, new Line(pts[2], pts[3]))\n\t\t|| !!testLineLine(l, new Line(pts[3], pts[0]))\n}\n\nexport function testRectPoint2(r: Rect, pt: Point): boolean {\n\treturn pt.x >= r.pos.x\n\t\t&& pt.x <= r.pos.x + r.width\n\t\t&& pt.y >= r.pos.y\n\t\t&& pt.y <= r.pos.y + r.height\n}\n\nexport function testRectPoint(r: Rect, pt: Point): boolean {\n\treturn pt.x > r.pos.x\n\t\t&& pt.x < r.pos.x + r.width\n\t\t&& pt.y > r.pos.y\n\t\t&& pt.y < r.pos.y + r.height\n}\n\nexport function testRectCircle(r: Rect, c: Circle): boolean {\n\tconst nx = Math.max(r.pos.x, Math.min(c.center.x, r.pos.x + r.width))\n\tconst ny = Math.max(r.pos.y, Math.min(c.center.y, r.pos.y + r.height))\n\tconst nearestPoint = vec2(nx, ny)\n\treturn nearestPoint.dist(c.center) <= c.radius\n}\n\nexport function testRectPolygon(r: Rect, p: Polygon): boolean {\n\treturn testPolygonPolygon(p, new Polygon(r.points()))\n}\n\n// TODO\nexport function testLinePoint(l: Line, pt: Vec2): boolean {\n\treturn false\n}\n\n// TODO\nexport function testLineCircle(l: Line, c: Circle): boolean {\n\treturn false\n}\n\nexport function testLinePolygon(l: Line, p: Polygon): boolean {\n\n\t// test if line is inside\n\tif (testPolygonPoint(p, l.p1) || testPolygonPoint(p, l.p2)) {\n\t\treturn true\n\t}\n\n\t// test each line\n\tfor (let i = 0; i < p.pts.length; i++) {\n\t\tconst p1 = p.pts[i]\n\t\tconst p2 = p.pts[(i + 1) % p.pts.length]\n\t\tif (testLineLine(l, new Line(p1, p2))) {\n\t\t\treturn true\n\t\t}\n\t}\n\n\treturn false\n\n}\n\nexport function testCirclePoint(c: Circle, p: Point): boolean {\n\treturn c.center.dist(p) < c.radius\n}\n\nexport function testCircleCircle(c1: Circle, c2: Circle): boolean {\n\treturn c1.center.dist(c2.center) < c1.radius + c2.radius\n}\n\n// TODO\nexport function testCirclePolygon(c: Circle, p: Polygon): boolean {\n\treturn false\n}\n\nexport function testPolygonPolygon(p1: Polygon, p2: Polygon): boolean {\n\tfor (let i = 0; i < p1.pts.length; i++) {\n\t\tif (testLinePolygon(new Line(p1.pts[i], p1.pts[(i + 1) % p1.pts.length]), p2)) {\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n\n// https://wrf.ecse.rpi.edu/Research/Short_Notes/pnpoly.html\nexport function testPolygonPoint(poly: Polygon, pt: Point): boolean {\n\n\tlet c = false\n\tconst p = poly.pts\n\n\tfor (let i = 0, j = p.length - 1; i < p.length; j = i++) {\n\t\tif (\n\t\t\t((p[i].y > pt.y) != (p[j].y > pt.y))\n\t\t\t&& (pt.x < (p[j].x - p[i].x) * (pt.y - p[i].y) / (p[j].y - p[i].y) + p[i].x)\n\t\t) {\n\t\t\tc = !c\n\t\t}\n\t}\n\n\treturn c\n\n}\n\nexport function testPointPoint(p1: Point, p2: Point): boolean {\n\treturn p1.x === p2.x && p1.y === p2.y\n}\n\nexport class Line {\n\tp1: Vec2\n\tp2: Vec2\n\tconstructor(p1: Vec2, p2: Vec2) {\n\t\tthis.p1 = p1\n\t\tthis.p2 = p2\n\t}\n\ttransform(m: Mat4): Line {\n\t\treturn new Line(m.multVec2(this.p1), m.multVec2(this.p2))\n\t}\n\tbbox(): Rect {\n\t\treturn Rect.fromPoints(this.p1, this.p2)\n\t}\n}\n\nexport class Rect {\n\tpos: Vec2\n\twidth: number\n\theight: number\n\tconstructor(pos: Vec2, width: number, height: number) {\n\t\tthis.pos = pos\n\t\tthis.width = width\n\t\tthis.height = height\n\t}\n\tstatic fromPoints(p1: Vec2, p2: Vec2): Rect {\n\t\treturn new Rect(p1.clone(), p2.x - p1.x, p2.y - p1.y)\n\t}\n\tcenter(): Vec2 {\n\t\treturn new Vec2(this.pos.x + this.width / 2, this.pos.y + this.height / 2)\n\t}\n\tpoints(): [Vec2, Vec2, Vec2, Vec2] {\n\t\treturn [\n\t\t\tthis.pos,\n\t\t\tthis.pos.add(this.width, 0),\n\t\t\tthis.pos.add(this.width, this.height),\n\t\t\tthis.pos.add(0, this.height),\n\t\t]\n\t}\n\ttransform(m: Mat4): Polygon {\n\t\treturn new Polygon(this.points().map((pt) => m.multVec2(pt)))\n\t}\n\tbbox(): Rect {\n\t\treturn new Rect(this.pos.clone(), this.width, this.height)\n\t}\n\tdistToPoint(p: Vec2): number {\n\t\tconst min = this.pos\n\t\tconst max = this.pos.add(this.width, this.height)\n\t\tconst dx = Math.max(min.x - p.x, 0, p.x - max.x)\n\t\tconst dy = Math.max(min.y - p.y, 0, p.y - max.y)\n\t\treturn Math.sqrt(dx * dx + dy * dy)\n\t}\n}\n\nexport class Circle {\n\tcenter: Vec2\n\tradius: number\n\tconstructor(center: Vec2, radius: number) {\n\t\tthis.center = center\n\t\tthis.radius = radius\n\t}\n\ttransform(tr: Mat4): Ellipse {\n\t\treturn new Ellipse(this.center, this.radius, this.radius).transform(tr)\n\t}\n\tbbox(): Rect {\n\t\treturn Rect.fromPoints(\n\t\t\tthis.center.sub(vec2(this.radius)),\n\t\t\tthis.center.add(vec2(this.radius)),\n\t\t)\n\t}\n}\n\nexport class Ellipse {\n\tcenter: Vec2\n\tradiusX: number\n\tradiusY: number\n\tconstructor(center: Vec2, rx: number, ry: number) {\n\t\tthis.center = center\n\t\tthis.radiusX = rx\n\t\tthis.radiusY = ry\n\t}\n\ttransform(tr: Mat4): Ellipse {\n\t\treturn new Ellipse(\n\t\t\ttr.multVec2(this.center),\n\t\t\ttr.m[0] * this.radiusX,\n\t\t\ttr.m[5] * this.radiusY,\n\t\t)\n\t}\n\tbbox(): Rect {\n\t\treturn Rect.fromPoints(\n\t\t\tthis.center.sub(vec2(this.radiusX, this.radiusY)),\n\t\t\tthis.center.add(vec2(this.radiusX, this.radiusY)),\n\t\t)\n\t}\n}\n\nexport class Polygon {\n\tpts: Vec2[]\n\tconstructor(pts: Vec2[]) {\n\t\tif (pts.length < 3) {\n\t\t\tthrow new Error(\"Polygons should have at least 3 vertices\")\n\t\t}\n\t\tthis.pts = pts\n\t}\n\ttransform(m: Mat4): Polygon {\n\t\treturn new Polygon(this.pts.map((pt) => m.multVec2(pt)))\n\t}\n\tbbox(): Rect {\n\t\tconst p1 = vec2(Number.MAX_VALUE)\n\t\tconst p2 = vec2(-Number.MAX_VALUE)\n\t\tfor (const pt of this.pts) {\n\t\t\tp1.x = Math.min(p1.x, pt.x)\n\t\t\tp2.x = Math.max(p2.x, pt.x)\n\t\t\tp1.y = Math.min(p1.y, pt.y)\n\t\t\tp2.y = Math.max(p2.y, pt.y)\n\t\t}\n\t\treturn Rect.fromPoints(p1, p2)\n\t}\n}\n\nexport function sat(p1: Polygon, p2: Polygon): Vec2 | null {\n\tlet overlap = Number.MAX_VALUE\n\tlet displacement = vec2(0)\n\tfor (const poly of [p1, p2]) {\n\t\tfor (let i = 0; i < poly.pts.length; i++) {\n\t\t\tconst a = poly.pts[i]\n\t\t\tconst b = poly.pts[(i + 1) % poly.pts.length]\n\t\t\tconst axisProj = b.sub(a).normal().unit()\n\t\t\tlet min1 = Number.MAX_VALUE\n\t\t\tlet max1 = -Number.MAX_VALUE\n\t\t\tfor (let j = 0; j < p1.pts.length; j++) {\n\t\t\t\tconst q = p1.pts[j].dot(axisProj)\n\t\t\t\tmin1 = Math.min(min1, q)\n\t\t\t\tmax1 = Math.max(max1, q)\n\t\t\t}\n\t\t\tlet min2 = Number.MAX_VALUE\n\t\t\tlet max2 = -Number.MAX_VALUE\n\t\t\tfor (let j = 0; j < p2.pts.length; j++) {\n\t\t\t\tconst q = p2.pts[j].dot(axisProj)\n\t\t\t\tmin2 = Math.min(min2, q)\n\t\t\t\tmax2 = Math.max(max2, q)\n\t\t\t}\n\t\t\tconst o = Math.min(max1, max2) - Math.max(min1, min2)\n\t\t\tif (o < 0) {\n\t\t\t\treturn null\n\t\t\t}\n\t\t\tif (o < Math.abs(overlap)) {\n\t\t\t\tconst o1 = max2 - min1\n\t\t\t\tconst o2 = min2 - max1\n\t\t\t\toverlap = Math.abs(o1) < Math.abs(o2) ? o1 : o2\n\t\t\t\tdisplacement = axisProj.scale(overlap)\n\t\t\t}\n\t\t}\n\t}\n\treturn displacement\n}\n\n// https://easings.net/\nconst c1 = 1.70158\nconst c2 = c1 * 1.525\nconst c3 = c1 + 1\nconst c4 = (2 * Math.PI) / 3\nconst c5 = (2 * Math.PI) / 4.5\n\nexport const easings = {\n\tlinear: (x) => x,\n\teaseInSine: (x) => 1 - Math.cos((x * Math.PI) / 2),\n\teaseOutSine: (x) => Math.sin((x * Math.PI) / 2),\n\teaseInOutSine: (x) => -(Math.cos(Math.PI * x) - 1) / 2,\n\teaseInQuad: (x) => x * x,\n\teaseOutQuad: (x) => 1 - (1 - x) * (1 - x),\n\teaseInOutQuad: (x) => x < 0.5 ? 2 * x * x : 1 - Math.pow(-2 * x + 2, 2) / 2,\n\teaseInCubic: (x) => x * x * x,\n\teaseOutCubic: (x) => 1 - Math.pow(1 - x, 3),\n\teaseInOutCubic: (x) => x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2,\n\teaseInQuart: (x) => x * x * x * x,\n\teaseOutQuart: (x) => 1 - Math.pow(1 - x, 4),\n\teaseInOutQuart: (x) => x < 0.5 ? 8 * x * x * x * x : 1 - Math.pow(-2 * x + 2, 4) / 2,\n\teaseInQuint: (x) => x * x * x * x * x,\n\teaseOutQuint: (x) => 1 - Math.pow(1 - x, 5),\n\teaseInOutQuint: (x) => x < 0.5 ? 16 * x * x * x * x * x : 1 - Math.pow(-2 * x + 2, 5) / 2,\n\teaseInExpo: (x) => x === 0 ? 0 : Math.pow(2, 10 * x - 10),\n\teaseOutExpo: (x) => x === 1 ? 1 : 1 - Math.pow(2, -10 * x),\n\teaseInOutExpo: (x) => {\n\t\treturn x === 0\n\t\t\t? 0\n\t\t\t: x === 1\n\t\t\t\t? 1\n\t\t\t\t: x < 0.5\n\t\t\t\t\t? Math.pow(2, 20 * x - 10) / 2\n\t\t\t\t\t: (2 - Math.pow(2, -20 * x + 10)) / 2\n\t},\n\teaseInCirc: (x) => 1 - Math.sqrt(1 - Math.pow(x, 2)),\n\teaseOutCirc: (x) => Math.sqrt(1 - Math.pow(x - 1, 2)),\n\teaseInOutCirc: (x) => {\n\t\treturn x < 0.5\n\t\t\t? (1 - Math.sqrt(1 - Math.pow(2 * x, 2))) / 2\n\t\t\t: (Math.sqrt(1 - Math.pow(-2 * x + 2, 2)) + 1) / 2\n\t},\n\teaseInBack: (x) => c3 * x * x * x - c1 * x * x,\n\teaseOutBack: (x) => 1 + c3 * Math.pow(x - 1, 3) + c1 * Math.pow(x - 1, 2),\n\teaseInOutBack: (x) => {\n\t\treturn x < 0.5\n\t\t\t? (Math.pow(2 * x, 2) * ((c2 + 1) * 2 * x - c2)) / 2\n\t\t\t: (Math.pow(2 * x - 2, 2) * ((c2 + 1) * (x * 2 - 2) + c2) + 2) / 2\n\t},\n\teaseInElastic: (x) => {\n\t\treturn x === 0\n\t\t\t? 0\n\t\t\t: x === 1\n\t\t\t\t? 1\n\t\t\t\t: -Math.pow(2, 10 * x - 10) * Math.sin((x * 10 - 10.75) * c4)\n\t},\n\teaseOutElastic: (x) => {\n\t\treturn x === 0\n\t\t\t? 0\n\t\t\t: x === 1\n\t\t\t\t? 1\n\t\t\t\t: Math.pow(2, -10 * x) * Math.sin((x * 10 - 0.75) * c4) + 1\n\t},\n\teaseInOutElastic: (x) => {\n\t\treturn x === 0\n\t\t\t? 0\n\t\t\t: x === 1\n\t\t\t\t? 1\n\t\t\t\t: x < 0.5\n\t\t\t\t\t? -(Math.pow(2, 20 * x - 10) * Math.sin((20 * x - 11.125) * c5)) / 2\n\t\t\t\t\t: (Math.pow(2, -20 * x + 10) * Math.sin((20 * x - 11.125) * c5)) / 2 + 1\n\t},\n\teaseInBounce: (x) => 1 - easings.easeOutBounce(1 - x),\n\teaseOutBounce: (x) => {\n\t\tconst n1 = 7.5625\n\t\tconst d1 = 2.75\n\t\tif (x < 1 / d1) {\n\t\t\treturn n1 * x * x\n\t\t} else if (x < 2 / d1) {\n\t\t\treturn n1 * (x -= 1.5 / d1) * x + 0.75\n\t\t} else if (x < 2.5 / d1) {\n\t\t\treturn n1 * (x -= 2.25 / d1) * x + 0.9375\n\t\t} else {\n\t\t\treturn n1 * (x -= 2.625 / d1) * x + 0.984375\n\t\t}\n\t},\n\teaseInOutBounce: (x) => {\n\t\treturn x < 0.5\n\t\t\t? (1 - easings.easeOutBounce(1 - 2 * x)) / 2\n\t\t\t: (1 + easings.easeOutBounce(2 * x - 1)) / 2\n\t},\n}\n", "import { EventController } from \"./types\"\n\nexport class IDList<T> extends Map<number, T> {\n\tprivate lastID: number\n\tconstructor(...args) {\n\t\tsuper(...args)\n\t\tthis.lastID = 0\n\t}\n\tpush(v: T): number {\n\t\tconst id = this.lastID\n\t\tthis.set(id, v)\n\t\tthis.lastID++\n\t\treturn id\n\t}\n\tpushd(v: T): () => void {\n\t\tconst id = this.push(v)\n\t\treturn () => this.delete(id)\n\t}\n}\n\nexport class Event<Args extends any[] = any[]> {\n\tprivate handlers: IDList<(...args: Args) => void> = new IDList()\n\tadd(action: (...args: Args) => void): EventController {\n\t\tconst cancel = this.handlers.pushd((...args: Args) => {\n\t\t\tif (handle.paused) return\n\t\t\taction(...args)\n\t\t})\n\t\tconst handle = {\n\t\t\tpaused: false,\n\t\t\tcancel: cancel,\n\t\t}\n\t\treturn handle\n\t}\n\taddOnce(action: (...args) => void): EventController {\n\t\tconst ev = this.add((...args) => {\n\t\t\tev.cancel()\n\t\t\taction(...args)\n\t\t})\n\t\treturn ev\n\t}\n\tnext(): Promise<Args> {\n\t\treturn new Promise((res) => this.addOnce(res))\n\t}\n\ttrigger(...args: Args) {\n\t\tthis.handlers.forEach((action) => action(...args))\n\t}\n\tnumListeners(): number {\n\t\treturn this.handlers.size\n\t}\n}\n\n// TODO: be able to type each event\nexport class EventHandler<E = string> {\n\tprivate handlers: Map<E, Event> = new Map()\n\ton(name: E, action: (...args) => void): EventController {\n\t\tif (!this.handlers.get(name)) {\n\t\t\tthis.handlers.set(name, new Event())\n\t\t}\n\t\treturn this.handlers.get(name).add(action)\n\t}\n\tonOnce(name: E, action: (...args) => void): EventController {\n\t\tconst ev = this.on(name, (...args) => {\n\t\t\tev.cancel()\n\t\t\taction(...args)\n\t\t})\n\t\treturn ev\n\t}\n\tnext(name: E): Promise<unknown> {\n\t\treturn new Promise((res) => {\n\t\t\tthis.onOnce(name, res)\n\t\t})\n\t}\n\ttrigger(name: E, ...args) {\n\t\tif (this.handlers.get(name)) {\n\t\t\tthis.handlers.get(name).trigger(...args)\n\t\t}\n\t}\n\tremove(name: E) {\n\t\tthis.handlers.delete(name)\n\t}\n\tclear() {\n\t\tthis.handlers = new Map()\n\t}\n\tnumListeners(name: E): number {\n\t\treturn this.handlers.get(name)?.numListeners() ?? 0\n\t}\n}\n\nexport function deepEq(o1: any, o2: any): boolean {\n\tconst t1 = typeof o1\n\tconst t2 = typeof o2\n\tif (t1 !== t2) {\n\t\treturn false\n\t}\n\tif (t1 === \"object\" && t2 === \"object\") {\n\t\tconst k1 = Object.keys(o1)\n\t\tconst k2 = Object.keys(o2)\n\t\tif (k1.length !== k2.length) {\n\t\t\treturn false\n\t\t}\n\t\tfor (const k of k1) {\n\t\t\tconst v1 = o1[k]\n\t\t\tconst v2 = o2[k]\n\t\t\tif (!(typeof v1 === \"function\" && typeof v2 === \"function\")) {\n\t\t\t\tif (!deepEq(v1, v2)) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true\n\t}\n\treturn o1 === o2\n}\n\nexport function base64ToArrayBuffer(base64: string): ArrayBuffer {\n\tconst binstr = window.atob(base64)\n\tconst len = binstr.length\n\tconst bytes = new Uint8Array(len)\n\tfor (let i = 0; i < len; i++) {\n\t\tbytes[i] = binstr.charCodeAt(i)\n\t}\n\treturn bytes.buffer\n}\n\nexport function dataURLToArrayBuffer(url: string): ArrayBuffer {\n\treturn base64ToArrayBuffer(url.split(\",\")[1])\n}\n\nexport function download(filename: string, url: string) {\n\tconst a = document.createElement(\"a\")\n\ta.href = url\n\ta.download = filename\n\ta.click()\n}\n\nexport function downloadText(filename: string, text: string) {\n\tdownload(filename, \"data:text/plain;charset=utf-8,\" + text)\n}\n\nexport function downloadJSON(filename: string, data: any) {\n\tdownloadText(filename, JSON.stringify(data))\n}\n\nexport function downloadBlob(filename: string, blob: Blob) {\n\tconst url = URL.createObjectURL(blob)\n\tdownload(filename, url)\n\tURL.revokeObjectURL(url)\n}\n\nexport function isDataURL(str: string) {\n\treturn str.match(/^data:\\w+\\/\\w+;base64,.+/)\n}\n\nexport const uid = (() => {\n\tlet id = 0\n\treturn () => id++\n})()\n\nconst warned = new Set()\n\nexport function warn(msg: string) {\n\tif (!warned.has(msg)) {\n\t\twarned.add(msg)\n\t\tconsole.warn(msg)\n\t}\n}\n\nexport function deprecateMsg(oldName: string, newName: string) {\n\twarn(`${oldName} is deprecated. Use ${newName} instead.`)\n}\n\nexport function deprecate(oldName: string, newName: string, newFunc: (...args) => any) {\n\treturn (...args) => {\n\t\tdeprecateMsg(oldName, newName)\n\t\treturn newFunc(...args)\n\t}\n}\n\nexport function benchmark(task: () => void, times: number = 1) {\n\tconst t1 = performance.now()\n\tfor (let i = 0; i < times; i++) {\n\t\ttask()\n\t}\n\tconst t2 = performance.now()\n\treturn t2 - t1\n}\n", "export default class FPSCounter {\n\n\tprivate dts: number[] = []\n\tprivate timer: number = 0\n\tfps: number = 0\n\n\ttick(dt: number) {\n\n\t\tthis.dts.push(dt)\n\t\tthis.timer += dt\n\n\t\tif (this.timer >= 1) {\n\t\t\tthis.timer = 0\n\t\t\tthis.fps = Math.round(1 / (this.dts.reduce((a, b) => a + b) / this.dts.length))\n\t\t\tthis.dts = []\n\t\t}\n\n\t}\n\n}\n", "export default class Timer {\n\n\ttime: number\n\taction: () => void\n\tfinished: boolean = false\n\tpaused: boolean = false\n\n\tconstructor(time: number, action: () => void) {\n\t\tthis.time = time\n\t\tthis.action = action\n\t}\n\n\ttick(dt: number): boolean {\n\t\tif (this.finished || this.paused) return false\n\t\tthis.time -= dt\n\t\tif (this.time <= 0) {\n\t\t\tthis.action()\n\t\t\tthis.finished = true\n\t\t\tthis.time = 0\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\n\treset(time) {\n\t\tthis.time = time\n\t\tthis.finished = false\n\t}\n\n}\n", "// TODO: event registers return Promise for next event when callback not passed?\n// TODO: pass original browser event in input handlers\n\nconst VERSION = \"3000.0.0-alpha.10\"\n\nimport {\n\tsat,\n\tvec2,\n\tvec3,\n\tVec3,\n\tRect,\n\tPolygon,\n\tLine,\n\tCircle,\n\tColor,\n\tVec2,\n\tMat4,\n\tQuad,\n\tRNG,\n\tquad,\n\trgb,\n\thsl2rgb,\n\trand,\n\trandi,\n\trandSeed,\n\tchance,\n\tchoose,\n\tclamp,\n\tlerp,\n\tmap,\n\tmapc,\n\twave,\n\ttestLineLine,\n\ttestRectRect,\n\ttestRectLine,\n\ttestRectPoint,\n\ttestPolygonPoint,\n\ttestCirclePoint,\n\tdeg2rad,\n\trad2deg,\n\teasings,\n} from \"./math\"\n\nimport {\n\tIDList,\n\tEvent,\n\tEventHandler,\n\tdownload,\n\tdownloadText,\n\tdownloadJSON,\n\tdownloadBlob,\n\tuid,\n\tisDataURL,\n\tdeepEq,\n\tdataURLToArrayBuffer,\n\t// eslint-disable-next-line\n\twarn,\n\t// eslint-disable-next-line\n\tbenchmark,\n} from \"./utils\"\n\nimport {\n\tGfxShader,\n\tGfxFont,\n\tRenderProps,\n\tCharTransform,\n\tTextureOpt,\n\tFormattedText,\n\tFormattedChar,\n\tDrawRectOpt,\n\tDrawLineOpt,\n\tDrawLinesOpt,\n\tDrawTriangleOpt,\n\tDrawPolygonOpt,\n\tDrawCircleOpt,\n\tDrawEllipseOpt,\n\tDrawUVQuadOpt,\n\tVertex,\n\tFontData,\n\tBitmapFontData,\n\tShaderData,\n\tLoadSpriteSrc,\n\tLoadSpriteOpt,\n\tSpriteAtlasData,\n\tLoadBitmapFontOpt,\n\tKaboomCtx,\n\tKaboomOpt,\n\tAudioPlay,\n\tAudioPlayOpt,\n\tDrawSpriteOpt,\n\tDrawTextOpt,\n\tTextAlign,\n\tGameObj,\n\tEventController,\n\tSceneID,\n\tSceneDef,\n\tCompList,\n\tComp,\n\tTag,\n\tKey,\n\tMouseButton,\n\tPosComp,\n\tScaleComp,\n\tRotateComp,\n\tColorComp,\n\tOpacityComp,\n\tAnchor,\n\tAnchorComp,\n\tZComp,\n\tFollowComp,\n\tMoveComp,\n\tOffScreenCompOpt,\n\tOffScreenComp,\n\tAreaCompOpt,\n\tAreaComp,\n\tSpriteComp,\n\tSpriteCompOpt,\n\tSpriteAnimPlayOpt,\n\tSpriteAnims,\n\tTextComp,\n\tTextCompOpt,\n\tRectComp,\n\tRectCompOpt,\n\tUVQuadComp,\n\tCircleComp,\n\tOutlineComp,\n\tTimerComp,\n\tBodyComp,\n\tBodyCompOpt,\n\tUniform,\n\tShaderComp,\n\tFixedComp,\n\tStayComp,\n\tHealthComp,\n\tLifespanComp,\n\tLifespanCompOpt,\n\tStateComp,\n\tDebug,\n\tKaboomPlugin,\n\tMergeObj,\n\tLevelComp,\n\tLevelOpt,\n\tCursor,\n\tRecording,\n\tBoomOpt,\n\tPeditFile,\n\tShape,\n\tDoubleJumpComp,\n\tVirtualButton,\n\tTimerController,\n\tTweenController,\n} from \"./types\"\n\nimport FPSCounter from \"./fps\"\nimport Timer from \"./timer\"\n\n// @ts-ignore\nimport happyFontSrc from \"./assets/happy_28x36.png\"\n// @ts-ignore\nimport beanSpriteSrc from \"./assets/bean.png\"\n// @ts-ignore\nimport burpSoundSrc from \"./assets/burp.mp3\"\n// @ts-ignore\nimport kaSpriteSrc from \"./assets/ka.png\"\n// @ts-ignore\nimport boomSpriteSrc from \"./assets/boom.png\"\n\ntype ButtonState =\n\t\"up\"\n\t| \"pressed\"\n\t| \"rpressed\"\n\t| \"down\"\n\t| \"released\"\n\ntype EventList<M> = {\n\t[event in keyof M]?: (event: M[event]) => void\n}\n\ninterface SpriteCurAnim {\n\tname: string,\n\ttimer: number,\n\tloop: boolean,\n\tspeed: number,\n\tpingpong: boolean,\n\tonEnd: () => void,\n}\n\n// translate these key names to a simpler version\nconst KEY_ALIAS = {\n\t\"ArrowLeft\": \"left\",\n\t\"ArrowRight\": \"right\",\n\t\"ArrowUp\": \"up\",\n\t\"ArrowDown\": \"down\",\n\t\" \": \"space\",\n}\n\n// according to https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\nconst MOUSE_BUTTONS = [\n\t\"left\",\n\t\"middle\",\n\t\"right\",\n\t\"back\",\n\t\"forward\",\n]\n\n// don't trigger browser default event when these keys are pressed\nconst PREVENT_DEFAULT_KEYS = [\n\t\"space\",\n\t\"left\",\n\t\"right\",\n\t\"up\",\n\t\"down\",\n\t\"tab\",\n\t\"f1\",\n\t\"f2\",\n\t\"f3\",\n\t\"f4\",\n\t\"f5\",\n\t\"f6\",\n\t\"f7\",\n\t\"f8\",\n\t\"f9\",\n\t\"f10\",\n\t\"f11\",\n\t\"s\",\n]\n\n// some default charsets for loading bitmap fonts\nconst ASCII_CHARS = \" !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n\n// audio gain range\nconst MIN_GAIN = 0\nconst MAX_GAIN = 3\n\n// audio speed range\nconst MIN_SPEED = 0\nconst MAX_SPEED = 3\n\n// audio detune range\nconst MIN_DETUNE = -1200\nconst MAX_DETUNE = 1200\n\nconst DEF_ANCHOR = \"topleft\"\nconst BG_GRID_SIZE = 64\n\nconst DEF_FONT = \"happy\"\nconst DBG_FONT = \"monospace\"\nconst DEF_TEXT_SIZE = 36\nconst DEF_TEXT_CACHE_SIZE = 64\nconst FONT_ATLAS_SIZE = 1024\n// 0.1 pixel padding to texture coordinates to prevent artifact\nconst UV_PAD = 0.1\n\nconst LOG_MAX = 1\n\nconst VERTEX_FORMAT = [\n\t{ name: \"a_pos\", size: 3 },\n\t{ name: \"a_uv\", size: 2 },\n\t{ name: \"a_color\", size: 4 },\n]\n\nconst STRIDE = VERTEX_FORMAT.reduce((sum, f) => sum + f.size, 0)\n\nconst MAX_BATCHED_QUAD = 2048\nconst MAX_BATCHED_VERTS = MAX_BATCHED_QUAD * 4 * STRIDE\nconst MAX_BATCHED_INDICES = MAX_BATCHED_QUAD * 6\n\n// vertex shader template, replace {{user}} with user vertex shader code\nconst VERT_TEMPLATE = `\nattribute vec3 a_pos;\nattribute vec2 a_uv;\nattribute vec4 a_color;\n\nvarying vec3 v_pos;\nvarying vec2 v_uv;\nvarying vec4 v_color;\n\nvec4 def_vert() {\n\treturn vec4(a_pos, 1.0);\n}\n\n{{user}}\n\nvoid main() {\n\tvec4 pos = vert(a_pos, a_uv, a_color);\n\tv_pos = a_pos;\n\tv_uv = a_uv;\n\tv_color = a_color;\n\tgl_Position = pos;\n}\n`\n\n// fragment shader template, replace {{user}} with user fragment shader code\nconst FRAG_TEMPLATE = `\nprecision mediump float;\n\nvarying vec3 v_pos;\nvarying vec2 v_uv;\nvarying vec4 v_color;\n\nuniform sampler2D u_tex;\n\nvec4 def_frag() {\n\treturn v_color * texture2D(u_tex, v_uv);\n}\n\n{{user}}\n\nvoid main() {\n\tgl_FragColor = frag(v_pos, v_uv, v_color, u_tex);\n\tif (gl_FragColor.a == 0.0) {\n\t\tdiscard;\n\t}\n}\n`\n\n// default {{user}} vertex shader code\nconst DEF_VERT = `\nvec4 vert(vec3 pos, vec2 uv, vec4 color) {\n\treturn def_vert();\n}\n`\n\n// default {{user}} fragment shader code\nconst DEF_FRAG = `\nvec4 frag(vec3 pos, vec2 uv, vec4 color, sampler2D tex) {\n\treturn def_frag();\n}\n`\n\nconst COMP_DESC = new Set([\n\t\"id\",\n\t\"require\",\n])\n\nconst COMP_EVENTS = new Set([\n\t\"add\",\n\t\"update\",\n\t\"draw\",\n\t\"destroy\",\n\t\"inspect\",\n\t\"drawInspect\",\n])\n\n// transform the button state to the next state\n// e.g. if a button becomes \"pressed\" one frame, it should become \"down\" next frame\nfunction processButtonState(s: ButtonState): ButtonState {\n\tif (s === \"pressed\" || s === \"rpressed\") {\n\t\treturn \"down\"\n\t} else if (s === \"released\") {\n\t\treturn \"up\"\n\t} else {\n\t\treturn s\n\t}\n}\n\n// wrappers around full screen functions to work across browsers\nfunction enterFullscreen(el: HTMLElement) {\n\tif (el.requestFullscreen) el.requestFullscreen()\n\t// @ts-ignore\n\telse if (el.webkitRequestFullscreen) el.webkitRequestFullscreen()\n}\n\nfunction exitFullscreen() {\n\tif (document.exitFullscreen) document.exitFullscreen()\n\t// @ts-ignore\n\telse if (document.webkitExitFullScreen) document.webkitExitFullScreen()\n}\n\nfunction getFullscreenElement(): Element | void {\n\treturn document.fullscreenElement\n\t\t// @ts-ignore\n\t\t|| document.webkitFullscreenElement\n}\n\n// convert anchor string to a vec2 offset\nfunction anchorPt(orig: Anchor | Vec2): Vec2 {\n\tswitch (orig) {\n\t\tcase \"topleft\": return vec2(-1, -1)\n\t\tcase \"top\": return vec2(0, -1)\n\t\tcase \"topright\": return vec2(1, -1)\n\t\tcase \"left\": return vec2(-1, 0)\n\t\tcase \"center\": return vec2(0, 0)\n\t\tcase \"right\": return vec2(1, 0)\n\t\tcase \"botleft\": return vec2(-1, 1)\n\t\tcase \"bot\": return vec2(0, 1)\n\t\tcase \"botright\": return vec2(1, 1)\n\t\tdefault: return orig\n\t}\n}\n\nfunction alignPt(align: TextAlign): number {\n\tswitch (align) {\n\t\tcase \"left\": return 0\n\t\tcase \"center\": return 0.5\n\t\tcase \"right\": return 1\n\t\tdefault: return 0\n\t}\n}\n\nfunction createEmptyAudioBuffer(ctx: AudioContext) {\n\treturn ctx.createBuffer(1, 1, 44100)\n}\n\n// only exports one kaboom() which contains all the state\nexport default (gopt: KaboomOpt = {}): KaboomCtx => {\n\n\tconst gc: Array<() => void> = []\n\n\tconst app = (() => {\n\n\t\tconst root = gopt.root ?? document.body\n\n\t\t// if root is not defined (which falls back to <body>) we assume user is using kaboom on a clean page, and modify <body> to better fit a full screen canvas\n\t\tif (root === document.body) {\n\t\t\tdocument.body.style[\"width\"] = \"100%\"\n\t\t\tdocument.body.style[\"height\"] = \"100%\"\n\t\t\tdocument.body.style[\"margin\"] = \"0px\"\n\t\t\tdocument.documentElement.style[\"width\"] = \"100%\"\n\t\t\tdocument.documentElement.style[\"height\"] = \"100%\"\n\t\t}\n\n\t\t// create a <canvas> if user didn't provide one\n\t\tconst canvas = gopt.canvas ?? (() => {\n\t\t\tconst canvas = document.createElement(\"canvas\")\n\t\t\troot.appendChild(canvas)\n\t\t\treturn canvas\n\t\t})()\n\n\t\t// global pixel scale\n\t\tconst gscale = gopt.scale ?? 1\n\t\tconst stretchToParent = !(gopt.width && gopt.height && !gopt.stretch && !gopt.letterbox)\n\t\tconst pw = canvas.parentElement.offsetWidth\n\t\tconst ph = canvas.parentElement.offsetHeight\n\n\t\t// adjust canvas size according to user size / viewport settings\n\t\tif (stretchToParent) {\n\t\t\tcanvas.width = pw\n\t\t\tcanvas.height = ph\n\t\t} else {\n\t\t\tcanvas.width = gopt.width * gscale\n\t\t\tcanvas.height = gopt.height * gscale\n\t\t}\n\n\t\tconst cw = canvas.width\n\t\tconst ch = canvas.height\n\t\tconst pixelDensity = gopt.pixelDensity || window.devicePixelRatio\n\n\t\tcanvas.width *= pixelDensity\n\t\tcanvas.height *= pixelDensity\n\n\t\t// canvas css styles\n\t\tconst styles = [\n\t\t\t`width: ${cw}px`,\n\t\t\t`height: ${ch}px`,\n\t\t\t\"outline: none\",\n\t\t\t\"cursor: default\",\n\t\t]\n\n\t\tif (gopt.crisp) {\n\t\t\t// chrome only supports pixelated and firefox only supports crisp-edges\n\t\t\tstyles.push(\"image-rendering: pixelated\")\n\t\t\tstyles.push(\"image-rendering: crisp-edges\")\n\t\t}\n\n\t\tcanvas.style.cssText = styles.join(\";\")\n\t\t// make canvas focusable\n\t\tcanvas.tabIndex = 0\n\n\t\treturn {\n\n\t\t\tcanvas: canvas,\n\t\t\t// for 2d context\n\t\t\tcanvas2: canvas.cloneNode() as HTMLCanvasElement,\n\t\t\tpixelDensity: pixelDensity,\n\n\t\t\tstretchToParent: stretchToParent,\n\t\t\tlastParentWidth: pw,\n\t\t\tlastParentHeight: ph,\n\n\t\t\t// keep track of all button states\n\t\t\tkeyStates: {} as Record<Key, ButtonState>,\n\t\t\tmouseStates: {} as Record<MouseButton, ButtonState>,\n\t\t\tvirtualButtonStates: {} as Record<VirtualButton, ButtonState>,\n\n\t\t\t// input states from last frame, should reset every frame\n\t\t\tcharInputted: [],\n\t\t\tnumKeyDown: 0,\n\t\t\tisMouseMoved: false,\n\t\t\tisKeyPressed: false,\n\t\t\tisKeyPressedRepeat: false,\n\t\t\tisKeyReleased: false,\n\t\t\tmouseStarted: false,\n\t\t\tmousePos: vec2(0, 0),\n\t\t\tmouseDeltaPos: vec2(0, 0),\n\n\t\t\t// total time elapsed\n\t\t\ttime: 0,\n\t\t\t// real total time elapsed (including paused time)\n\t\t\trealTime: 0,\n\t\t\t// if we should skip next dt, to prevent the massive dt surge if user switch to another tab for a while and comeback\n\t\t\tskipTime: false,\n\t\t\t// how much time last frame took\n\t\t\tdt: 0.0,\n\t\t\t// total frames elapsed\n\t\t\tnumFrames: 0,\n\n\t\t\t// if we're on a touch device\n\t\t\tisTouchScreen: (\"ontouchstart\" in window) || navigator.maxTouchPoints > 0,\n\n\t\t\t// requestAnimationFrame id\n\t\t\tloopID: null,\n\t\t\t// if our game loop is currently stopped / paused\n\t\t\tstopped: false,\n\t\t\tpaused: false,\n\n\t\t\tfpsCounter: new FPSCounter(),\n\n\t\t}\n\n\t})()\n\n\tconst gl = app.canvas\n\t\t.getContext(\"webgl\", {\n\t\t\tantialias: true,\n\t\t\tdepth: true,\n\t\t\tstencil: true,\n\t\t\talpha: true,\n\t\t\tpreserveDrawingBuffer: true,\n\t\t})\n\n\tclass Texture {\n\n\t\tglTex: WebGLTexture\n\t\twidth: number\n\t\theight: number\n\n\t\tconstructor(w: number, h: number, opt: TextureOpt = {}) {\n\n\t\t\tthis.glTex = gl.createTexture()\n\t\t\tgc.push(() => this.free())\n\t\t\tthis.bind()\n\n\t\t\tif (w && h) {\n\t\t\t\tgl.texImage2D(\n\t\t\t\t\tgl.TEXTURE_2D,\n\t\t\t\t\t0, gl.RGBA,\n\t\t\t\t\tw,\n\t\t\t\t\th,\n\t\t\t\t\t0,\n\t\t\t\t\tgl.RGBA,\n\t\t\t\t\tgl.UNSIGNED_BYTE,\n\t\t\t\t\tnull,\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.width = w\n\t\t\tthis.height = h\n\n\t\t\tconst filter = (() => {\n\t\t\t\tswitch (opt.filter ?? gopt.texFilter) {\n\t\t\t\t\tcase \"linear\": return gl.LINEAR\n\t\t\t\t\tcase \"nearest\": return gl.NEAREST\n\t\t\t\t\tdefault: return gl.NEAREST\n\t\t\t\t}\n\t\t\t})()\n\n\t\t\tconst wrap = (() => {\n\t\t\t\tswitch (opt.wrap) {\n\t\t\t\t\tcase \"repeat\": return gl.REPEAT\n\t\t\t\t\tcase \"clampToEdge\": return gl.CLAMP_TO_EDGE\n\t\t\t\t\tdefault: return gl.CLAMP_TO_EDGE\n\t\t\t\t}\n\t\t\t})()\n\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filter)\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filter)\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrap)\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrap)\n\t\t\tthis.unbind()\n\n\t\t}\n\n\t\tstatic fromImage(img: TexImageSource, opt: TextureOpt = {}): Texture {\n\t\t\tconst tex = new Texture(0, 0, opt)\n\t\t\ttex.bind()\n\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img)\n\t\t\ttex.width = img.width\n\t\t\ttex.height = img.height\n\t\t\ttex.unbind()\n\t\t\treturn tex\n\t\t}\n\n\t\tupdate(x: number, y: number, img: TexImageSource) {\n\t\t\tthis.bind()\n\t\t\tgl.texSubImage2D(gl.TEXTURE_2D, 0, x, y, gl.RGBA, gl.UNSIGNED_BYTE, img)\n\t\t\tthis.unbind()\n\t\t}\n\n\t\tbind() {\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, this.glTex)\n\t\t}\n\n\t\tunbind() {\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, null)\n\t\t}\n\n\t\tfree() {\n\t\t\tgl.deleteTexture(this.glTex)\n\t\t}\n\n\t}\n\n\tconst gfx = (() => {\n\n\t\tconst defShader = makeShader(DEF_VERT, DEF_FRAG)\n\n\t\t// a 1x1 white texture to draw raw shapes like rectangles and polygons\n\t\t// we use a texture for those so we can use only 1 pipeline for drawing sprites + shapes\n\t\tconst emptyTex = Texture.fromImage(\n\t\t\tnew ImageData(new Uint8ClampedArray([ 255, 255, 255, 255 ]), 1, 1),\n\t\t)\n\n\t\tif (gopt.background) {\n\t\t\tconst c = Color.fromArray(gopt.background)\n\t\t\tgl.clearColor(c.r / 255, c.g / 255, c.b / 255, gopt.background[3] ?? 1)\n\t\t}\n\n\t\tgl.enable(gl.BLEND)\n\t\tgl.enable(gl.SCISSOR_TEST)\n\t\tgl.blendFuncSeparate(\n\t\t\tgl.SRC_ALPHA,\n\t\t\tgl.ONE_MINUS_SRC_ALPHA,\n\t\t\tgl.ONE,\n\t\t\tgl.ONE_MINUS_SRC_ALPHA,\n\t\t)\n\n\t\t// we only use one vertex and index buffer that batches all draw calls\n\t\tconst vbuf = gl.createBuffer()\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vbuf)\n\t\tgl.bufferData(gl.ARRAY_BUFFER, MAX_BATCHED_VERTS * 4, gl.DYNAMIC_DRAW)\n\n\t\tVERTEX_FORMAT.reduce((offset, f, i) => {\n\t\t\tgl.vertexAttribPointer(i, f.size, gl.FLOAT, false, STRIDE * 4, offset)\n\t\t\tgl.enableVertexAttribArray(i)\n\t\t\treturn offset + f.size * 4\n\t\t}, 0)\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, null)\n\n\t\tconst ibuf = gl.createBuffer()\n\n\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibuf)\n\t\tgl.bufferData(gl.ELEMENT_ARRAY_BUFFER, MAX_BATCHED_INDICES * 4, gl.DYNAMIC_DRAW)\n\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null)\n\n\t\t// a checkerboard texture used for the default background\n\t\tconst bgTex = Texture.fromImage(\n\t\t\tnew ImageData(new Uint8ClampedArray([\n\t\t\t\t128, 128, 128, 255,\n\t\t\t\t190, 190, 190, 255,\n\t\t\t\t190, 190, 190, 255,\n\t\t\t\t128, 128, 128, 255,\n\t\t\t]), 2, 2), {\n\t\t\t\twrap: \"repeat\",\n\t\t\t\tfilter: \"nearest\",\n\t\t\t},\n\t\t)\n\n\t\treturn {\n\n\t\t\t// keep track of how many draw calls we're doing this frame\n\t\t\tdrawCalls: 0,\n\t\t\t// how many draw calls we're doing last frame, this is the number we give to users\n\t\t\tlastDrawCalls: 0,\n\n\t\t\t// gfx states\n\t\t\tdefShader: defShader,\n\t\t\tcurShader: defShader,\n\t\t\tdefTex: emptyTex,\n\t\t\tcurTex: emptyTex,\n\t\t\tcurUniform: {},\n\t\t\tvbuf: vbuf,\n\t\t\tibuf: ibuf,\n\n\t\t\t// local vertex / index buffer queue\n\t\t\tvqueue: [],\n\t\t\tiqueue: [],\n\n\t\t\ttransform: new Mat4(),\n\t\t\ttransformStack: [],\n\n\t\t\tbgTex: bgTex,\n\n\t\t\twidth: gopt.width,\n\t\t\theight: gopt.height,\n\n\t\t\tviewport: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\twidth: gl.drawingBufferWidth,\n\t\t\t\theight: gl.drawingBufferHeight,\n\t\t\t},\n\n\t\t}\n\n\t})()\n\n\tclass SpriteData {\n\n\t\ttex: Texture\n\t\tframes: Quad[] = [ new Quad(0, 0, 1, 1) ]\n\t\tanims: SpriteAnims = {}\n\n\t\tconstructor(tex: Texture, frames?: Quad[], anims: SpriteAnims = {}) {\n\t\t\tthis.tex = tex\n\t\t\tif (frames) this.frames = frames\n\t\t\tthis.anims = anims\n\t\t}\n\n\t\tstatic from(src: LoadSpriteSrc, opt: LoadSpriteOpt = {}): Promise<SpriteData> {\n\t\t\treturn typeof src === \"string\"\n\t\t\t\t? SpriteData.fromURL(src, opt)\n\t\t\t\t: Promise.resolve(SpriteData.fromImage(src, opt),\n\t\t\t\t)\n\t\t}\n\n\t\tstatic fromImage(data: TexImageSource, opt: LoadSpriteOpt = {}): SpriteData {\n\t\t\treturn new SpriteData(\n\t\t\t\tTexture.fromImage(data, opt),\n\t\t\t\tslice(opt.sliceX || 1, opt.sliceY || 1),\n\t\t\t\topt.anims ?? {},\n\t\t\t)\n\t\t}\n\n\t\tstatic fromURL(url: string, opt: LoadSpriteOpt = {}): Promise<SpriteData> {\n\t\t\treturn loadImg(url).then((img) => SpriteData.fromImage(img, opt))\n\t\t}\n\n\t}\n\n\tclass SoundData {\n\n\t\tbuf: AudioBuffer\n\n\t\tconstructor(buf: AudioBuffer) {\n\t\t\tthis.buf = buf\n\t\t}\n\n\t\tstatic fromArrayBuffer(buf: ArrayBuffer): Promise<SoundData> {\n\t\t\treturn new Promise((resolve, reject) =>\n\t\t\t\taudio.ctx.decodeAudioData(buf, resolve, reject),\n\t\t\t).then((buf: AudioBuffer) => new SoundData(buf))\n\t\t}\n\n\t\tstatic fromURL(url: string): Promise<SoundData> {\n\t\t\tif (isDataURL(url)) {\n\t\t\t\treturn SoundData.fromArrayBuffer(dataURLToArrayBuffer(url))\n\t\t\t} else {\n\t\t\t\treturn fetchArrayBuffer(url).then((buf) => SoundData.fromArrayBuffer(buf))\n\t\t\t}\n\t\t}\n\n\t}\n\n\tconst audio = (() => {\n\n\t\t// TODO: handle when audio context is unavailable\n\t\tconst ctx = new (\n\t\t\twindow.AudioContext || (window as any).webkitAudioContext\n\t\t)() as AudioContext\n\t\tconst masterNode = ctx.createGain()\n\t\tmasterNode.connect(ctx.destination)\n\n\t\t// by default browsers can only load audio async, we don't deal with that and just start with an empty audio buffer\n\t\tconst burpSnd = new SoundData(createEmptyAudioBuffer(ctx))\n\n\t\t// load that burp sound\n\t\tctx.decodeAudioData(burpSoundSrc.buffer.slice(0)).then((buf) => {\n\t\t\tburpSnd.buf = buf\n\t\t}).catch((err) => {\n\t\t\tconsole.error(\"Failed to load burp: \", err)\n\t\t})\n\n\t\treturn {\n\t\t\tctx,\n\t\t\tmasterNode,\n\t\t\tburpSnd,\n\t\t}\n\n\t})()\n\n\tclass Asset<D> {\n\t\tdone: boolean = false\n\t\tdata: D | null = null\n\t\terror: Error | null = null\n\t\tprivate onLoadEvents: Event<[D]> = new Event()\n\t\tprivate onErrorEvents: Event<[Error]> = new Event()\n\t\tprivate onFinishEvents: Event<[]> = new Event()\n\t\tconstructor(loader: Promise<D>) {\n\t\t\tloader.then((data) => {\n\t\t\t\tthis.data = data\n\t\t\t\tthis.onLoadEvents.trigger(data)\n\t\t\t}).catch((err) => {\n\t\t\t\tthis.error = err\n\t\t\t\tif (this.onErrorEvents.numListeners() > 0) {\n\t\t\t\t\tthis.onErrorEvents.trigger(err)\n\t\t\t\t} else {\n\t\t\t\t\tthrow err\n\t\t\t\t}\n\t\t\t}).finally(() => {\n\t\t\t\tthis.onFinishEvents.trigger()\n\t\t\t\tthis.done = true\n\t\t\t})\n\t\t}\n\t\tstatic loaded<D>(data: D): Asset<D> {\n\t\t\tconst asset = new Asset(Promise.resolve(data))\n\t\t\tasset.data = data\n\t\t\tasset.done = true\n\t\t\treturn asset\n\t\t}\n\t\tonLoad(action: (data: D) => void) {\n\t\t\tthis.onLoadEvents.add(action)\n\t\t\treturn this\n\t\t}\n\t\tonError(action: (err: Error) => void) {\n\t\t\tthis.onErrorEvents.add(action)\n\t\t\treturn this\n\t\t}\n\t\tonFinish(action: () => void) {\n\t\t\tthis.onFinishEvents.add(action)\n\t\t\treturn this\n\t\t}\n\t\tthen(action: (data: D) => void): Asset<D> {\n\t\t\treturn this.onLoad(action)\n\t\t}\n\t\tcatch(action: (err: Error) => void): Asset<D> {\n\t\t\treturn this.onError(action)\n\t\t}\n\t\tfinally(action: () => void): Asset<D> {\n\t\t\treturn this.onFinish(action)\n\t\t}\n\t}\n\n\tclass AssetBucket<D> {\n\t\tassets: Map<string, Asset<D>> = new Map()\n\t\tlastUID: number = 0\n\t\tadd(name: string | null, loader: Promise<D>): Asset<D> {\n\t\t\t// if user don't provide a name we use a generated one\n\t\t\tconst id = name ?? (this.lastUID++ + \"\")\n\t\t\tconst asset = new Asset(loader)\n\t\t\tthis.assets.set(id, asset)\n\t\t\treturn asset\n\t\t}\n\t\taddLoaded(name: string | null, data: D) {\n\t\t\tconst id = name ?? (this.lastUID++ + \"\")\n\t\t\tconst asset = Asset.loaded(data)\n\t\t\tthis.assets.set(id, asset)\n\t\t}\n\t\tget(handle: string): Asset<D> | void {\n\t\t\treturn this.assets.get(handle)\n\t\t}\n\t\tprogress(): number {\n\t\t\tif (this.assets.size === 0) {\n\t\t\t\treturn 1\n\t\t\t}\n\t\t\tlet loaded = 0\n\t\t\tthis.assets.forEach((asset) => {\n\t\t\t\tif (asset.done) {\n\t\t\t\t\tloaded++\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn loaded / this.assets.size\n\t\t}\n\t}\n\n\tconst assets = {\n\t\t// prefix for when loading from a url\n\t\turlPrefix: \"\",\n\t\t// asset holders\n\t\tsprites: new AssetBucket<SpriteData>(),\n\t\tfonts: new AssetBucket<FontData>(),\n\t\tbitmapFonts: new AssetBucket<BitmapFontData>(),\n\t\tsounds: new AssetBucket<SoundData>(),\n\t\tshaders: new AssetBucket<ShaderData>(),\n\t\tcustom: new AssetBucket<any>(),\n\t\t// if we finished initially loading all assets\n\t\tloaded: false,\n\t}\n\n\tconst game = {\n\n\t\t// general events\n\t\tev: new EventHandler(),\n\t\t// object events\n\t\tobjEvents: new EventHandler(),\n\n\t\t// root game object\n\t\troot: make([]),\n\n\t\t// misc\n\t\tgravity: 0,\n\t\tscenes: {},\n\n\t\t// on screen log\n\t\tlogs: [],\n\n\t\t// camera\n\t\tcam: {\n\t\t\tpos: null,\n\t\t\tscale: vec2(1),\n\t\t\tangle: 0,\n\t\t\tshake: 0,\n\t\t\ttransform: new Mat4(),\n\t\t},\n\n\t}\n\n\t// TODO: accept Asset<T>?\n\t// wrap individual loaders with global loader counter, for stuff like progress bar\n\tfunction load<T>(prom: Promise<T>): Asset<T> {\n\t\treturn assets.custom.add(null, prom)\n\t}\n\n\t// get current load progress\n\tfunction loadProgress(): number {\n\t\tconst buckets = [\n\t\t\tassets.sprites,\n\t\t\tassets.sounds,\n\t\t\tassets.shaders,\n\t\t\tassets.fonts,\n\t\t\tassets.bitmapFonts,\n\t\t\tassets.custom,\n\t\t]\n\t\treturn buckets.reduce((n, bucket) => n + bucket.progress(), 0) / buckets.length\n\t}\n\n\t// global load path prefix\n\tfunction loadRoot(path?: string): string {\n\t\tif (path !== undefined) {\n\t\t\tassets.urlPrefix = path\n\t\t}\n\t\treturn assets.urlPrefix\n\t}\n\n\t// wrapper around fetch() that applies urlPrefix and basic error handling\n\tfunction fetchURL(path: string) {\n\t\tconst url = assets.urlPrefix + path\n\t\treturn fetch(url)\n\t\t\t.then((res) => {\n\t\t\t\tif (!res.ok) {\n\t\t\t\t\tthrow new Error(`Failed to fetch ${url}`)\n\t\t\t\t}\n\t\t\t\treturn res\n\t\t\t})\n\t}\n\n\tfunction fetchJSON(path: string) {\n\t\treturn fetchURL(path).then((res) => res.json())\n\t}\n\n\tfunction fetchText(path: string) {\n\t\treturn fetchURL(path).then((res) => res.text())\n\t}\n\n\tfunction fetchArrayBuffer(path: string) {\n\t\treturn fetchURL(path).then((res) => res.arrayBuffer())\n\t}\n\n\t// wrapper around image loader to get a Promise\n\tfunction loadImg(src: string): Promise<HTMLImageElement> {\n\t\tconst img = new Image()\n\t\timg.crossOrigin = \"anonymous\"\n\t\timg.src = isDataURL(src) ? src : assets.urlPrefix + src\n\t\treturn new Promise<HTMLImageElement>((resolve, reject) => {\n\t\t\timg.onload = () => resolve(img)\n\t\t\timg.onerror = () => reject(new Error(`Failed to load image from \"${src}\"`))\n\t\t})\n\t}\n\n\tfunction loadFont(name: string, src: string | ArrayBuffer): Asset<FontData> {\n\t\tconst font = new FontFace(name, typeof src === \"string\" ? `url(${src})` : src)\n\t\tdocument.fonts.add(font)\n\t\treturn assets.fonts.add(name, font.load().catch(() => {\n\t\t\tthrow new Error(`Failed to load font from \"${src}\"`)\n\t\t}))\n\t}\n\n\t// TODO: support LoadSpriteSrc\n\tfunction loadBitmapFont(\n\t\tname: string | null,\n\t\tsrc: string,\n\t\tgw: number,\n\t\tgh: number,\n\t\topt: LoadBitmapFontOpt = {},\n\t): Asset<BitmapFontData> {\n\t\treturn assets.bitmapFonts.add(name, loadImg(src)\n\t\t\t.then((img) => {\n\t\t\t\treturn makeFont(\n\t\t\t\t\tTexture.fromImage(img, opt),\n\t\t\t\t\tgw,\n\t\t\t\t\tgh,\n\t\t\t\t\topt.chars ?? ASCII_CHARS,\n\t\t\t\t)\n\t\t\t}),\n\t\t)\n\t}\n\n\t// get an array of frames based on configuration on how to slice the image\n\tfunction slice(x = 1, y = 1, dx = 0, dy = 0, w = 1, h = 1): Quad[] {\n\t\tconst frames = []\n\t\tconst qw = w / x\n\t\tconst qh = h / y\n\t\tfor (let j = 0; j < y; j++) {\n\t\t\tfor (let i = 0; i < x; i++) {\n\t\t\t\tframes.push(new Quad(\n\t\t\t\t\tdx + i * qw,\n\t\t\t\t\tdy + j * qh,\n\t\t\t\t\tqw,\n\t\t\t\t\tqh,\n\t\t\t\t))\n\t\t\t}\n\t\t}\n\t\treturn frames\n\t}\n\n\tfunction loadSpriteAtlas(\n\t\tsrc: LoadSpriteSrc,\n\t\tdata: SpriteAtlasData | string,\n\t): Asset<Record<string, SpriteData>> {\n\t\tif (typeof data === \"string\") {\n\t\t\treturn load(new Promise((res, rej) => {\n\t\t\t\tfetchJSON(data).then((data2) => {\n\t\t\t\t\tloadSpriteAtlas(src, data2).then(res).catch(rej)\n\t\t\t\t})\n\t\t\t}))\n\t\t}\n\t\treturn load(SpriteData.from(src).then((atlas) => {\n\t\t\tconst map = {}\n\t\t\tfor (const name in data) {\n\t\t\t\tconst w = atlas.tex.width\n\t\t\t\tconst h = atlas.tex.height\n\t\t\t\tconst info = data[name]\n\t\t\t\tconst spr = new SpriteData(\n\t\t\t\t\tatlas.tex,\n\t\t\t\t\tslice(\n\t\t\t\t\t\tinfo.sliceX,\n\t\t\t\t\t\tinfo.sliceY,\n\t\t\t\t\t\tinfo.x / w,\n\t\t\t\t\t\tinfo.y / h,\n\t\t\t\t\t\tinfo.width / w,\n\t\t\t\t\t\tinfo.height / h,\n\t\t\t\t\t),\n\t\t\t\t\tinfo.anims,\n\t\t\t\t)\n\t\t\t\tassets.sprites.addLoaded(name, spr)\n\t\t\t\tmap[name] = spr\n\t\t\t}\n\t\t\treturn map\n\t\t}))\n\t}\n\n\t// load a sprite to asset manager\n\tfunction loadSprite(\n\t\tname: string | null,\n\t\tsrc: LoadSpriteSrc,\n\t\topt: LoadSpriteOpt = {\n\t\t\tsliceX: 1,\n\t\t\tsliceY: 1,\n\t\t\tanims: {},\n\t\t},\n\t): Asset<SpriteData> {\n\t\treturn assets.sprites.add(\n\t\t\tname,\n\t\t\ttypeof src === \"string\"\n\t\t\t\t? SpriteData.fromURL(src, opt)\n\t\t\t\t: Promise.resolve(SpriteData.fromImage(src, opt),\n\t\t\t\t),\n\t\t)\n\t}\n\n\tfunction loadPedit(name: string | null, src: string | PeditFile): Asset<SpriteData> {\n\n\t\t// eslint-disable-next-line\n\t\treturn assets.sprites.add(name, new Promise(async (resolve) => {\n\n\t\t\tconst data = typeof src === \"string\" ? await fetchJSON(src) : src\n\t\t\tconst images = await Promise.all(data.frames.map(loadImg))\n\t\t\tconst canvas = document.createElement(\"canvas\")\n\t\t\tcanvas.width = data.width\n\t\t\tcanvas.height = data.height * data.frames.length\n\n\t\t\tconst ctx = canvas.getContext(\"2d\")\n\n\t\t\timages.forEach((img: HTMLImageElement, i) => {\n\t\t\t\tctx.drawImage(img, 0, i * data.height)\n\t\t\t})\n\n\t\t\tconst spr = await loadSprite(null, canvas, {\n\t\t\t\tsliceY: data.frames.length,\n\t\t\t\tanims: data.anims,\n\t\t\t})\n\n\t\t\tresolve(spr)\n\n\t\t}))\n\n\t}\n\n\tfunction loadAseprite(\n\t\tname: string | null,\n\t\timgSrc: LoadSpriteSrc,\n\t\tjsonSrc: string,\n\t): Asset<SpriteData> {\n\t\t// eslint-disable-next-line\n\t\treturn assets.sprites.add(name, new Promise(async (resolve) => {\n\t\t\tconst spr = await loadSprite(null, imgSrc)\n\t\t\tconst data = typeof jsonSrc === \"string\" ? await fetchJSON(jsonSrc) : jsonSrc\n\t\t\tconst size = data.meta.size\n\t\t\tspr.frames = data.frames.map((f: any) => {\n\t\t\t\treturn new Quad(\n\t\t\t\t\tf.frame.x / size.w,\n\t\t\t\t\tf.frame.y / size.h,\n\t\t\t\t\tf.frame.w / size.w,\n\t\t\t\t\tf.frame.h / size.h,\n\t\t\t\t)\n\t\t\t})\n\t\t\tfor (const anim of data.meta.frameTags) {\n\t\t\t\tif (anim.from === anim.to) {\n\t\t\t\t\tspr.anims[anim.name] = anim.from\n\t\t\t\t} else {\n\t\t\t\t\tspr.anims[anim.name] = {\n\t\t\t\t\t\tfrom: anim.from,\n\t\t\t\t\t\tto: anim.to,\n\t\t\t\t\t\tspeed: 10,\n\t\t\t\t\t\tloop: true,\n\t\t\t\t\t\tpingpong: anim.direction === \"pingpong\",\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tresolve(spr)\n\t\t}))\n\t}\n\n\tfunction loadShader(\n\t\tname: string | null,\n\t\tvert?: string,\n\t\tfrag?: string,\n\t\tisUrl: boolean = false,\n\t): Asset<ShaderData> {\n\n\t\treturn assets.shaders.add(name, new Promise<ShaderData>((resolve, reject) => {\n\n\t\t\tconst resolveUrl = (url?: string) =>\n\t\t\t\turl\n\t\t\t\t\t? fetchText(url)\n\t\t\t\t\t: new Promise((r) => r(null))\n\n\t\t\tif (isUrl) {\n\t\t\t\tPromise.all([resolveUrl(vert), resolveUrl(frag)])\n\t\t\t\t\t.then(([vcode, fcode]: [string | null, string | null]) => {\n\t\t\t\t\t\tresolve(makeShader(vcode, fcode))\n\t\t\t\t\t})\n\t\t\t\t\t.catch(reject)\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tresolve(makeShader(vert, frag))\n\t\t\t\t} catch (err) {\n\t\t\t\t\treject(err)\n\t\t\t\t}\n\t\t\t}\n\n\t\t}))\n\n\t}\n\n\t// load a sound to asset manager\n\tfunction loadSound(\n\t\tname: string | null,\n\t\tsrc: string | ArrayBuffer,\n\t): Asset<SoundData> {\n\t\treturn assets.sounds.add(\n\t\t\tname,\n\t\t\ttypeof src === \"string\"\n\t\t\t\t? SoundData.fromURL(src)\n\t\t\t\t: SoundData.fromArrayBuffer(src),\n\t\t)\n\t}\n\n\tfunction loadBean(name: string = \"bean\"): Asset<SpriteData> {\n\t\treturn loadSprite(name, beanSpriteSrc)\n\t}\n\n\tfunction getSprite(handle: string): Asset<SpriteData> | void {\n\t\treturn assets.sprites.get(handle)\n\t}\n\n\tfunction getSound(handle: string): Asset<SoundData> | void {\n\t\treturn assets.sounds.get(handle)\n\t}\n\n\tfunction getFont(handle: string): Asset<FontData> | void {\n\t\treturn assets.fonts.get(handle)\n\t}\n\n\tfunction getBitmapFont(handle: string): Asset<BitmapFontData> | void {\n\t\treturn assets.bitmapFonts.get(handle)\n\t}\n\n\tfunction getShader(handle: string): Asset<ShaderData> | void {\n\t\treturn assets.shaders.get(handle)\n\t}\n\n\tfunction resolveSprite(\n\t\tsrc: DrawSpriteOpt[\"sprite\"],\n\t): Asset<SpriteData> | null {\n\t\tif (typeof src === \"string\") {\n\t\t\tconst spr = getSprite(src)\n\t\t\tif (spr) {\n\t\t\t\t// if it's already loaded or being loading, return it\n\t\t\t\treturn spr\n\t\t\t} else if (loadProgress() < 1) {\n\t\t\t\t// if there's any other ongoing loading task we return empty and don't error yet\n\t\t\t\treturn null\n\t\t\t} else {\n\t\t\t\t// if all other assets are loaded and we still haven't found this sprite, throw\n\t\t\t\tthrow new Error(`Sprite not found: ${src}`)\n\t\t\t}\n\t\t} else if (src instanceof SpriteData) {\n\t\t\treturn Asset.loaded(src)\n\t\t} else if (src instanceof Asset) {\n\t\t\treturn src\n\t\t} else {\n\t\t\tthrow new Error(`Invalid sprite: ${src}`)\n\t\t}\n\t}\n\n\tfunction resolveSound(\n\t\tsrc: Parameters<typeof play>[0],\n\t): SoundData | Asset<SoundData> | null {\n\t\tif (typeof src === \"string\") {\n\t\t\tconst snd = getSound(src)\n\t\t\tif (snd) {\n\t\t\t\treturn snd.data ? snd.data : snd\n\t\t\t} else if (loadProgress() < 1) {\n\t\t\t\treturn null\n\t\t\t} else {\n\t\t\t\tthrow new Error(`Sound not found: ${src}`)\n\t\t\t}\n\t\t} else if (src instanceof SoundData) {\n\t\t\treturn src\n\t\t} else if (src instanceof Asset) {\n\t\t\treturn src.data ? src.data : src\n\t\t} else {\n\t\t\tthrow new Error(`Invalid sound: ${src}`)\n\t\t}\n\t}\n\n\tfunction resolveShader(\n\t\tsrc: RenderProps[\"shader\"],\n\t): ShaderData | Asset<ShaderData> | null {\n\t\tif (!src) {\n\t\t\treturn gfx.defShader\n\t\t}\n\t\tif (typeof src === \"string\") {\n\t\t\tconst shader = getShader(src)\n\t\t\tif (shader) {\n\t\t\t\treturn shader.data ? shader.data : shader\n\t\t\t} else if (loadProgress() < 1) {\n\t\t\t\treturn null\n\t\t\t} else {\n\t\t\t\tthrow new Error(`Shader not found: ${src}`)\n\t\t\t}\n\t\t} else if (src instanceof Asset) {\n\t\t\treturn src.data ? src.data : src\n\t\t}\n\t\t// TODO: check type\n\t\t// @ts-ignore\n\t\treturn src\n\t}\n\n\tfunction resolveFont(\n\t\tsrc: DrawTextOpt[\"font\"],\n\t):\n\t\t| FontData\n\t\t| Asset<FontData>\n\t\t| BitmapFontData\n\t\t| Asset<BitmapFontData>\n\t\t| string\n\t\t| void\n\t{\n\t\tif (!src) {\n\t\t\treturn resolveFont(gopt.font ?? DEF_FONT)\n\t\t}\n\t\tif (typeof src === \"string\") {\n\t\t\tconst font = getBitmapFont(src)\n\t\t\tif (font) {\n\t\t\t\treturn font.data ? font.data : font\n\t\t\t} else if (document.fonts.check(`${DEF_TEXT_CACHE_SIZE}px ${src}`)) {\n\t\t\t\treturn src\n\t\t\t} else if (loadProgress() < 1) {\n\t\t\t\treturn null\n\t\t\t} else {\n\t\t\t\tthrow new Error(`Font not found: ${src}`)\n\t\t\t}\n\t\t} else if (src instanceof Asset) {\n\t\t\treturn src.data ? src.data : src\n\t\t}\n\t\t// TODO: check type\n\t\t// @ts-ignore\n\t\treturn src\n\t}\n\n\t// get / set master volume\n\tfunction volume(v?: number): number {\n\t\tif (v !== undefined) {\n\t\t\taudio.masterNode.gain.value = clamp(v, MIN_GAIN, MAX_GAIN)\n\t\t}\n\t\treturn audio.masterNode.gain.value\n\t}\n\n\t// plays a sound, returns a control handle\n\tfunction play(\n\t\tsrc: string | SoundData | Asset<SoundData>,\n\t\topt: AudioPlayOpt = {\n\t\t\tloop: false,\n\t\t\tvolume: 1,\n\t\t\tspeed: 1,\n\t\t\tdetune: 0,\n\t\t\tseek: 0,\n\t\t},\n\t): AudioPlay {\n\n\t\tconst snd = resolveSound(src)\n\n\t\tif (snd instanceof Asset) {\n\t\t\tconst pb = play(new SoundData(createEmptyAudioBuffer(audio.ctx)))\n\t\t\tconst doPlay = (snd: SoundData) => {\n\t\t\t\tconst pb2 = play(snd, opt)\n\t\t\t\tfor (const k in pb2) {\n\t\t\t\t\tpb[k] = pb2[k]\n\t\t\t\t}\n\t\t\t}\n\t\t\tsnd.onLoad(doPlay)\n\t\t\treturn pb\n\t\t} else if (snd === null) {\n\t\t\tconst pb = play(new SoundData(createEmptyAudioBuffer(audio.ctx)))\n\t\t\tonLoad(() => {\n\t\t\t\t// TODO: check again when every asset is loaded\n\t\t\t})\n\t\t\treturn pb\n\t\t}\n\n\t\tconst ctx = audio.ctx\n\t\tlet stopped = false\n\t\tlet srcNode = ctx.createBufferSource()\n\n\t\tsrcNode.buffer = snd.buf\n\t\tsrcNode.loop = opt.loop ? true : false\n\n\t\tconst gainNode = ctx.createGain()\n\n\t\tsrcNode.connect(gainNode)\n\t\tgainNode.connect(audio.masterNode)\n\n\t\tconst pos = opt.seek ?? 0\n\n\t\tsrcNode.start(0, pos)\n\n\t\tlet startTime = ctx.currentTime - pos\n\t\tlet stopTime: number | null = null\n\n\t\tconst handle = {\n\n\t\t\tstop() {\n\t\t\t\tif (stopped) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.pause()\n\t\t\t\tstartTime = ctx.currentTime\n\t\t\t},\n\n\t\t\tplay(seek?: number) {\n\n\t\t\t\tif (!stopped) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst oldNode = srcNode\n\n\t\t\t\tsrcNode = ctx.createBufferSource()\n\t\t\t\tsrcNode.buffer = oldNode.buffer\n\t\t\t\tsrcNode.loop = oldNode.loop\n\t\t\t\tsrcNode.playbackRate.value = oldNode.playbackRate.value\n\n\t\t\t\tif (srcNode.detune) {\n\t\t\t\t\tsrcNode.detune.value = oldNode.detune.value\n\t\t\t\t}\n\n\t\t\t\tsrcNode.connect(gainNode)\n\n\t\t\t\tconst pos = seek ?? this.time()\n\n\t\t\t\tsrcNode.start(0, pos)\n\t\t\t\tstartTime = ctx.currentTime - pos\n\t\t\t\tstopped = false\n\t\t\t\tstopTime = null\n\n\t\t\t},\n\n\t\t\tpause() {\n\t\t\t\tif (stopped) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tsrcNode.stop()\n\t\t\t\tstopped = true\n\t\t\t\tstopTime = ctx.currentTime\n\t\t\t},\n\n\t\t\tisPaused(): boolean {\n\t\t\t\treturn stopped\n\t\t\t},\n\n\t\t\tisStopped(): boolean {\n\t\t\t\treturn stopped\n\t\t\t},\n\n\t\t\t// TODO: affect time()\n\t\t\tspeed(val?: number): number {\n\t\t\t\tif (val !== undefined) {\n\t\t\t\t\tsrcNode.playbackRate.value = clamp(val, MIN_SPEED, MAX_SPEED)\n\t\t\t\t}\n\t\t\t\treturn srcNode.playbackRate.value\n\t\t\t},\n\n\t\t\tdetune(val?: number): number {\n\t\t\t\tif (!srcNode.detune) {\n\t\t\t\t\treturn 0\n\t\t\t\t}\n\t\t\t\tif (val !== undefined) {\n\t\t\t\t\tsrcNode.detune.value = clamp(val, MIN_DETUNE, MAX_DETUNE)\n\t\t\t\t}\n\t\t\t\treturn srcNode.detune.value\n\t\t\t},\n\n\t\t\tvolume(val?: number): number {\n\t\t\t\tif (val !== undefined) {\n\t\t\t\t\tgainNode.gain.value = clamp(val, MIN_GAIN, MAX_GAIN)\n\t\t\t\t}\n\t\t\t\treturn gainNode.gain.value\n\t\t\t},\n\n\t\t\tloop() {\n\t\t\t\tsrcNode.loop = true\n\t\t\t},\n\n\t\t\tunloop() {\n\t\t\t\tsrcNode.loop = false\n\t\t\t},\n\n\t\t\tduration(): number {\n\t\t\t\treturn snd.buf.duration\n\t\t\t},\n\n\t\t\ttime(): number {\n\t\t\t\tif (stopped) {\n\t\t\t\t\treturn stopTime - startTime\n\t\t\t\t} else {\n\t\t\t\t\treturn ctx.currentTime - startTime\n\t\t\t\t}\n\t\t\t},\n\n\t\t}\n\n\t\thandle.speed(opt.speed)\n\t\thandle.detune(opt.detune)\n\t\thandle.volume(opt.volume)\n\n\t\treturn handle\n\n\t}\n\n\t// core kaboom logic\n\tfunction burp(opt?: AudioPlayOpt): AudioPlay {\n\t\treturn play(audio.burpSnd, opt)\n\t}\n\n\ttype DrawTextureOpt = RenderProps & {\n\t\ttex: Texture,\n\t\twidth?: number,\n\t\theight?: number,\n\t\ttiled?: boolean,\n\t\tflipX?: boolean,\n\t\tflipY?: boolean,\n\t\tquad?: Quad,\n\t\tanchor?: Anchor | Vec2,\n\t}\n\n\tfunction makeShader(\n\t\tvertSrc: string | null = DEF_VERT,\n\t\tfragSrc: string | null = DEF_FRAG,\n\t): GfxShader {\n\n\t\tconst vcode = VERT_TEMPLATE.replace(\"{{user}}\", vertSrc ?? DEF_VERT)\n\t\tconst fcode = FRAG_TEMPLATE.replace(\"{{user}}\", fragSrc ?? DEF_FRAG)\n\t\tconst vertShader = gl.createShader(gl.VERTEX_SHADER)\n\t\tconst fragShader = gl.createShader(gl.FRAGMENT_SHADER)\n\n\t\tgl.shaderSource(vertShader, vcode)\n\t\tgl.shaderSource(fragShader, fcode)\n\t\tgl.compileShader(vertShader)\n\t\tgl.compileShader(fragShader)\n\n\t\tconst prog = gl.createProgram()\n\n\t\tgc.push(() => gl.deleteProgram(prog))\n\t\tgl.attachShader(prog, vertShader)\n\t\tgl.attachShader(prog, fragShader)\n\n\t\tgl.bindAttribLocation(prog, 0, \"a_pos\")\n\t\tgl.bindAttribLocation(prog, 1, \"a_uv\")\n\t\tgl.bindAttribLocation(prog, 2, \"a_color\")\n\n\t\tgl.linkProgram(prog)\n\n\t\tif (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {\n\n\t\t\tconst formatShaderError = (msg: string) => {\n\t\t\t\tconst FMT = /^ERROR:\\s0:(?<line>\\d+):\\s(?<msg>.+)/\n\t\t\t\tconst match = msg.match(FMT)\n\t\t\t\treturn {\n\t\t\t\t\tline: Number(match.groups.line),\n\t\t\t\t\t// seem to be a \\n\\0 at the end of error messages, causing unwanted line break\n\t\t\t\t\tmsg: match.groups.msg.replace(/\\n\\0$/, \"\"),\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst vertError = gl.getShaderInfoLog(vertShader)\n\t\t\tconst fragError = gl.getShaderInfoLog(fragShader)\n\t\t\tlet msg = \"\"\n\n\t\t\tif (vertError) {\n\t\t\t\tconst err = formatShaderError(vertError)\n\t\t\t\tmsg += `Vertex shader line ${err.line - 14}: ${err.msg}`\n\t\t\t}\n\n\t\t\tif (fragError) {\n\t\t\t\tconst err = formatShaderError(fragError)\n\t\t\t\tmsg += `Fragment shader line ${err.line - 14}: ${err.msg}`\n\t\t\t}\n\n\t\t\tthrow new Error(msg)\n\n\t\t}\n\n\t\tgl.deleteShader(vertShader)\n\t\tgl.deleteShader(fragShader)\n\n\t\treturn {\n\n\t\t\tbind() {\n\t\t\t\tgl.useProgram(prog)\n\t\t\t},\n\n\t\t\tunbind() {\n\t\t\t\tgl.useProgram(null)\n\t\t\t},\n\n\t\t\tfree() {\n\t\t\t\tgl.deleteProgram(prog)\n\t\t\t},\n\n\t\t\tsend(uniform: Uniform) {\n\t\t\t\tfor (const name in uniform) {\n\t\t\t\t\tconst val = uniform[name]\n\t\t\t\t\tconst loc = gl.getUniformLocation(prog, name)\n\t\t\t\t\tif (typeof val === \"number\") {\n\t\t\t\t\t\tgl.uniform1f(loc, val)\n\t\t\t\t\t} else if (val instanceof Mat4) {\n\t\t\t\t\t\tgl.uniformMatrix4fv(loc, false, new Float32Array(val.m))\n\t\t\t\t\t} else if (val instanceof Color) {\n\t\t\t\t\t\t// TODO: opacity?\n\t\t\t\t\t\tgl.uniform3f(loc, val.r, val.g, val.b)\n\t\t\t\t\t} else if (val instanceof Vec3) {\n\t\t\t\t\t\tgl.uniform3f(loc, val.x, val.y, val.z)\n\t\t\t\t\t} else if (val instanceof Vec2) {\n\t\t\t\t\t\tgl.uniform2f(loc, val.x, val.y)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t}\n\n\t}\n\n\tfunction makeFont(\n\t\ttex: Texture,\n\t\tgw: number,\n\t\tgh: number,\n\t\tchars: string,\n\t): GfxFont {\n\n\t\tconst cols = tex.width / gw\n\t\tconst map: Record<string, Quad> = {}\n\t\tconst charMap = chars.split(\"\").entries()\n\n\t\tfor (const [i, ch] of charMap) {\n\t\t\tmap[ch] = new Quad(\n\t\t\t\t(i % cols) * gw,\n\t\t\t\tMath.floor(i / cols) * gh,\n\t\t\t\tgw,\n\t\t\t\tgh,\n\t\t\t)\n\t\t}\n\n\t\treturn {\n\t\t\ttex: tex,\n\t\t\tmap: map,\n\t\t\tsize: gh,\n\t\t}\n\n\t}\n\n\t// TODO: expose\n\tfunction drawRaw(\n\t\tverts: Vertex[],\n\t\tindices: number[],\n\t\tfixed: boolean,\n\t\ttex: Texture = gfx.defTex,\n\t\tshaderSrc: RenderProps[\"shader\"] = gfx.defShader,\n\t\tuniform: Uniform = {},\n\t) {\n\n\t\tconst shader = resolveShader(shaderSrc)\n\n\t\tif (!shader || shader instanceof Asset) {\n\t\t\treturn\n\t\t}\n\n\t\t// flush on texture / shader change and overflow\n\t\tif (\n\t\t\ttex !== gfx.curTex\n\t\t\t|| shader !== gfx.curShader\n\t\t\t|| !deepEq(gfx.curUniform, uniform)\n\t\t\t|| gfx.vqueue.length + verts.length * STRIDE > MAX_BATCHED_VERTS\n\t\t\t|| gfx.iqueue.length + indices.length > MAX_BATCHED_INDICES\n\t\t) {\n\t\t\tflush()\n\t\t}\n\n\t\tfor (const v of verts) {\n\n\t\t\t// TODO: cache camTransform * gfxTransform?\n\t\t\tconst transform = fixed ? gfx.transform : game.cam.transform.mult(gfx.transform)\n\n\t\t\t// normalized world space coordinate [-1.0 ~ 1.0]\n\t\t\tconst pt = screen2ndc(transform.multVec2(v.pos.xy()))\n\n\t\t\tgfx.vqueue.push(\n\t\t\t\tpt.x, pt.y, v.pos.z,\n\t\t\t\tv.uv.x, v.uv.y,\n\t\t\t\tv.color.r / 255, v.color.g / 255, v.color.b / 255, v.opacity,\n\t\t\t)\n\n\t\t}\n\n\t\tfor (const i of indices) {\n\t\t\tgfx.iqueue.push(i + gfx.vqueue.length / STRIDE - verts.length)\n\t\t}\n\n\t\tgfx.curTex = tex\n\t\tgfx.curShader = shader\n\t\tgfx.curUniform = uniform\n\n\t}\n\n\t// draw all batched shapes\n\tfunction flush() {\n\n\t\tif (\n\t\t\t!gfx.curTex\n\t\t\t|| !gfx.curShader\n\t\t\t|| gfx.vqueue.length === 0\n\t\t\t|| gfx.iqueue.length === 0\n\t\t) {\n\t\t\treturn\n\t\t}\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, gfx.vbuf)\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, new Float32Array(gfx.vqueue))\n\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gfx.ibuf)\n\t\tgl.bufferSubData(gl.ELEMENT_ARRAY_BUFFER, 0, new Uint16Array(gfx.iqueue))\n\t\tgfx.curShader.bind()\n\t\tgfx.curShader.send(gfx.curUniform)\n\t\tgfx.curTex.bind()\n\t\tgl.drawElements(gl.TRIANGLES, gfx.iqueue.length, gl.UNSIGNED_SHORT, 0)\n\t\tgfx.curTex.unbind()\n\t\tgfx.curShader.unbind()\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, null)\n\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null)\n\n\t\tgfx.vqueue = []\n\t\tgfx.iqueue = []\n\n\t\tgfx.drawCalls++\n\n\t}\n\n\t// start a rendering frame, reset some states\n\tfunction frameStart() {\n\n\t\t// running this every frame now mainly because isFullscreen() is not updated real time when requested fullscreen\n\t\tupdateViewport()\n\n\t\tgl.clear(gl.COLOR_BUFFER_BIT)\n\n\t\tif (!gopt.background) {\n\t\t\tdrawUnscaled(() => {\n\t\t\t\tdrawUVQuad({\n\t\t\t\t\twidth: width(),\n\t\t\t\t\theight: height(),\n\t\t\t\t\tquad: new Quad(\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\twidth() / BG_GRID_SIZE,\n\t\t\t\t\t\theight() / BG_GRID_SIZE,\n\t\t\t\t\t),\n\t\t\t\t\ttex: gfx.bgTex,\n\t\t\t\t\tfixed: true,\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\tgfx.drawCalls = 0\n\t\tgfx.transformStack = []\n\t\tgfx.transform = new Mat4()\n\n\t}\n\n\tfunction frameEnd() {\n\t\tflush()\n\t\tgfx.lastDrawCalls = gfx.drawCalls\n\t}\n\n\t// convert a screen space coordinate to webgl normalized device coordinate\n\tfunction screen2ndc(pt: Vec2): Vec2 {\n\t\treturn vec2(\n\t\t\tpt.x / width() * 2 - 1,\n\t\t\t-pt.y / height() * 2 + 1,\n\t\t)\n\t}\n\n\tfunction pushMatrix(m: Mat4) {\n\t\tgfx.transform = m.clone()\n\t}\n\n\tfunction pushTranslate(...args) {\n\t\tif (args[0] === undefined) return\n\t\tconst p = vec2(...args)\n\t\tif (p.x === 0 && p.y === 0) return\n\t\tgfx.transform = gfx.transform.translate(p)\n\t}\n\n\tfunction pushScale(...args) {\n\t\tif (args[0] === undefined) return\n\t\tconst p = vec2(...args)\n\t\tif (p.x === 1 && p.y === 1) return\n\t\tgfx.transform = gfx.transform.scale(p)\n\t}\n\n\tfunction pushRotateX(a: number) {\n\t\tif (!a) {\n\t\t\treturn\n\t\t}\n\t\tgfx.transform = gfx.transform.rotateX(a)\n\t}\n\n\tfunction pushRotateY(a: number) {\n\t\tif (!a) {\n\t\t\treturn\n\t\t}\n\t\tgfx.transform = gfx.transform.rotateY(a)\n\t}\n\n\tfunction pushRotateZ(a: number) {\n\t\tif (!a) {\n\t\t\treturn\n\t\t}\n\t\tgfx.transform = gfx.transform.rotateZ(a)\n\t}\n\n\tconst pushRotate = pushRotateZ\n\n\tfunction pushTransform() {\n\t\tgfx.transformStack.push(gfx.transform.clone())\n\t}\n\n\tfunction popTransform() {\n\t\tif (gfx.transformStack.length > 0) {\n\t\t\tgfx.transform = gfx.transformStack.pop()\n\t\t}\n\t}\n\n\t// draw a uv textured quad\n\tfunction drawUVQuad(opt: DrawUVQuadOpt) {\n\n\t\tif (opt.width === undefined || opt.height === undefined) {\n\t\t\tthrow new Error(\"drawUVQuad() requires property \\\"width\\\" and \\\"height\\\".\")\n\t\t}\n\n\t\tif (opt.width <= 0 || opt.height <= 0) {\n\t\t\treturn\n\t\t}\n\n\t\tconst w = opt.width\n\t\tconst h = opt.height\n\t\tconst anchor = anchorPt(opt.anchor || DEF_ANCHOR)\n\t\tconst offset = anchor.scale(vec2(w, h).scale(-0.5))\n\t\tconst q = opt.quad || new Quad(0, 0, 1, 1)\n\t\tconst color = opt.color || rgb(255, 255, 255)\n\t\tconst opacity = opt.opacity ?? 1\n\n\t\t// apply uv padding to avoid artifacts\n\t\tconst uvPadX = opt.tex ? UV_PAD / opt.tex.width : 0\n\t\tconst uvPadY = opt.tex ? UV_PAD / opt.tex.height : 0\n\t\tconst qx = q.x + uvPadX\n\t\tconst qy = q.y + uvPadY\n\t\tconst qw = q.w - uvPadX * 2\n\t\tconst qh = q.h - uvPadY * 2\n\n\t\tpushTransform()\n\t\tpushTranslate(opt.pos)\n\t\tpushRotateZ(opt.angle)\n\t\tpushScale(opt.scale)\n\t\tpushTranslate(offset)\n\n\t\tdrawRaw([\n\t\t\t{\n\t\t\t\tpos: vec3(-w / 2, h / 2, 0),\n\t\t\t\tuv: vec2(opt.flipX ? qx + qw : qx, opt.flipY ? qy : qy + qh),\n\t\t\t\tcolor: color,\n\t\t\t\topacity: opacity,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpos: vec3(-w / 2, -h / 2, 0),\n\t\t\t\tuv: vec2(opt.flipX ? qx + qw : qx, opt.flipY ? qy + qh : qy),\n\t\t\t\tcolor: color,\n\t\t\t\topacity: opacity,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpos: vec3(w / 2, -h / 2, 0),\n\t\t\t\tuv: vec2(opt.flipX ? qx : qx + qw, opt.flipY ? qy + qh : qy),\n\t\t\t\tcolor: color,\n\t\t\t\topacity: opacity,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpos: vec3(w / 2, h / 2, 0),\n\t\t\t\tuv: vec2(opt.flipX ? qx : qx + qw, opt.flipY ? qy : qy + qh),\n\t\t\t\tcolor: color,\n\t\t\t\topacity: opacity,\n\t\t\t},\n\t\t], [0, 1, 3, 1, 2, 3], opt.fixed, opt.tex, opt.shader, opt.uniform)\n\n\t\tpopTransform()\n\n\t}\n\n\t// TODO: clean\n\tfunction drawTexture(opt: DrawTextureOpt) {\n\n\t\tif (!opt.tex) {\n\t\t\tthrow new Error(\"drawTexture() requires property \\\"tex\\\".\")\n\t\t}\n\n\t\tconst q = opt.quad ?? new Quad(0, 0, 1, 1)\n\t\tconst w = opt.tex.width * q.w\n\t\tconst h = opt.tex.height * q.h\n\t\tconst scale = vec2(1)\n\n\t\tif (opt.tiled) {\n\n\t\t\t// TODO: draw fract\n\t\t\tconst repX = Math.ceil((opt.width || w) / w)\n\t\t\tconst repY = Math.ceil((opt.height || h) / h)\n\t\t\tconst anchor = anchorPt(opt.anchor || DEF_ANCHOR).add(vec2(1, 1)).scale(0.5)\n\t\t\tconst offset = anchor.scale(repX * w, repY * h)\n\n\t\t\t// TODO: rotation\n\t\t\tfor (let i = 0; i < repX; i++) {\n\t\t\t\tfor (let j = 0; j < repY; j++) {\n\t\t\t\t\tdrawUVQuad({\n\t\t\t\t\t\t...opt,\n\t\t\t\t\t\tpos: (opt.pos || vec2(0)).add(vec2(w * i, h * j)).sub(offset),\n\t\t\t\t\t\tscale: scale.scale(opt.scale || vec2(1)),\n\t\t\t\t\t\ttex: opt.tex,\n\t\t\t\t\t\tquad: q,\n\t\t\t\t\t\twidth: w,\n\t\t\t\t\t\theight: h,\n\t\t\t\t\t\tanchor: \"topleft\",\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\t// TODO: should this ignore scale?\n\t\t\tif (opt.width && opt.height) {\n\t\t\t\tscale.x = opt.width / w\n\t\t\t\tscale.y = opt.height / h\n\t\t\t} else if (opt.width) {\n\t\t\t\tscale.x = opt.width / w\n\t\t\t\tscale.y = scale.x\n\t\t\t} else if (opt.height) {\n\t\t\t\tscale.y = opt.height / h\n\t\t\t\tscale.x = scale.y\n\t\t\t}\n\n\t\t\tdrawUVQuad({\n\t\t\t\t...opt,\n\t\t\t\tscale: scale.scale(opt.scale || vec2(1)),\n\t\t\t\ttex: opt.tex,\n\t\t\t\tquad: q,\n\t\t\t\twidth: w,\n\t\t\t\theight: h,\n\t\t\t})\n\n\t\t}\n\n\t}\n\n\tfunction drawSprite(opt: DrawSpriteOpt) {\n\n\t\tif (!opt.sprite) {\n\t\t\tthrow new Error(\"drawSprite() requires property \\\"sprite\\\"\")\n\t\t}\n\n\t\tconst spr = resolveSprite(opt.sprite)\n\n\t\tif (!spr || !spr.data) {\n\t\t\treturn\n\t\t}\n\n\t\tconst q = spr.data.frames[opt.frame ?? 0]\n\n\t\tif (!q) {\n\t\t\tthrow new Error(`Frame not found: ${opt.frame ?? 0}`)\n\t\t}\n\n\t\tdrawTexture({\n\t\t\t...opt,\n\t\t\ttex: spr.data.tex,\n\t\t\tquad: q.scale(opt.quad || new Quad(0, 0, 1, 1)),\n\t\t})\n\n\t}\n\n\t// generate vertices to form an arc\n\tfunction getArcPts(\n\t\tpos: Vec2,\n\t\tradiusX: number,\n\t\tradiusY: number,\n\t\tstart: number,\n\t\tend: number,\n\t\tres: number = 1,\n\t): Vec2[] {\n\n\t\t// normalize and turn start and end angles to radians\n\t\tstart = deg2rad(start % 360)\n\t\tend = deg2rad(end % 360)\n\t\tif (end <= start) end += Math.PI * 2\n\n\t\t// TODO: better way to get this?\n\t\t// the number of vertices is sqrt(r1 + r2) * 3 * res with a minimum of 16\n\t\tconst nverts = Math.ceil(Math.max(Math.sqrt(radiusX + radiusY) * 3 * (res || 1), 16))\n\t\tconst step = (end - start) / nverts\n\t\tconst pts = []\n\n\t\t// calculate vertices\n\t\tfor (let a = start; a < end; a += step) {\n\t\t\tpts.push(pos.add(radiusX * Math.cos(a), radiusY * Math.sin(a)))\n\t\t}\n\n\t\t// doing this on the side due to possible floating point inaccuracy\n\t\tpts.push(pos.add(radiusX * Math.cos(end), radiusY * Math.sin(end)))\n\n\t\treturn pts\n\n\t}\n\n\tfunction drawRect(opt: DrawRectOpt) {\n\n\t\tif (opt.width === undefined || opt.height === undefined) {\n\t\t\tthrow new Error(\"drawRect() requires property \\\"width\\\" and \\\"height\\\".\")\n\t\t}\n\n\t\tif (opt.width <= 0 || opt.height <= 0) {\n\t\t\treturn\n\t\t}\n\n\t\tconst w = opt.width\n\t\tconst h = opt.height\n\t\tconst anchor = anchorPt(opt.anchor || DEF_ANCHOR).add(1, 1)\n\t\tconst offset = anchor.scale(vec2(w, h).scale(-0.5))\n\n\t\tlet pts = [\n\t\t\tvec2(0, 0),\n\t\t\tvec2(w, 0),\n\t\t\tvec2(w, h),\n\t\t\tvec2(0, h),\n\t\t]\n\n\t\t// TODO: gradient for rounded rect\n\t\t// TODO: drawPolygon should handle generic rounded corners\n\t\tif (opt.radius) {\n\n\t\t\t// maxium radius is half the shortest side\n\t\t\tconst r = Math.min(Math.min(w, h) / 2, opt.radius)\n\n\t\t\tpts = [\n\t\t\t\tvec2(r, 0),\n\t\t\t\tvec2(w - r, 0),\n\t\t\t\t...getArcPts(vec2(w - r, r), r, r, 270, 360),\n\t\t\t\tvec2(w, r),\n\t\t\t\tvec2(w, h - r),\n\t\t\t\t...getArcPts(vec2(w - r, h - r), r, r, 0, 90),\n\t\t\t\tvec2(w - r, h),\n\t\t\t\tvec2(r, h),\n\t\t\t\t...getArcPts(vec2(r, h - r), r, r, 90, 180),\n\t\t\t\tvec2(0, h - r),\n\t\t\t\tvec2(0, r),\n\t\t\t\t...getArcPts(vec2(r, r), r, r, 180, 270),\n\t\t\t]\n\n\t\t}\n\n\t\tdrawPolygon({\n\t\t\t...opt,\n\t\t\toffset,\n\t\t\tpts,\n\t\t\t...(opt.gradient ? {\n\t\t\t\tcolors: opt.horizontal ? [\n\t\t\t\t\topt.gradient[0],\n\t\t\t\t\topt.gradient[1],\n\t\t\t\t\topt.gradient[1],\n\t\t\t\t\topt.gradient[0],\n\t\t\t\t] : [\n\t\t\t\t\topt.gradient[0],\n\t\t\t\t\topt.gradient[0],\n\t\t\t\t\topt.gradient[1],\n\t\t\t\t\topt.gradient[1],\n\t\t\t\t],\n\t\t\t} : {}),\n\t\t})\n\n\t}\n\n\tfunction drawLine(opt: DrawLineOpt) {\n\n\t\tconst { p1, p2 } = opt\n\n\t\tif (!p1 || !p2) {\n\t\t\tthrow new Error(\"drawLine() requires properties \\\"p1\\\" and \\\"p2\\\".\")\n\t\t}\n\n\t\tconst w = opt.width || 1\n\n\t\t// the displacement from the line end point to the corner point\n\t\tconst dis = p2.sub(p1).unit().normal().scale(w * 0.5)\n\n\t\t// calculate the 4 corner points of the line polygon\n\t\tconst verts = [\n\t\t\tp1.sub(dis),\n\t\t\tp1.add(dis),\n\t\t\tp2.add(dis),\n\t\t\tp2.sub(dis),\n\t\t].map((p) => ({\n\t\t\tpos: vec3(p.x, p.y, 0),\n\t\t\tuv: vec2(0),\n\t\t\tcolor: opt.color ?? Color.WHITE,\n\t\t\topacity: opt.opacity ?? 1,\n\t\t}))\n\n\t\tdrawRaw(verts, [0, 1, 3, 1, 2, 3], opt.fixed, gfx.defTex, opt.shader, opt.uniform)\n\n\t}\n\n\tfunction drawLines(opt: DrawLinesOpt) {\n\n\t\tconst pts = opt.pts\n\n\t\tif (!pts) {\n\t\t\tthrow new Error(\"drawLines() requires property \\\"pts\\\".\")\n\t\t}\n\n\t\tif (pts.length < 2) {\n\t\t\treturn\n\t\t}\n\n\t\tif (opt.radius && pts.length >= 3) {\n\n\t\t\t// TODO: line joines\n\t\t\t// TODO: rounded vertices for arbitury polygonic shape\n\t\t\tlet minLen = pts[0].dist(pts[1])\n\n\t\t\tfor (let i = 1; i < pts.length - 1; i++) {\n\t\t\t\tminLen = Math.min(pts[i].dist(pts[i + 1]), minLen)\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line\n\t\t\tconst radius = Math.min(opt.radius, minLen / 2)\n\n\t\t\tdrawLine({ ...opt, p1: pts[0], p2: pts[1] })\n\n\t\t\tfor (let i = 1; i < pts.length - 2; i++) {\n\t\t\t\tconst p1 = pts[i]\n\t\t\t\tconst p2 = pts[i + 1]\n\t\t\t\tdrawLine({\n\t\t\t\t\t...opt,\n\t\t\t\t\tp1: p1,\n\t\t\t\t\tp2: p2,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tdrawLine({ ...opt, p1: pts[pts.length - 2], p2: pts[pts.length - 1] })\n\n\t\t} else {\n\n\t\t\tfor (let i = 0; i < pts.length - 1; i++) {\n\t\t\t\tdrawLine({\n\t\t\t\t\t...opt,\n\t\t\t\t\tp1: pts[i],\n\t\t\t\t\tp2: pts[i + 1],\n\t\t\t\t})\n\t\t\t\t// TODO: other line join types\n\t\t\t\tif (opt.join !== \"none\") {\n\t\t\t\t\tdrawCircle({\n\t\t\t\t\t\t...opt,\n\t\t\t\t\t\tpos: pts[i],\n\t\t\t\t\t\tradius: opt.width / 2,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction drawTriangle(opt: DrawTriangleOpt) {\n\t\tif (!opt.p1 || !opt.p2 || !opt.p3) {\n\t\t\tthrow new Error(\"drawPolygon() requires properties \\\"p1\\\", \\\"p2\\\" and \\\"p3\\\".\")\n\t\t}\n\t\treturn drawPolygon({\n\t\t\t...opt,\n\t\t\tpts: [opt.p1, opt.p2, opt.p3],\n\t\t})\n\t}\n\n\t// TODO: anchor\n\tfunction drawCircle(opt: DrawCircleOpt) {\n\n\t\tif (!opt.radius) {\n\t\t\tthrow new Error(\"drawCircle() requires property \\\"radius\\\".\")\n\t\t}\n\n\t\tif (opt.radius === 0) {\n\t\t\treturn\n\t\t}\n\n\t\tdrawEllipse({\n\t\t\t...opt,\n\t\t\tradiusX: opt.radius,\n\t\t\tradiusY: opt.radius,\n\t\t\tangle: 0,\n\t\t})\n\n\t}\n\n\tfunction drawEllipse(opt: DrawEllipseOpt) {\n\n\t\tif (opt.radiusX === undefined || opt.radiusY === undefined) {\n\t\t\tthrow new Error(\"drawEllipse() requires properties \\\"radiusX\\\" and \\\"radiusY\\\".\")\n\t\t}\n\n\t\tif (opt.radiusX === 0 || opt.radiusY === 0) {\n\t\t\treturn\n\t\t}\n\n\t\tconst start = opt.start ?? 0\n\t\tconst end = opt.end ?? 360\n\n\t\tconst pts = getArcPts(\n\t\t\tvec2(0),\n\t\t\topt.radiusX,\n\t\t\topt.radiusY,\n\t\t\tstart,\n\t\t\tend,\n\t\t\topt.resolution,\n\t\t)\n\n\t\t// center\n\t\tpts.unshift(vec2(0))\n\n\t\tconst polyOpt = {\n\t\t\t...opt,\n\t\t\tpts,\n\t\t\tradius: 0,\n\t\t\t...(opt.gradient ? {\n\t\t\t\tcolors: [\n\t\t\t\t\topt.gradient[0],\n\t\t\t\t\t...Array(pts.length - 1).fill(opt.gradient[1]),\n\t\t\t\t],\n\t\t\t} : {}),\n\t\t}\n\n\t\t// full circle with outline shouldn't have the center point\n\t\tif (end - start >= 360 && opt.outline) {\n\t\t\tif (opt.fill !== false) {\n\t\t\t\tdrawPolygon({\n\t\t\t\t\t...polyOpt,\n\t\t\t\t\toutline: null,\n\t\t\t\t})\n\t\t\t}\n\t\t\tdrawPolygon({\n\t\t\t\t...polyOpt,\n\t\t\t\tpts: pts.slice(1),\n\t\t\t\tfill: false,\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tdrawPolygon(polyOpt)\n\n\t}\n\n\tfunction drawPolygon(opt: DrawPolygonOpt) {\n\n\t\tif (!opt.pts) {\n\t\t\tthrow new Error(\"drawPolygon() requires property \\\"pts\\\".\")\n\t\t}\n\n\t\tconst npts = opt.pts.length\n\n\t\tif (npts < 3) {\n\t\t\treturn\n\t\t}\n\n\t\tpushTransform()\n\t\tpushTranslate(opt.pos)\n\t\tpushScale(opt.scale)\n\t\tpushRotateZ(opt.angle)\n\t\tpushTranslate(opt.offset)\n\n\t\tif (opt.fill !== false) {\n\n\t\t\tconst color = opt.color ?? Color.WHITE\n\n\t\t\tconst verts = opt.pts.map((pt, i) => ({\n\t\t\t\tpos: vec3(pt.x, pt.y, 0),\n\t\t\t\tuv: vec2(0, 0),\n\t\t\t\tcolor: opt.colors ? (opt.colors[i] ?? color) : color,\n\t\t\t\topacity: opt.opacity ?? 1,\n\t\t\t}))\n\n\t\t\t// TODO: better triangulation\n\t\t\tconst indices = [...Array(npts - 2).keys()]\n\t\t\t\t.map((n) => [0, n + 1, n + 2])\n\t\t\t\t.flat()\n\n\t\t\tdrawRaw(verts, opt.indices ?? indices, opt.fixed, gfx.defTex, opt.shader, opt.uniform)\n\n\t\t}\n\n\t\tif (opt.outline) {\n\t\t\tdrawLines({\n\t\t\t\tpts: [ ...opt.pts, opt.pts[0] ],\n\t\t\t\tradius: opt.radius,\n\t\t\t\twidth: opt.outline.width,\n\t\t\t\tcolor: opt.outline.color,\n\t\t\t\tjoin: opt.outline.join,\n\t\t\t\tuniform: opt.uniform,\n\t\t\t\tfixed: opt.fixed,\n\t\t\t\topacity: opt.opacity,\n\t\t\t})\n\t\t}\n\n\t\tpopTransform()\n\n\t}\n\n\tfunction drawStenciled(content: () => void, mask: () => void, test: number) {\n\n\t\tflush()\n\t\tgl.clear(gl.STENCIL_BUFFER_BIT)\n\t\tgl.enable(gl.STENCIL_TEST)\n\n\t\t// don't perform test, pure write\n\t\tgl.stencilFunc(\n\t\t\tgl.NEVER,\n\t\t\t1,\n\t\t\t0xFF,\n\t\t)\n\n\t\t// always replace since we're writing to the buffer\n\t\tgl.stencilOp(\n\t\t\tgl.REPLACE,\n\t\t\tgl.REPLACE,\n\t\t\tgl.REPLACE,\n\t\t)\n\n\t\tmask()\n\t\tflush()\n\n\t\t// perform test\n\t\tgl.stencilFunc(\n\t\t\ttest,\n\t\t\t1,\n\t\t\t0xFF,\n\t\t)\n\n\t\t// don't write since we're only testing\n\t\tgl.stencilOp(\n\t\t\tgl.KEEP,\n\t\t\tgl.KEEP,\n\t\t\tgl.KEEP,\n\t\t)\n\n\t\tcontent()\n\t\tflush()\n\t\tgl.disable(gl.STENCIL_TEST)\n\n\t}\n\n\tfunction drawMasked(content: () => void, mask: () => void) {\n\t\tdrawStenciled(content, mask, gl.EQUAL)\n\t}\n\n\tfunction drawSubtracted(content: () => void, mask: () => void) {\n\t\tdrawStenciled(content, mask, gl.NOTEQUAL)\n\t}\n\n\tfunction getViewportScale() {\n\t\treturn (gfx.viewport.width + gfx.viewport.height) / (gfx.width + gfx.height)\n\t}\n\n\tfunction drawUnscaled(content: () => void) {\n\t\tflush()\n\t\tconst ow = gfx.width\n\t\tconst oh = gfx.height\n\t\tgfx.width = gfx.viewport.width\n\t\tgfx.height = gfx.viewport.height\n\t\tcontent()\n\t\tflush()\n\t\tgfx.width = ow\n\t\tgfx.height = oh\n\t}\n\n\tfunction applyCharTransform(fchar: FormattedChar, tr: CharTransform) {\n\t\tif (tr.pos) fchar.pos = fchar.pos.add(tr.pos)\n\t\tif (tr.scale) fchar.scale = fchar.scale.scale(vec2(tr.scale))\n\t\tif (tr.angle) fchar.angle += tr.angle\n\t\tif (tr.color) fchar.color = fchar.color.mult(tr.color)\n\t\tif (tr.opacity) fchar.opacity *= tr.opacity\n\t}\n\n\t// TODO: escape\n\t// eslint-disable-next-line\n\tconst TEXT_STYLE_RE = /\\[(?<text>[^\\]]*)\\]\\.(?<style>[\\w\\.]+)+/g\n\n\tfunction compileStyledText(text: string): {\n\t\tcharStyleMap: Record<number, {\n\t\t\tlocalIdx: number,\n\t\t\tstyles: string[],\n\t\t}>,\n\t\ttext: string,\n\t} {\n\n\t\tconst charStyleMap = {}\n\t\t// get the text without the styling syntax\n\t\tconst renderText = text.replace(TEXT_STYLE_RE, \"$1\")\n\t\tlet idxOffset = 0\n\n\t\t// put each styled char index into a map for easy access when iterating each char\n\t\tfor (const match of text.matchAll(TEXT_STYLE_RE)) {\n\t\t\tconst styles = match.groups.style.split(\".\")\n\t\t\tconst origIdx = match.index - idxOffset\n\t\t\tfor (\n\t\t\t\tlet i = origIdx;\n\t\t\t\ti < match.index + match.groups.text.length;\n\t\t\t\ti++\n\t\t\t) {\n\t\t\t\tcharStyleMap[i] = {\n\t\t\t\t\tlocalIdx: i - origIdx,\n\t\t\t\t\tstyles: styles,\n\t\t\t\t}\n\t\t\t}\n\t\t\t// omit \"[\", \"]\", \".\" and the style text in the format string when calculating index\n\t\t\tidxOffset += 3 + match.groups.style.length\n\t\t}\n\n\t\treturn {\n\t\t\tcharStyleMap: charStyleMap,\n\t\t\ttext: renderText,\n\t\t}\n\n\t}\n\n\ttype FontAtlas = {\n\t\tfont: BitmapFontData,\n\t\tcursor: Vec2,\n\t}\n\n\tconst fontAtlases: Record<string, FontAtlas> = {}\n\n\t// TODO: cache formatted text\n\t// format text and return a list of chars with their calculated position\n\tfunction formatText(opt: DrawTextOpt): FormattedText {\n\n\t\tif (opt.text === undefined) {\n\t\t\tthrow new Error(\"formatText() requires property \\\"text\\\".\")\n\t\t}\n\n\t\tlet font = resolveFont(opt.font)\n\n\t\t// if it's still loading\n\t\tif (opt.text === \"\" || font instanceof Asset || !font) {\n\t\t\treturn {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t\tchars: [],\n\t\t\t\topt: opt,\n\t\t\t}\n\t\t}\n\n\t\tconst { charStyleMap, text } = compileStyledText(opt.text + \"\")\n\t\tconst chars = text.split(\"\")\n\n\t\t// if it's not bitmap font, we draw it with 2d canvas or use cached image\n\t\tif (font instanceof FontFace || typeof font === \"string\") {\n\n\t\t\tconst fontName = font instanceof FontFace ? font.family : font\n\n\t\t\tconst atlas: FontAtlas = fontAtlases[fontName] ?? {\n\t\t\t\tfont: {\n\t\t\t\t\ttex: new Texture(FONT_ATLAS_SIZE, FONT_ATLAS_SIZE, {\n\t\t\t\t\t\tfilter: \"linear\",\n\t\t\t\t\t}),\n\t\t\t\t\tmap: {},\n\t\t\t\t\tsize: DEF_TEXT_CACHE_SIZE,\n\t\t\t\t},\n\t\t\t\tcursor: vec2(0),\n\t\t\t}\n\n\t\t\tif (!fontAtlases[fontName]) {\n\t\t\t\tfontAtlases[fontName] = atlas\n\t\t\t}\n\n\t\t\tfont = atlas.font\n\n\t\t\tfor (const ch of chars) {\n\n\t\t\t\tif (!atlas.font.map[ch]) {\n\n\t\t\t\t\tconst c2d = app.canvas2.getContext(\"2d\")\n\t\t\t\t\tc2d.font = `${font.size}px ${fontName}`\n\t\t\t\t\tc2d.clearRect(0, 0, app.canvas2.width, app.canvas2.height)\n\t\t\t\t\tc2d.textBaseline = \"top\"\n\t\t\t\t\tc2d.textAlign = \"left\"\n\t\t\t\t\tc2d.fillStyle = \"rgb(255, 255, 255)\"\n\t\t\t\t\tc2d.fillText(ch, 0, 0)\n\t\t\t\t\tconst m = c2d.measureText(ch)\n\t\t\t\t\tconst w = Math.ceil(m.width)\n\t\t\t\t\tconst img = c2d.getImageData(0, 0, w, font.size)\n\n\t\t\t\t\t// if we are about to exceed the X axis of the texture, go to another line\n\t\t\t\t\tif (atlas.cursor.x + w > FONT_ATLAS_SIZE) {\n\t\t\t\t\t\tatlas.cursor.x = 0\n\t\t\t\t\t\tatlas.cursor.y += font.size\n\t\t\t\t\t\tif (atlas.cursor.y > FONT_ATLAS_SIZE) {\n\t\t\t\t\t\t\t// TODO: create another tex\n\t\t\t\t\t\t\tthrow new Error(\"Font atlas exceeds character limit\")\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfont.tex.update(atlas.cursor.x, atlas.cursor.y, img)\n\t\t\t\t\tfont.map[ch] = new Quad(atlas.cursor.x, atlas.cursor.y, w, font.size)\n\t\t\t\t\tatlas.cursor.x += w\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst size = opt.size || font.size\n\t\tconst scale = vec2(opt.scale ?? 1).scale(size / font.size)\n\t\tconst lineSpacing = opt.lineSpacing ?? 0\n\t\tconst letterSpacing = opt.letterSpacing ?? 0\n\t\tlet curX = 0\n\t\tlet tw = 0\n\t\tlet th = 0\n\t\tconst lines: Array<{\n\t\t\twidth: number,\n\t\t\tchars: FormattedChar[],\n\t\t}> = []\n\t\tlet curLine: FormattedChar[] = []\n\t\tlet cursor = 0\n\t\tlet lastSpace = null\n\t\tlet lastSpaceWidth = null\n\n\t\t// TODO: word break\n\t\twhile (cursor < chars.length) {\n\n\t\t\tlet ch = chars[cursor]\n\n\t\t\t// always new line on '\\n'\n\t\t\tif (ch === \"\\n\") {\n\n\t\t\t\tth += size + lineSpacing\n\n\t\t\t\tlines.push({\n\t\t\t\t\twidth: curX - letterSpacing,\n\t\t\t\t\tchars: curLine,\n\t\t\t\t})\n\n\t\t\t\tlastSpace = null\n\t\t\t\tlastSpaceWidth = null\n\t\t\t\tcurX = 0\n\t\t\t\tcurLine = []\n\n\t\t\t} else {\n\n\t\t\t\tlet q = font.map[ch]\n\n\t\t\t\t// TODO: leave space if character not found?\n\t\t\t\tif (q) {\n\n\t\t\t\t\tlet gw = q.w * scale.x\n\n\t\t\t\t\tif (opt.width && curX + gw > opt.width) {\n\t\t\t\t\t\t// new line on last word if width exceeds\n\t\t\t\t\t\tth += size + lineSpacing\n\t\t\t\t\t\tif (lastSpace != null) {\n\t\t\t\t\t\t\tcursor -= curLine.length - lastSpace\n\t\t\t\t\t\t\tch = chars[cursor]\n\t\t\t\t\t\t\tq = font.map[ch]\n\t\t\t\t\t\t\tgw = q.w * scale.x\n\t\t\t\t\t\t\t// omit trailing space\n\t\t\t\t\t\t\tcurLine = curLine.slice(0, lastSpace - 1)\n\t\t\t\t\t\t\tcurX = lastSpaceWidth\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlastSpace = null\n\t\t\t\t\t\tlastSpaceWidth = null\n\t\t\t\t\t\tlines.push({\n\t\t\t\t\t\t\twidth: curX - letterSpacing,\n\t\t\t\t\t\t\tchars: curLine,\n\t\t\t\t\t\t})\n\t\t\t\t\t\tcurX = 0\n\t\t\t\t\t\tcurLine = []\n\t\t\t\t\t}\n\n\t\t\t\t\t// push char\n\t\t\t\t\tcurLine.push({\n\t\t\t\t\t\ttex: font.tex,\n\t\t\t\t\t\twidth: q.w,\n\t\t\t\t\t\theight: q.h,\n\t\t\t\t\t\t// without some padding there'll be visual artifacts on edges\n\t\t\t\t\t\tquad: new Quad(\n\t\t\t\t\t\t\tq.x / font.tex.width,\n\t\t\t\t\t\t\tq.y / font.tex.height,\n\t\t\t\t\t\t\tq.w / font.tex.width,\n\t\t\t\t\t\t\tq.h / font.tex.height,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tch: ch,\n\t\t\t\t\t\tpos: vec2(curX, th),\n\t\t\t\t\t\topacity: opt.opacity ?? 1,\n\t\t\t\t\t\tcolor: opt.color ?? Color.WHITE,\n\t\t\t\t\t\tscale: vec2(scale),\n\t\t\t\t\t\tangle: 0,\n\t\t\t\t\t})\n\n\t\t\t\t\tif (ch === \" \") {\n\t\t\t\t\t\tlastSpace = curLine.length\n\t\t\t\t\t\tlastSpaceWidth = curX\n\t\t\t\t\t}\n\n\t\t\t\t\tcurX += gw\n\t\t\t\t\ttw = Math.max(tw, curX)\n\t\t\t\t\tcurX += letterSpacing\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcursor++\n\n\t\t}\n\n\t\tlines.push({\n\t\t\twidth: curX - letterSpacing,\n\t\t\tchars: curLine,\n\t\t})\n\n\t\tth += size\n\n\t\tif (opt.width) {\n\t\t\ttw = opt.width\n\t\t}\n\n\t\tconst fchars: FormattedChar[] = []\n\n\t\tfor (const line of lines) {\n\n\t\t\tconst ox = (tw - line.width) * alignPt(opt.align ?? \"left\")\n\n\t\t\tfor (const fchar of line.chars) {\n\n\t\t\t\tconst q = font.map[fchar.ch]\n\t\t\t\tconst idx = fchars.length\n\n\t\t\t\tconst offset = new Vec2(\n\t\t\t\t\tq.w * scale.x * 0.5,\n\t\t\t\t\tq.h * scale.y * 0.5,\n\t\t\t\t)\n\n\t\t\t\tfchar.pos = fchar.pos.add(ox, 0).add(offset)\n\n\t\t\t\tif (opt.transform) {\n\t\t\t\t\tconst tr = typeof opt.transform === \"function\"\n\t\t\t\t\t\t? opt.transform(idx, fchar.ch)\n\t\t\t\t\t\t: opt.transform\n\t\t\t\t\tif (tr) {\n\t\t\t\t\t\tapplyCharTransform(fchar, tr)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (charStyleMap[idx]) {\n\t\t\t\t\tconst { styles, localIdx } = charStyleMap[idx]\n\t\t\t\t\tfor (const name of styles) {\n\t\t\t\t\t\tconst style = opt.styles[name]\n\t\t\t\t\t\tconst tr = typeof style === \"function\"\n\t\t\t\t\t\t\t? style(localIdx, fchar.ch)\n\t\t\t\t\t\t\t: style\n\t\t\t\t\t\tif (tr) {\n\t\t\t\t\t\t\tapplyCharTransform(fchar, tr)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfchars.push(fchar)\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\twidth: tw,\n\t\t\theight: th,\n\t\t\tchars: fchars,\n\t\t\topt: opt,\n\t\t}\n\n\t}\n\n\tfunction drawText(opt: DrawTextOpt) {\n\t\tdrawFormattedText(formatText(opt))\n\t}\n\n\tfunction drawFormattedText(ftext: FormattedText) {\n\t\tpushTransform()\n\t\tpushTranslate(ftext.opt.pos)\n\t\tpushRotateZ(ftext.opt.angle)\n\t\tpushTranslate(anchorPt(ftext.opt.anchor ?? \"topleft\").add(1, 1).scale(ftext.width, ftext.height).scale(-0.5))\n\t\tftext.chars.forEach((ch) => {\n\t\t\tdrawUVQuad({\n\t\t\t\ttex: ch.tex,\n\t\t\t\twidth: ch.width,\n\t\t\t\theight: ch.height,\n\t\t\t\tpos: ch.pos,\n\t\t\t\tscale: ch.scale,\n\t\t\t\tangle: ch.angle,\n\t\t\t\tcolor: ch.color,\n\t\t\t\topacity: ch.opacity,\n\t\t\t\tquad: ch.quad,\n\t\t\t\tanchor: \"center\",\n\t\t\t\tuniform: ftext.opt.uniform,\n\t\t\t\tshader: ftext.opt.shader,\n\t\t\t\tfixed: ftext.opt.fixed,\n\t\t\t})\n\t\t})\n\t\tpopTransform()\n\t}\n\n\t// update viewport based on user setting and fullscreen state\n\tfunction updateViewport() {\n\n\t\t// content size (scaled content size, with scale, stretch and letterbox)\n\t\t// view size (unscaled viewport size)\n\t\t// window size (will be the same as view size except letterbox mode)\n\n\t\t// check for resize\n\t\tif (app.stretchToParent && !isFullscreen()) {\n\t\t\t// TODO: update cam pos\n\t\t\t// TODO: if <html>/<body> height not set to 100% the height keeps growing\n\t\t\tconst pw = app.canvas.parentElement.offsetWidth\n\t\t\tconst ph = app.canvas.parentElement.offsetHeight\n\t\t\tif (pw !== app.lastParentWidth || ph !== app.lastParentHeight) {\n\t\t\t\tapp.canvas.width = pw * app.pixelDensity\n\t\t\t\tapp.canvas.height = ph * app.pixelDensity\n\t\t\t\tapp.canvas.style.width = pw + \"px\"\n\t\t\t\tapp.canvas.style.height = ph + \"px\"\n\t\t\t\tconst prevWidth = width()\n\t\t\t\tconst prevHeight = height()\n\t\t\t\t// trigger \"resize\" on frame end so width() and height() will get the updated value\n\t\t\t\tgame.ev.onOnce(\"frameEnd\", () => {\n\t\t\t\t\t// should we also pass window / view size?\n\t\t\t\t\tgame.ev.trigger(\"resize\", prevWidth, prevHeight, width(), height())\n\t\t\t\t})\n\t\t\t}\n\t\t\tapp.lastParentWidth = pw\n\t\t\tapp.lastParentHeight = ph\n\t\t}\n\n\t\t// canvas size\n\t\tconst pd = app.pixelDensity\n\t\tconst cw = gl.drawingBufferWidth / pd\n\t\tconst ch = gl.drawingBufferHeight / pd\n\n\t\tif (isFullscreen()) {\n\t\t\t// TODO: doesn't work with letterbox\n\t\t\tconst ww = window.innerWidth\n\t\t\tconst wh = window.innerHeight\n\t\t\tconst rw = ww / wh\n\t\t\tconst rc = cw / ch\n\t\t\tif (rw > rc) {\n\t\t\t\tconst sw = window.innerHeight * rc\n\t\t\t\tgfx.viewport = {\n\t\t\t\t\tx: (ww - sw) / 2,\n\t\t\t\t\ty: 0,\n\t\t\t\t\twidth: sw,\n\t\t\t\t\theight: wh,\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst sh = window.innerWidth / rc\n\t\t\t\tgfx.viewport = {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: (wh - sh) / 2,\n\t\t\t\t\twidth: ww,\n\t\t\t\t\theight: sh,\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tif (gopt.letterbox) {\n\n\t\t\tif (!gopt.width || !gopt.height) {\n\t\t\t\tthrow new Error(\"Letterboxing requires width and height defined.\")\n\t\t\t}\n\n\t\t\tconst rc = cw / ch\n\t\t\tconst rg = gopt.width / gopt.height\n\n\t\t\tif (rc > rg) {\n\t\t\t\tif (!gopt.stretch) {\n\t\t\t\t\tgfx.width = ch * rg\n\t\t\t\t\tgfx.height = ch\n\t\t\t\t}\n\t\t\t\tconst sw = ch * rg\n\t\t\t\tconst sh = ch\n\t\t\t\tconst x = (cw - sw) / 2\n\t\t\t\tgl.scissor(x * pd, 0, sw * pd, sh * pd)\n\t\t\t\tgl.viewport(x * pd, 0, sw * pd, ch * pd)\n\t\t\t\tgfx.viewport = {\n\t\t\t\t\tx: x,\n\t\t\t\t\ty: 0,\n\t\t\t\t\twidth: sw,\n\t\t\t\t\theight: ch,\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!gopt.stretch) {\n\t\t\t\t\tgfx.width = cw\n\t\t\t\t\tgfx.height = cw / rg\n\t\t\t\t}\n\t\t\t\tconst sw = cw\n\t\t\t\tconst sh = cw / rg\n\t\t\t\tconst y = (ch - sh) / 2\n\t\t\t\tgl.scissor(0, y * pd, sw * pd, sh * pd)\n\t\t\t\tgl.viewport(0, y * pd, cw * pd, sh * pd)\n\t\t\t\tgfx.viewport = {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: y,\n\t\t\t\t\twidth: cw,\n\t\t\t\t\theight: sh,\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn\n\n\t\t}\n\n\t\tif (gopt.stretch) {\n\n\t\t\tif (!gopt.width || !gopt.height) {\n\t\t\t\tthrow new Error(\"Stretching requires width and height defined.\")\n\t\t\t}\n\n\t\t\tgl.viewport(0, 0, cw * pd, ch * pd)\n\n\t\t\tgfx.viewport = {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\twidth: cw,\n\t\t\t\theight: ch,\n\t\t\t}\n\n\t\t\treturn\n\t\t}\n\n\t\tconst scale = gopt.scale ?? 1\n\n\t\tgfx.width = cw / scale\n\t\tgfx.height = ch / scale\n\t\tgl.viewport(0, 0, cw * pd, ch * pd)\n\n\t\tgfx.viewport = {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\twidth: cw,\n\t\t\theight: ch,\n\t\t}\n\n\t}\n\n\t// get game width\n\tfunction width(): number {\n\t\treturn gfx.width\n\t}\n\n\t// get game height\n\tfunction height(): number {\n\t\treturn gfx.height\n\t}\n\n\tconst canvasEvents: EventList<HTMLElementEventMap> = {}\n\tconst docEvents: EventList<DocumentEventMap> = {}\n\tconst winEvents: EventList<WindowEventMap> = {}\n\n\t// transform a point from window space to content space\n\tfunction windowToContent(pt: Vec2) {\n\t\treturn vec2(\n\t\t\t(pt.x - gfx.viewport.x) * width() / gfx.viewport.width,\n\t\t\t(pt.y - gfx.viewport.y) * height() / gfx.viewport.height,\n\t\t)\n\t}\n\n\t// transform a point from content space to view space\n\tfunction contentToView(pt: Vec2) {\n\t\treturn vec2(\n\t\t\tpt.x * gfx.viewport.width / gfx.width,\n\t\t\tpt.y * gfx.viewport.height / gfx.height,\n\t\t)\n\t}\n\n\t// set game mouse pos from window mouse pos\n\tfunction setMousePos(x: number, y: number) {\n\t\tconst mpos = windowToContent(vec2(x, y))\n\t\tif (app.mouseStarted) {\n\t\t\tapp.mouseDeltaPos = mpos.sub(app.mousePos)\n\t\t}\n\t\tapp.mousePos = mpos\n\t\tapp.mouseStarted = true\n\t\tapp.isMouseMoved = true\n\t}\n\n\tcanvasEvents.mousemove = (e) => {\n\t\tsetMousePos(e.offsetX, e.offsetY)\n\t}\n\n\tcanvasEvents.mousedown = (e) => {\n\t\tconst m = MOUSE_BUTTONS[e.button]\n\t\tif (m) {\n\t\t\tapp.mouseStates[m] = \"pressed\"\n\t\t}\n\t}\n\n\tcanvasEvents.mouseup = (e) => {\n\t\tconst m = MOUSE_BUTTONS[e.button]\n\t\tif (m) {\n\t\t\tapp.mouseStates[m] = \"released\"\n\t\t}\n\t}\n\n\tcanvasEvents.keydown = (e) => {\n\n\t\tconst k = KEY_ALIAS[e.key] || e.key.toLowerCase()\n\n\t\tif (PREVENT_DEFAULT_KEYS.includes(k)) {\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tif (k.length === 1) {\n\t\t\tapp.charInputted.push(e.key)\n\t\t}\n\n\t\tif (k === \"space\") {\n\t\t\tapp.charInputted.push(\" \")\n\t\t}\n\n\t\t// TODO: record just pressed keys\n\t\tif (e.repeat) {\n\t\t\tapp.isKeyPressedRepeat = true\n\t\t\tapp.keyStates[k] = \"rpressed\"\n\t\t} else {\n\t\t\tapp.isKeyPressed = true\n\t\t\tapp.keyStates[k] = \"pressed\"\n\t\t}\n\n\t\tapp.numKeyDown++\n\n\t}\n\n\tcanvasEvents.keyup = (e: KeyboardEvent) => {\n\t\tconst k = KEY_ALIAS[e.key] || e.key.toLowerCase()\n\t\tapp.keyStates[k] = \"released\"\n\t\tapp.isKeyReleased = true\n\t\tapp.numKeyDown--\n\t}\n\n\tcanvasEvents.touchstart = (e) => {\n\t\t// disable long tap context menu\n\t\te.preventDefault()\n\t\tconst touches = [...e.changedTouches]\n\t\t// TODO: pass touchlist instead of individual touches\n\t\ttouches.forEach((t) => {\n\t\t\tgame.ev.trigger(\n\t\t\t\t\"onTouchStart\",\n\t\t\t\twindowToContent(vec2(t.clientX, t.clientY)),\n\t\t\t\tt,\n\t\t\t)\n\t\t})\n\t\tif (gopt.touchToMouse !== false) {\n\t\t\tsetMousePos(touches[0].clientX, touches[0].clientY)\n\t\t\tapp.mouseStates[\"left\"] = \"pressed\"\n\t\t}\n\t}\n\n\tcanvasEvents.touchmove = (e) => {\n\t\t// disable scrolling\n\t\te.preventDefault()\n\t\tconst touches = [...e.changedTouches]\n\t\ttouches.forEach((t) => {\n\t\t\tgame.ev.trigger(\n\t\t\t\t\"onTouchMove\",\n\t\t\t\twindowToContent(vec2(t.clientX, t.clientY)),\n\t\t\t\tt,\n\t\t\t)\n\t\t})\n\t\tif (gopt.touchToMouse !== false) {\n\t\t\tsetMousePos(touches[0].clientX, touches[0].clientY)\n\t\t}\n\t}\n\n\tcanvasEvents.touchend = (e) => {\n\t\tconst touches = [...e.changedTouches]\n\t\ttouches.forEach((t) => {\n\t\t\tgame.ev.trigger(\n\t\t\t\t\"onTouchEnd\",\n\t\t\t\twindowToContent(vec2(t.clientX, t.clientY)),\n\t\t\t\tt,\n\t\t\t)\n\t\t})\n\t\tif (gopt.touchToMouse !== false) {\n\t\t\tapp.mouseStates[\"left\"] = \"released\"\n\t\t}\n\t}\n\n\tcanvasEvents.touchcancel = () => {\n\t\tif (gopt.touchToMouse !== false) {\n\t\t\tapp.mouseStates[\"left\"] = \"released\"\n\t\t}\n\t}\n\n\tcanvasEvents.contextmenu = function (e) {\n\t\te.preventDefault()\n\t}\n\n\tdocEvents.visibilitychange = () => {\n\t\tswitch (document.visibilityState) {\n\t\t\tcase \"visible\":\n\t\t\t\t// prevent a surge of dt() when switch back after the tab being hidden for a while\n\t\t\t\tapp.skipTime = true\n\t\t\t\tif (!debug.paused) {\n\t\t\t\t\taudio.ctx.resume()\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\tcase \"hidden\":\n\t\t\t\taudio.ctx.suspend()\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\twinEvents.error = (e) => {\n\t\tif (e.error) {\n\t\t\thandleErr(e.error)\n\t\t} else {\n\t\t\thandleErr(new Error(e.message))\n\t\t}\n\t}\n\n\twinEvents.unhandledrejection = (e) => handleErr(e.reason)\n\n\tfor (const name in canvasEvents) {\n\t\tapp.canvas.addEventListener(name, canvasEvents[name])\n\t}\n\n\tfor (const name in docEvents) {\n\t\tdocument.addEventListener(name, docEvents[name])\n\t}\n\n\tfor (const name in winEvents) {\n\t\twindow.addEventListener(name, winEvents[name])\n\t}\n\n\tfunction mousePos(): Vec2 {\n\t\treturn app.mousePos.clone()\n\t}\n\n\tfunction mouseDeltaPos(): Vec2 {\n\t\treturn app.mouseDeltaPos.clone()\n\t}\n\n\tfunction isMousePressed(m: MouseButton = \"left\"): boolean {\n\t\treturn app.mouseStates[m] === \"pressed\"\n\t}\n\n\tfunction isMouseDown(m: MouseButton = \"left\"): boolean {\n\t\treturn app.mouseStates[m] === \"pressed\" || app.mouseStates[m] === \"down\"\n\t}\n\n\tfunction isMouseReleased(m: MouseButton = \"left\"): boolean {\n\t\treturn app.mouseStates[m] === \"released\"\n\t}\n\n\tfunction isMouseMoved(): boolean {\n\t\treturn app.isMouseMoved\n\t}\n\n\tfunction isKeyPressed(k?: string): boolean {\n\t\tif (k === undefined) {\n\t\t\treturn app.isKeyPressed\n\t\t} else {\n\t\t\treturn app.keyStates[k] === \"pressed\"\n\t\t}\n\t}\n\n\tfunction isKeyPressedRepeat(k?: string): boolean {\n\t\tif (k === undefined) {\n\t\t\treturn app.isKeyPressedRepeat\n\t\t} else {\n\t\t\treturn app.keyStates[k] === \"pressed\" || app.keyStates[k] === \"rpressed\"\n\t\t}\n\t}\n\n\tfunction isKeyDown(k?: string): boolean {\n\t\tif (k === undefined) {\n\t\t\treturn app.numKeyDown > 0\n\t\t} else {\n\t\t\treturn app.keyStates[k] === \"pressed\"\n\t\t\t|| app.keyStates[k] === \"rpressed\"\n\t\t\t|| app.keyStates[k] === \"down\"\n\t\t}\n\t}\n\n\tfunction isKeyReleased(k?: string): boolean {\n\t\tif (k === undefined) {\n\t\t\treturn app.isKeyReleased\n\t\t} else {\n\t\t\treturn app.keyStates[k] === \"released\"\n\t\t}\n\t}\n\n\tfunction isVirtualButtonPressed(btn: VirtualButton): boolean {\n\t\treturn app.virtualButtonStates[btn] === \"pressed\"\n\t}\n\n\tfunction isVirtualButtonDown(btn: VirtualButton): boolean {\n\t\treturn app.virtualButtonStates[btn] === \"pressed\"\n\t\t\t|| app.virtualButtonStates[btn] === \"down\"\n\t}\n\n\tfunction isVirtualButtonReleased(btn: VirtualButton): boolean {\n\t\treturn app.virtualButtonStates[btn] === \"released\"\n\t}\n\n\tfunction charInputted(): string[] {\n\t\treturn [...app.charInputted]\n\t}\n\n\tfunction time(): number {\n\t\treturn app.time\n\t}\n\n\t// get a base64 png image of canvas\n\tfunction screenshot(): string {\n\t\treturn app.canvas.toDataURL()\n\t}\n\n\tfunction setCursor(c?: Cursor): Cursor {\n\t\tif (c) {\n\t\t\tapp.canvas.style.cursor = c\n\t\t}\n\t\treturn app.canvas.style.cursor\n\t}\n\n\tfunction setFullscreen(f: boolean = true) {\n\t\tif (f) {\n\t\t\tenterFullscreen(app.canvas)\n\t\t} else {\n\t\t\texitFullscreen()\n\t\t}\n\t}\n\n\tfunction isFullscreen(): boolean {\n\t\treturn Boolean(getFullscreenElement())\n\t}\n\n\tfunction isTouchScreen() {\n\t\treturn app.isTouchScreen\n\t}\n\n\tconst debug: Debug = {\n\t\tinspect: false,\n\t\ttimeScale: 1,\n\t\tshowLog: true,\n\t\tfps: () => app.fpsCounter.fps,\n\t\tnumFrames: () => app.numFrames,\n\t\tstepFrame: updateFrame,\n\t\tdrawCalls: () => gfx.drawCalls,\n\t\tclearLog: () => game.logs = [],\n\t\tlog: (msg) => {\n\t\t\tconst max = gopt.logMax ?? LOG_MAX\n\t\t\tgame.logs.unshift(`${`[${time().toFixed(2)}].time `}[${msg?.toString ? msg.toString() : msg}].${msg instanceof Error ? \"error\" : \"info\"}`)\n\t\t\tif (game.logs.length > max) {\n\t\t\t\tgame.logs = game.logs.slice(0, max)\n\t\t\t}\n\t\t},\n\t\terror: (msg) => debug.log(new Error(msg.toString ? msg.toString() : msg as string)),\n\t\tcurRecording: null,\n\t\tget paused() {\n\t\t\treturn app.paused\n\t\t},\n\t\tset paused(v) {\n\t\t\tapp.paused = v\n\t\t\tif (v) {\n\t\t\t\taudio.ctx.suspend()\n\t\t\t} else {\n\t\t\t\taudio.ctx.resume()\n\t\t\t}\n\t\t},\n\t}\n\n\tfunction dt() {\n\t\treturn app.dt * debug.timeScale\n\t}\n\n\tfunction camPos(...pos): Vec2 {\n\t\tif (pos.length > 0) {\n\t\t\tgame.cam.pos = vec2(...pos)\n\t\t}\n\t\treturn game.cam.pos ? game.cam.pos.clone() : center()\n\t}\n\n\tfunction camScale(...scale): Vec2 {\n\t\tif (scale.length > 0) {\n\t\t\tgame.cam.scale = vec2(...scale)\n\t\t}\n\t\treturn game.cam.scale.clone()\n\t}\n\n\tfunction camRot(angle: number): number {\n\t\tif (angle !== undefined) {\n\t\t\tgame.cam.angle = angle\n\t\t}\n\t\treturn game.cam.angle\n\t}\n\n\tfunction shake(intensity: number = 12) {\n\t\tgame.cam.shake = intensity\n\t}\n\n\tfunction toScreen(p: Vec2): Vec2 {\n\t\treturn game.cam.transform.multVec2(p)\n\t}\n\n\tfunction toWorld(p: Vec2): Vec2 {\n\t\treturn game.cam.transform.invert().multVec2(p)\n\t}\n\n\tfunction calcTransform(obj: GameObj): Mat4 {\n\t\tlet tr = new Mat4()\n\t\tif (obj.pos) tr = tr.translate(obj.pos)\n\t\tif (obj.scale) tr = tr.scale(obj.scale)\n\t\tif (obj.angle) tr = tr.rotateZ(obj.angle)\n\t\treturn obj.parent ? tr.mult(obj.parent.transform) : tr\n\t}\n\n\tfunction make<T>(comps: CompList<T>): GameObj<T> {\n\n\t\tconst compStates = new Map()\n\t\tconst customState = {}\n\t\tconst ev = new EventHandler()\n\n\t\t// TODO: \"this\" should be typed here\n\t\tconst obj = {\n\n\t\t\tid: uid(),\n\t\t\t// TODO: a nice way to hide / pause when add()-ing\n\t\t\thidden: false,\n\t\t\tpaused: false,\n\t\t\ttransform: new Mat4(),\n\t\t\tchildren: [],\n\t\t\tparent: null,\n\n\t\t\tadd<T2>(a: CompList<T2> | GameObj<T2>): GameObj<T2> {\n\t\t\t\tconst obj = (() => {\n\t\t\t\t\tif (Array.isArray(a)) {\n\t\t\t\t\t\treturn make(a)\n\t\t\t\t\t}\n\t\t\t\t\tif (a.parent) {\n\t\t\t\t\t\tthrow new Error(\"Cannot add a game obj that already has a parent.\")\n\t\t\t\t\t}\n\t\t\t\t\treturn a\n\t\t\t\t})()\n\t\t\t\tobj.parent = this\n\t\t\t\tobj.transform = calcTransform(obj)\n\t\t\t\tthis.children.push(obj)\n\t\t\t\tobj.trigger(\"add\", this)\n\t\t\t\tgame.ev.trigger(\"add\", this)\n\t\t\t\treturn obj\n\t\t\t},\n\n\t\t\treadd(obj: GameObj): GameObj {\n\t\t\t\tconst idx = this.children.indexOf(obj)\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tthis.children.splice(idx, 1)\n\t\t\t\t\tthis.children.push(obj)\n\t\t\t\t}\n\t\t\t\treturn obj\n\t\t\t},\n\n\t\t\tremove(obj: GameObj): void {\n\t\t\t\tconst idx = this.children.indexOf(obj)\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tobj.parent = null\n\t\t\t\t\tobj.trigger(\"destroy\")\n\t\t\t\t\tgame.ev.trigger(\"destroy\", obj)\n\t\t\t\t\tthis.children.splice(idx, 1)\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tremoveAll(tag: Tag) {\n\t\t\t\tthis.get(tag).forEach((obj) => this.remove(obj))\n\t\t\t},\n\n\t\t\tupdate() {\n\t\t\t\tif (this.paused) return\n\t\t\t\tthis.get().forEach((child) => child.update())\n\t\t\t\tthis.trigger(\"update\")\n\t\t\t},\n\n\t\t\tdraw(this: GameObj<PosComp | ScaleComp | RotateComp>) {\n\t\t\t\tif (this.hidden) return\n\t\t\t\tpushTransform()\n\t\t\t\tpushTranslate(this.pos)\n\t\t\t\tpushScale(this.scale)\n\t\t\t\tpushRotateZ(this.angle)\n\t\t\t\tthis.trigger(\"draw\")\n\t\t\t\tthis.get().forEach((child) => child.draw())\n\t\t\t\tpopTransform()\n\t\t\t},\n\n\t\t\tdrawInspect(this: GameObj<PosComp | ScaleComp | RotateComp>) {\n\t\t\t\tif (this.hidden) return\n\t\t\t\tpushTransform()\n\t\t\t\tpushTranslate(this.pos)\n\t\t\t\tpushScale(this.scale)\n\t\t\t\tpushRotateZ(this.angle)\n\t\t\t\tthis.get().forEach((child) => child.drawInspect())\n\t\t\t\tthis.trigger(\"drawInspect\")\n\t\t\t\tpopTransform()\n\t\t\t},\n\n\t\t\t// use a comp, or tag\n\t\t\tuse(comp: Comp | Tag) {\n\n\t\t\t\tif (!comp) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// tag\n\t\t\t\tif (typeof comp === \"string\") {\n\t\t\t\t\treturn this.use({\n\t\t\t\t\t\tid: comp,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\t// clear if overwrite\n\t\t\t\tif (comp.id) {\n\t\t\t\t\tthis.unuse(comp.id)\n\t\t\t\t\tcompStates.set(comp.id, {\n\t\t\t\t\t\tcleanups: [],\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\t// state source location\n\t\t\t\tconst state = comp.id ? compStates.get(comp.id) : customState\n\t\t\t\tconst cleanups = comp.id ? state.cleanups : []\n\n\t\t\t\t// check for component dependencies\n\t\t\t\tconst checkDeps = () => {\n\t\t\t\t\tif (comp.require) {\n\t\t\t\t\t\tfor (const dep of comp.require) {\n\t\t\t\t\t\t\tif (!this.c(dep)) {\n\t\t\t\t\t\t\t\tthrow new Error(`Component \"${comp.id}\" requires component \"${dep}\"`)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (comp.destroy) {\n\t\t\t\t\tcleanups.push(comp.destroy)\n\t\t\t\t}\n\n\t\t\t\tif (comp.require && !this.exists() && state.cleanups) {\n\t\t\t\t\tcleanups.push(this.on(\"add\", checkDeps))\n\t\t\t\t}\n\n\t\t\t\tfor (const k in comp) {\n\n\t\t\t\t\tif (COMP_DESC.has(k)) {\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\n\t\t\t\t\t// event / custom method\n\t\t\t\t\tif (typeof comp[k] === \"function\") {\n\t\t\t\t\t\tconst func = comp[k].bind(this)\n\t\t\t\t\t\tif (COMP_EVENTS.has(k)) {\n\t\t\t\t\t\t\tcleanups.push(this.on(k, func))\n\t\t\t\t\t\t\tstate[k] = func\n\t\t\t\t\t\t\t// don't bind to game object if it's an event\n\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstate[k] = func\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstate[k] = comp[k]\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this[k] === undefined) {\n\t\t\t\t\t\t// assign comp fields to game obj\n\t\t\t\t\t\tObject.defineProperty(this, k, {\n\t\t\t\t\t\t\tget: () => state[k],\n\t\t\t\t\t\t\tset: (val) => state[k] = val,\n\t\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(`Duplicate component property: \"${k}\"`)\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// manually trigger add event if object already exist\n\t\t\t\tif (this.exists()) {\n\t\t\t\t\tcheckDeps()\n\t\t\t\t\tif (comp.add) {\n\t\t\t\t\t\tcomp.add.call(this)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tunuse(id: Tag) {\n\t\t\t\tif (compStates.has(id)) {\n\t\t\t\t\tconst comp = compStates.get(id)\n\t\t\t\t\tcomp.cleanups.forEach((e) => e.cancel())\n\t\t\t\t\tfor (const k in comp) {\n\t\t\t\t\t\tdelete comp[k]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcompStates.delete(id)\n\t\t\t},\n\n\t\t\tc(id: Tag): Comp {\n\t\t\t\treturn compStates.get(id)\n\t\t\t},\n\n\t\t\t// TODO: cache sorted list? update each frame?\n\t\t\tget(t?: Tag | Tag[]): GameObj[] {\n\t\t\t\treturn this.children\n\t\t\t\t\t.filter((child) => t ? child.is(t) : true)\n\t\t\t\t\t.sort((o1, o2) => (o1.z ?? 0) - (o2.z ?? 0))\n\t\t\t},\n\n\t\t\tgetAll(t?: Tag | Tag[]): GameObj[] {\n\t\t\t\treturn this.children\n\t\t\t\t\t.sort((o1, o2) => (o1.z ?? 0) - (o2.z ?? 0))\n\t\t\t\t\t.flatMap((child) => [child, ...child.getAll(t)])\n\t\t\t\t\t.filter((child) => t ? child.is(t) : true)\n\t\t\t},\n\n\t\t\tisAncestorOf(obj: GameObj) {\n\t\t\t\tif (!obj.parent) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\treturn obj.parent === this || this.isAncestorOf(obj.parent)\n\t\t\t},\n\n\t\t\texists(): boolean {\n\t\t\t\treturn game.root.isAncestorOf(this)\n\t\t\t},\n\n\t\t\tis(tag: Tag | Tag[]): boolean {\n\t\t\t\tif (tag === \"*\") {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(tag)) {\n\t\t\t\t\tfor (const t of tag) {\n\t\t\t\t\t\tif (!this.c(t)) {\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true\n\t\t\t\t} else {\n\t\t\t\t\treturn this.c(tag) != null\n\t\t\t\t}\n\t\t\t},\n\n\t\t\ton(name: string, action: (...args) => void): EventController {\n\t\t\t\treturn ev.on(name, action.bind(this))\n\t\t\t},\n\n\t\t\ttrigger(name: string, ...args): void {\n\t\t\t\tev.trigger(name, ...args)\n\t\t\t\tgame.objEvents.trigger(name, this, ...args)\n\t\t\t},\n\n\t\t\tdestroy() {\n\t\t\t\tif (this.parent) {\n\t\t\t\t\tthis.parent.remove(this)\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tinspect() {\n\t\t\t\tconst info = {}\n\t\t\t\tfor (const [tag, comp] of compStates) {\n\t\t\t\t\tinfo[tag] = comp.inspect ? comp.inspect() : null\n\t\t\t\t}\n\t\t\t\treturn info\n\t\t\t},\n\n\t\t\tonAdd(cb: () => void): EventController {\n\t\t\t\treturn this.on(\"add\", cb)\n\t\t\t},\n\n\t\t\tonUpdate(cb: () => void): EventController {\n\t\t\t\treturn this.on(\"update\", cb)\n\t\t\t},\n\n\t\t\tonDraw(cb: () => void): EventController {\n\t\t\t\treturn this.on(\"draw\", cb)\n\t\t\t},\n\n\t\t\tonDestroy(action: () => void): EventController {\n\t\t\t\treturn this.on(\"destroy\", action)\n\t\t\t},\n\n\t\t\tclearEvents() {\n\t\t\t\tev.clear()\n\t\t\t},\n\n\t\t}\n\n\t\tfor (const comp of comps) {\n\t\t\tobj.use(comp)\n\t\t}\n\n\t\treturn obj as unknown as GameObj<T>\n\n\t}\n\n\t// add an event to a tag\n\tfunction on(event: string, tag: Tag, cb: (obj: GameObj, ...args) => void): EventController {\n\t\tif (!game.objEvents[event]) {\n\t\t\tgame.objEvents[event] = new IDList()\n\t\t}\n\t\treturn game.objEvents.on(event, (obj, ...args) => {\n\t\t\tif (obj.is(tag)) {\n\t\t\t\tcb(obj, ...args)\n\t\t\t}\n\t\t})\n\t}\n\n\tfunction promisifyEvent(event: (action: () => void) => EventController): Promise<void> {\n\t\treturn new Promise((res) => {\n\t\t\tconst ev = event(() => {\n\t\t\t\tev.cancel()\n\t\t\t\tres()\n\t\t\t})\n\t\t})\n\t}\n\n\t// add update event to a tag or global update\n\tconst onUpdate = ((tag: Tag | (() => void), action?: (obj: GameObj) => void) => {\n\t\tif (typeof tag === \"function\" && action === undefined) {\n\t\t\tconst obj = add([{ update: tag }])\n\t\t\treturn {\n\t\t\t\tget paused() {\n\t\t\t\t\treturn obj.paused\n\t\t\t\t},\n\t\t\t\tset paused(p) {\n\t\t\t\t\tobj.paused = p\n\t\t\t\t},\n\t\t\t\tcancel: () => obj.destroy(),\n\t\t\t}\n\t\t} else if (typeof tag === \"string\") {\n\t\t\treturn on(\"update\", tag, action)\n\t\t} else if (tag === undefined && action === undefined) {\n\t\t\treturn promisifyEvent(onUpdate)\n\t\t}\n\t}) as KaboomCtx[\"onUpdate\"]\n\n\t// add draw event to a tag or global draw\n\tconst onDraw = ((tag: Tag | (() => void), action?: (obj: GameObj) => void) => {\n\t\tif (typeof tag === \"function\" && action === undefined) {\n\t\t\tconst obj = add([{ draw: tag }])\n\t\t\treturn {\n\t\t\t\tget paused() {\n\t\t\t\t\treturn obj.hidden\n\t\t\t\t},\n\t\t\t\tset paused(p) {\n\t\t\t\t\tobj.hidden = p\n\t\t\t\t},\n\t\t\t\tcancel: () => obj.destroy(),\n\t\t\t}\n\t\t} else if (typeof tag === \"string\") {\n\t\t\treturn on(\"draw\", tag, action)\n\t\t} else if (tag === undefined && action === undefined) {\n\t\t\treturn promisifyEvent(onDraw)\n\t\t}\n\t}) as KaboomCtx[\"onDraw\"]\n\n\tfunction onAdd(tag: Tag | ((obj: GameObj) => void), action?: (obj: GameObj) => void) {\n\t\tif (typeof tag === \"function\" && action === undefined) {\n\t\t\treturn game.ev.on(\"add\", tag)\n\t\t} else if (typeof tag === \"string\") {\n\t\t\treturn on(\"add\", tag, action)\n\t\t}\n\t}\n\n\tfunction onDestroy(tag: Tag | ((obj: GameObj) => void), action?: (obj: GameObj) => void) {\n\t\tif (typeof tag === \"function\" && action === undefined) {\n\t\t\treturn game.ev.on(\"destroy\", tag)\n\t\t} else if (typeof tag === \"string\") {\n\t\t\treturn on(\"destroy\", tag, action)\n\t\t}\n\t}\n\n\t// add an event that runs with objs with t1 collides with objs with t2\n\tfunction onCollide(\n\t\tt1: Tag,\n\t\tt2: Tag,\n\t\tf: (a: GameObj, b: GameObj, col?: Collision) => void,\n\t): EventController {\n\t\treturn on(\"collide\", t1, (a, b, col) => b.is(t2) && f(a, b, col))\n\t}\n\n\tfunction forAllCurrentAndFuture(t: Tag, action: (obj: GameObj) => void) {\n\t\tget(t).forEach(action)\n\t\tonAdd(t, action)\n\t}\n\n\t// add an event that runs when objs with tag t is clicked\n\tfunction onClick(tag: Tag | (() => void), action?: (obj: GameObj) => void): EventController {\n\t\tif (typeof tag === \"function\") {\n\t\t\treturn onMousePress(tag)\n\t\t} else {\n\t\t\tconst events = []\n\t\t\tforAllCurrentAndFuture(tag, (obj) => {\n\t\t\t\tif (!obj.area)\n\t\t\t\t\tthrow new Error(\"onClick() requires the object to have area() component\")\n\t\t\t\tevents.push(obj.onClick(() => action(obj)))\n\t\t\t})\n\t\t\treturn joinEventControllers(events)\n\t\t}\n\t}\n\n\t// add an event that runs once when objs with tag t is hovered\n\tfunction onHover(t: Tag, action: (obj: GameObj) => void): EventController {\n\t\tconst events = []\n\t\tforAllCurrentAndFuture(t, (obj) => {\n\t\t\tif (!obj.area)\n\t\t\t\tthrow new Error(\"onHover() requires the object to have area() component\")\n\t\t\tevents.push(obj.onHover(() => action(obj)))\n\t\t})\n\t\treturn joinEventControllers(events)\n\t}\n\n\t// add an event that runs once when objs with tag t is hovered\n\tfunction onHoverUpdate(t: Tag, action: (obj: GameObj) => void): EventController {\n\t\tconst events = []\n\t\tforAllCurrentAndFuture(t, (obj) => {\n\t\t\tif (!obj.area)\n\t\t\t\tthrow new Error(\"onHoverUpdate() requires the object to have area() component\")\n\t\t\tevents.push(obj.onHoverUpdate(() => action(obj)))\n\t\t})\n\t\treturn joinEventControllers(events)\n\t}\n\n\t// add an event that runs once when objs with tag t is unhovered\n\tfunction onHoverEnd(t: Tag, action: (obj: GameObj) => void): EventController {\n\t\tconst events = []\n\t\tforAllCurrentAndFuture(t, (obj) => {\n\t\t\tif (!obj.area)\n\t\t\t\tthrow new Error(\"onHoverEnd() requires the object to have area() component\")\n\t\t\tevents.push(obj.onHoverEnd(() => action(obj)))\n\t\t})\n\t\treturn joinEventControllers(events)\n\t}\n\n\t// TODO: use PromiseLike?\n\t// add an event that'd be run after t\n\tfunction wait(time: number, action?: () => void): TimerController {\n\t\tlet t = 0\n\t\tconst actions = []\n\t\tif (action) actions.push(action)\n\t\tconst ev = onUpdate(() => {\n\t\t\tt += dt()\n\t\t\tif (t >= time) {\n\t\t\t\tev.cancel()\n\t\t\t\tactions.forEach((action) => action())\n\t\t\t}\n\t\t})\n\t\treturn {\n\t\t\tpaused: ev.paused,\n\t\t\tcancel: ev.cancel,\n\t\t\tonFinish(action) {\n\t\t\t\tactions.push(action)\n\t\t\t},\n\t\t\tthen(action) {\n\t\t\t\tthis.onFinish(action)\n\t\t\t\treturn this\n\t\t\t},\n\t\t}\n\t}\n\n\t// add an event that's run every t seconds\n\tfunction loop(t: number, f: () => void): EventController {\n\n\t\tlet curTimer: null | TimerController = null\n\n\t\tconst newF = () => {\n\t\t\t// TODO: should f be execute right away as loop() is called?\n\t\t\tf()\n\t\t\tcurTimer = wait(t, newF)\n\t\t}\n\n\t\tnewF()\n\n\t\treturn {\n\t\t\tget paused() {\n\t\t\t\treturn curTimer.paused\n\t\t\t},\n\t\t\tset paused(p) {\n\t\t\t\tcurTimer.paused = p\n\t\t\t},\n\t\t\tcancel: () => curTimer.cancel(),\n\t\t}\n\n\t}\n\n\tfunction joinEventControllers(events: EventController[]): EventController {\n\t\treturn {\n\t\t\tget paused() {\n\t\t\t\treturn events[0].paused\n\t\t\t},\n\t\t\tset paused(p) {\n\t\t\t\tevents.forEach((e) => e.paused = p)\n\t\t\t},\n\t\t\tcancel: () => events.forEach((e) => e.cancel()),\n\t\t}\n\t}\n\n\t// input callbacks\n\tfunction onKeyDown(k: Key, f: () => void): EventController {\n\t\treturn game.ev.on(\"input\", () => isKeyDown(k) && f())\n\t}\n\n\tconst onKeyPress = ((\n\t\tk?: Key | ((k: Key) => void),\n\t\tf?: (k: Key) => void,\n\t) => {\n\t\tif (typeof k === \"function\") {\n\t\t\t// TODO: pass the pressed key\n\t\t\t// @ts-ignore\n\t\t\treturn game.ev.on(\"input\", () => isKeyPressed() && k())\n\t\t} else if (typeof k === \"string\" && typeof f === \"function\") {\n\t\t\treturn game.ev.on(\"input\", () => isKeyPressed(k) && f(k))\n\t\t} else if (typeof k === \"string\" && f === undefined) {\n\t\t\treturn promisifyEvent(onKeyPress.bind(undefined, k))\n\t\t} else if (typeof k === undefined && f === undefined) {\n\t\t\treturn promisifyEvent(onKeyPress)\n\t\t}\n\t}) as KaboomCtx[\"onKeyPress\"]\n\n\tconst onKeyPressRepeat = ((\n\t\tk?: Key | ((k: Key) => void),\n\t\tf?: (k: Key) => void,\n\t) => {\n\t\tif (typeof k === \"function\") {\n\t\t\t// TODO: pass the pressed key\n\t\t\t// @ts-ignore\n\t\t\treturn game.ev.on(\"input\", () => isKeyPressedRepeat() && k())\n\t\t} else if (typeof k === \"string\" && typeof f === \"function\") {\n\t\t\treturn game.ev.on(\"input\", () => isKeyPressedRepeat(k) && f(k))\n\t\t} else if (typeof k === \"string\" && f === undefined) {\n\t\t\treturn promisifyEvent(onKeyPressRepeat.bind(undefined, k))\n\t\t} else if (typeof k === undefined && f === undefined) {\n\t\t\treturn promisifyEvent(onKeyPressRepeat)\n\t\t}\n\t}) as KaboomCtx[\"onKeyPressRepeat\"]\n\n\tconst onKeyRelease = ((\n\t\tk?: Key | ((k: Key) => void),\n\t\tf?: (k: Key) => void,\n\t) => {\n\t\tif (typeof k === \"function\") {\n\t\t\t// TODO: pass the pressed key\n\t\t\t// @ts-ignore\n\t\t\treturn game.ev.on(\"input\", () => isKeyReleased() && k())\n\t\t} else if (typeof k === \"string\" && typeof f === \"function\") {\n\t\t\treturn game.ev.on(\"input\", () => isKeyReleased(k) && f(k))\n\t\t} else if (typeof k === \"string\" && f === undefined) {\n\t\t\treturn promisifyEvent(onKeyRelease.bind(undefined, k))\n\t\t} else if (typeof k === undefined && f === undefined) {\n\t\t\treturn promisifyEvent(onKeyRelease)\n\t\t}\n\t}) as KaboomCtx[\"onKeyRelease\"]\n\n\tfunction onMouseDown(\n\t\tm: MouseButton | ((pos?: Vec2) => void),\n\t\taction?: (pos?: Vec2) => void,\n\t): EventController {\n\t\tif (typeof m === \"function\") {\n\t\t\treturn game.ev.on(\"input\", () => isMouseDown() && m(mousePos()))\n\t\t} else {\n\t\t\treturn game.ev.on(\"input\", () => isMouseDown(m) && action(mousePos()))\n\t\t}\n\t}\n\n\tfunction onMousePress(\n\t\tm: MouseButton | ((pos?: Vec2) => void),\n\t\taction?: (pos?: Vec2) => void,\n\t): EventController {\n\t\tif (typeof m === \"function\") {\n\t\t\treturn game.ev.on(\"input\", () => isMousePressed() && m(mousePos()))\n\t\t} else {\n\t\t\treturn game.ev.on(\"input\", () => isMousePressed(m) && action(mousePos()))\n\t\t}\n\t}\n\n\tfunction onMouseRelease(\n\t\tm: MouseButton | ((pos?: Vec2) => void),\n\t\taction?: (pos?: Vec2) => void,\n\t): EventController {\n\t\tif (typeof m === \"function\") {\n\t\t\treturn game.ev.on(\"input\", () => isMouseReleased() && m(mousePos()))\n\t\t} else {\n\t\t\treturn game.ev.on(\"input\", () => isMouseReleased(m) && action(mousePos()))\n\t\t}\n\t}\n\n\tfunction onMouseMove(f: (pos: Vec2, dpos: Vec2) => void): EventController {\n\t\treturn game.ev.on(\"input\", () => isMouseMoved() && f(mousePos(), mouseDeltaPos()))\n\t}\n\n\tfunction onCharInput(f: (ch: string) => void): EventController {\n\t\treturn game.ev.on(\"input\", () => charInputted().forEach((ch) => f(ch)))\n\t}\n\n\tfunction onTouchStart(f: (pos: Vec2, t: Touch) => void): EventController {\n\t\treturn game.ev.on(\"onTouchStart\", f)\n\t}\n\n\tfunction onTouchMove(f: (pos: Vec2, t: Touch) => void): EventController {\n\t\treturn game.ev.on(\"onTouchMove\", f)\n\t}\n\n\tfunction onTouchEnd(f: (pos: Vec2, t: Touch) => void): EventController {\n\t\treturn game.ev.on(\"onTouchEnd\", f)\n\t}\n\n\tfunction onVirtualButtonPress(btn: VirtualButton, action: () => void): EventController {\n\t\treturn game.ev.on(\"input\", () => isVirtualButtonPressed(btn) && action())\n\t}\n\n\tfunction onVirtualButtonDown(btn: VirtualButton, action: () => void): EventController {\n\t\treturn game.ev.on(\"input\", () => isVirtualButtonDown(btn) && action())\n\t}\n\n\tfunction onVirtualButtonRelease(btn: VirtualButton, action: () => void): EventController {\n\t\treturn game.ev.on(\"input\", () => isVirtualButtonReleased(btn) && action())\n\t}\n\n\tfunction enterDebugMode() {\n\n\t\tonKeyPress(\"f1\", () => {\n\t\t\tdebug.inspect = !debug.inspect\n\t\t})\n\n\t\tonKeyPress(\"f2\", () => {\n\t\t\tdebug.clearLog()\n\t\t})\n\n\t\tonKeyPress(\"f8\", () => {\n\t\t\tdebug.paused = !debug.paused\n\t\t})\n\n\t\tonKeyPress(\"f7\", () => {\n\t\t\tdebug.timeScale = toFixed(clamp(debug.timeScale - 0.2, 0, 2), 1)\n\t\t})\n\n\t\tonKeyPress(\"f9\", () => {\n\t\t\tdebug.timeScale = toFixed(clamp(debug.timeScale + 0.2, 0, 2), 1)\n\t\t})\n\n\t\tonKeyPress(\"f10\", () => {\n\t\t\tdebug.stepFrame()\n\t\t})\n\n\t}\n\n\tfunction enterBurpMode() {\n\t\tonKeyPress(\"b\", () => burp())\n\t}\n\n\t// get / set gravity\n\tfunction gravity(g?: number): number {\n\t\tif (g !== undefined) {\n\t\t\tgame.gravity = g\n\t\t}\n\t\treturn game.gravity\n\t}\n\n\t// TODO: manage global velocity here?\n\tfunction pos(...args): PosComp {\n\n\t\treturn {\n\n\t\t\tid: \"pos\",\n\t\t\tpos: vec2(...args),\n\n\t\t\tmoveBy(...args) {\n\t\t\t\tthis.pos = this.pos.add(vec2(...args))\n\t\t\t},\n\n\t\t\t// move with velocity (pixels per second)\n\t\t\tmove(...args) {\n\t\t\t\tthis.moveBy(vec2(...args).scale(dt()))\n\t\t\t},\n\n\t\t\t// move to a destination, with optional speed\n\t\t\tmoveTo(...args) {\n\t\t\t\tif (typeof args[0] === \"number\" && typeof args[1] === \"number\") {\n\t\t\t\t\treturn this.moveTo(vec2(args[0], args[1]), args[2])\n\t\t\t\t}\n\t\t\t\tconst dest = args[0]\n\t\t\t\tconst speed = args[1]\n\t\t\t\tif (speed === undefined) {\n\t\t\t\t\tthis.pos = vec2(dest)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tconst diff = dest.sub(this.pos)\n\t\t\t\tif (diff.len() <= speed * dt()) {\n\t\t\t\t\tthis.pos = vec2(dest)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.move(diff.unit().scale(speed))\n\t\t\t},\n\n\t\t\tworldPos(this: GameObj<PosComp>): Vec2 {\n\t\t\t\treturn this.parent\n\t\t\t\t\t? this.parent.transform.multVec2(this.pos)\n\t\t\t\t\t: this.pos\n\t\t\t},\n\n\t\t\t// get the screen position (transformed by camera)\n\t\t\tscreenPos(this: GameObj<PosComp | FixedComp>): Vec2 {\n\t\t\t\treturn this.fixed\n\t\t\t\t\t? this.pos\n\t\t\t\t\t: toScreen(this.pos)\n\t\t\t},\n\n\t\t\tinspect() {\n\t\t\t\treturn `(${Math.round(this.pos.x)}, ${Math.round(this.pos.y)})`\n\t\t\t},\n\n\t\t\tdrawInspect() {\n\t\t\t\tdrawCircle({\n\t\t\t\t\tcolor: rgb(255, 0, 0),\n\t\t\t\t\tradius: 4 / getViewportScale(),\n\t\t\t\t})\n\t\t\t},\n\n\t\t}\n\n\t}\n\n\t// TODO: allow single number assignment\n\tfunction scale(...args): ScaleComp {\n\t\tif (args.length === 0) {\n\t\t\treturn scale(1)\n\t\t}\n\t\treturn {\n\t\t\tid: \"scale\",\n\t\t\tscale: vec2(...args),\n\t\t\tscaleTo(...args) {\n\t\t\t\tthis.scale = vec2(...args)\n\t\t\t},\n\t\t\tinspect() {\n\t\t\t\tif (typeof this.scale === \"number\") {\n\t\t\t\t\treturn `${toFixed(this.scale, 2)}`\n\t\t\t\t} else {\n\t\t\t\t\treturn `(${toFixed(this.scale.x, 2)}, ${toFixed(this.scale.y, 2)})`\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction rotate(r: number): RotateComp {\n\t\treturn {\n\t\t\tid: \"rotate\",\n\t\t\tangle: r ?? 0,\n\t\t\trotate(angle: number) {\n\t\t\t\tthis.rotateBy(angle * dt())\n\t\t\t},\n\t\t\trotateBy(angle: number) {\n\t\t\t\tthis.angle += angle\n\t\t\t},\n\t\t\tinspect() {\n\t\t\t\treturn `${Math.round(this.angle)}`\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction color(...args): ColorComp {\n\t\treturn {\n\t\t\tid: \"color\",\n\t\t\tcolor: rgb(...args),\n\t\t\tinspect() {\n\t\t\t\treturn this.color.toString()\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction toFixed(n: number, f: number) {\n\t\treturn Number(n.toFixed(f))\n\t}\n\n\t// TODO: fadeIn here?\n\tfunction opacity(a: number): OpacityComp {\n\t\treturn {\n\t\t\tid: \"opacity\",\n\t\t\topacity: a ?? 1,\n\t\t\tinspect() {\n\t\t\t\treturn `${toFixed(this.opacity, 1)}`\n\t\t\t},\n\t\t\tfadeOut(time, easeFunc = easings.linear) {\n\t\t\t\treturn tween(this.opacity, 0, time, (a) => this.opacity = a, easeFunc)\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction anchor(o: Anchor | Vec2): AnchorComp {\n\t\tif (!o) {\n\t\t\tthrow new Error(\"Please define an anchor\")\n\t\t}\n\t\treturn {\n\t\t\tid: \"anchor\",\n\t\t\tanchor: o,\n\t\t\tinspect() {\n\t\t\t\tif (typeof this.anchor === \"string\") {\n\t\t\t\t\treturn this.anchor\n\t\t\t\t} else {\n\t\t\t\t\treturn this.anchor.toString()\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction z(z: number): ZComp {\n\t\treturn {\n\t\t\tid: \"z\",\n\t\t\tz: z,\n\t\t\tinspect() {\n\t\t\t\treturn `${this.z}`\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction follow(obj: GameObj, offset?: Vec2): FollowComp {\n\t\treturn {\n\t\t\tid: \"follow\",\n\t\t\trequire: [ \"pos\" ],\n\t\t\tfollow: {\n\t\t\t\tobj: obj,\n\t\t\t\toffset: offset ?? vec2(0),\n\t\t\t},\n\t\t\tadd(this: GameObj<FollowComp | PosComp>) {\n\t\t\t\tif (obj.exists()) {\n\t\t\t\t\tthis.pos = this.follow.obj.pos.add(this.follow.offset)\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate(this: GameObj<FollowComp | PosComp>) {\n\t\t\t\tif (obj.exists()) {\n\t\t\t\t\tthis.pos = this.follow.obj.pos.add(this.follow.offset)\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction move(dir: number | Vec2, speed: number): MoveComp {\n\t\tconst d = typeof dir === \"number\" ? Vec2.fromAngle(dir) : dir.unit()\n\t\treturn {\n\t\t\tid: \"move\",\n\t\t\trequire: [ \"pos\" ],\n\t\t\tupdate(this: GameObj<PosComp>) {\n\t\t\t\tthis.move(d.scale(speed))\n\t\t\t},\n\t\t}\n\t}\n\n\tconst DEF_OFFSCREEN_DIS = 200\n\n\tfunction offscreen(opt: OffScreenCompOpt = {}): OffScreenComp {\n\t\tconst distance = opt.distance ?? DEF_OFFSCREEN_DIS\n\t\tlet isOut = false\n\t\treturn {\n\t\t\tid: \"offscreen\",\n\t\t\trequire: [ \"pos\" ],\n\t\t\tisOffScreen(this: GameObj<PosComp>): boolean {\n\t\t\t\tconst pos = toScreen(this.pos)\n\t\t\t\tconst screenRect = new Rect(vec2(0), width(), height())\n\t\t\t\treturn !testRectPoint(screenRect, pos)\n\t\t\t\t\t&& screenRect.distToPoint(pos) > distance\n\t\t\t},\n\t\t\tonExitScreen(this: GameObj, action: () => void): EventController {\n\t\t\t\treturn this.on(\"exitView\", action)\n\t\t\t},\n\t\t\tonEnterScreen(this: GameObj, action: () => void): EventController {\n\t\t\t\treturn this.on(\"enterView\", action)\n\t\t\t},\n\t\t\tupdate(this: GameObj) {\n\t\t\t\tif (this.isOffScreen()) {\n\t\t\t\t\tif (!isOut) {\n\t\t\t\t\t\tthis.trigger(\"exitView\")\n\t\t\t\t\t\tisOut = true\n\t\t\t\t\t}\n\t\t\t\t\tif (opt.hide) this.hidden = true\n\t\t\t\t\tif (opt.pause) this.paused = true\n\t\t\t\t\tif (opt.destroy) this.destroy()\n\t\t\t\t} else {\n\t\t\t\t\tif (isOut) {\n\t\t\t\t\t\tthis.trigger(\"enterView\")\n\t\t\t\t\t\tisOut = false\n\t\t\t\t\t}\n\t\t\t\t\tif (opt.hide) this.hidden = false\n\t\t\t\t\tif (opt.pause) this.paused = false\n\t\t\t\t}\n\t\t\t},\n\t\t\tinspect() {\n\t\t\t\treturn `${this.isOffScreen()}`\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction area(opt: AreaCompOpt = {}): AreaComp {\n\n\t\tconst events: Array<EventController> = []\n\n\t\treturn {\n\n\t\t\tid: \"area\",\n\t\t\tcolliding: {},\n\t\t\tcollisionIgnore: opt.collisionIgnore ?? [],\n\n\t\t\tadd(this: GameObj<AreaComp>) {\n\n\t\t\t\tif (this.area.cursor) {\n\t\t\t\t\tevents.push(this.onHover(() => setCursor(this.area.cursor)))\n\t\t\t\t}\n\n\t\t\t\tevents.push(this.onCollideUpdate((obj, col) => {\n\t\t\t\t\tif (!this.colliding[obj.id]) {\n\t\t\t\t\t\tthis.trigger(\"collide\", obj, col)\n\t\t\t\t\t}\n\t\t\t\t\tthis.colliding[obj.id] = col\n\t\t\t\t}))\n\n\t\t\t},\n\n\t\t\tupdate(this: GameObj) {\n\t\t\t\tfor (const id in this.colliding) {\n\t\t\t\t\tconst col = this.colliding[id]\n\t\t\t\t\tif (!this.checkCollision(col.target as GameObj<AreaComp>)) {\n\t\t\t\t\t\tdelete this.colliding[id]\n\t\t\t\t\t\tthis.trigger(\"collideEnd\", col.target, col)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdrawInspect(this: GameObj<AreaComp | AnchorComp | FixedComp>) {\n\n\t\t\t\tconst a = this.localArea()\n\n\t\t\t\tpushTransform()\n\t\t\t\tpushScale(this.area.scale)\n\t\t\t\tpushTranslate(this.area.offset)\n\n\t\t\t\tconst opts = {\n\t\t\t\t\toutline: {\n\t\t\t\t\t\twidth: 4 / getViewportScale(),\n\t\t\t\t\t\tcolor: rgb(0, 0, 255),\n\t\t\t\t\t},\n\t\t\t\t\tanchor: this.anchor,\n\t\t\t\t\tfill: false,\n\t\t\t\t\tfixed: this.fixed,\n\t\t\t\t}\n\n\t\t\t\tif (a instanceof Rect) {\n\t\t\t\t\tdrawRect({\n\t\t\t\t\t\t...opts,\n\t\t\t\t\t\tpos: a.pos,\n\t\t\t\t\t\twidth: a.width,\n\t\t\t\t\t\theight: a.height,\n\t\t\t\t\t})\n\t\t\t\t} else if (a instanceof Polygon) {\n\t\t\t\t\tdrawPolygon({\n\t\t\t\t\t\t...opts,\n\t\t\t\t\t\tpts: a.pts,\n\t\t\t\t\t})\n\t\t\t\t} else if (a instanceof Circle) {\n\t\t\t\t\tdrawCircle({\n\t\t\t\t\t\t...opts,\n\t\t\t\t\t\tpos: a.center,\n\t\t\t\t\t\tradius: a.radius,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tpopTransform()\n\n\t\t\t},\n\n\t\t\tdestroy() {\n\t\t\t\tevents.forEach((e) => e.cancel())\n\t\t\t},\n\n\t\t\tarea: {\n\t\t\t\tshape: opt.shape ?? null,\n\t\t\t\tscale: opt.scale ?? vec2(1),\n\t\t\t\toffset: opt.offset ?? vec2(0),\n\t\t\t\tcursor: opt.cursor ?? null,\n\t\t\t},\n\n\t\t\tisClicked(): boolean {\n\t\t\t\treturn isMousePressed() && this.isHovering()\n\t\t\t},\n\n\t\t\tisHovering(this: GameObj) {\n\t\t\t\tconst mpos = this.fixed ? mousePos() : toWorld(mousePos())\n\t\t\t\treturn this.hasPoint(mpos)\n\t\t\t},\n\n\t\t\tcheckCollision(this: GameObj, other: GameObj<AreaComp>) {\n\t\t\t\tif (this === other || !other.area || !other.exists()) {\n\t\t\t\t\treturn null\n\t\t\t\t}\n\t\t\t\t// if (this.colliding[other.id]) {\n\t\t\t\t\t// return this.colliding[other.id]\n\t\t\t\t// }\n\t\t\t\tconst a1 = this.worldArea()\n\t\t\t\tconst a2 = other.worldArea()\n\t\t\t\treturn sat(a1, a2)\n\t\t\t},\n\n\t\t\tisColliding(other: GameObj<AreaComp>) {\n\t\t\t\tconst res = this.checkCollision(other)\n\t\t\t\treturn res && !res.isZero()\n\t\t\t},\n\n\t\t\tisTouching(other) {\n\t\t\t\treturn Boolean(this.checkCollision(other))\n\t\t\t},\n\n\t\t\tonClick(this: GameObj, f: () => void): EventController {\n\t\t\t\treturn this.onUpdate(() => {\n\t\t\t\t\tif (this.isClicked()) {\n\t\t\t\t\t\tf()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tonHover(this: GameObj, action: () => void): EventController {\n\t\t\t\tlet hovering = false\n\t\t\t\treturn this.onUpdate(() => {\n\t\t\t\t\tif (!hovering) {\n\t\t\t\t\t\tif (this.isHovering()) {\n\t\t\t\t\t\t\thovering = true\n\t\t\t\t\t\t\taction()\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\thovering = this.isHovering()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tonHoverUpdate(this: GameObj, onHover: () => void): EventController {\n\t\t\t\treturn this.onUpdate(() => {\n\t\t\t\t\tif (this.isHovering()) {\n\t\t\t\t\t\tonHover()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tonHoverEnd(this: GameObj, action: () => void): EventController {\n\t\t\t\tlet hovering = false\n\t\t\t\treturn this.onUpdate(() => {\n\t\t\t\t\tif (hovering) {\n\t\t\t\t\t\tif (!this.isHovering()) {\n\t\t\t\t\t\t\thovering = false\n\t\t\t\t\t\t\taction()\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\thovering = this.isHovering()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tonCollide(\n\t\t\t\tthis: GameObj,\n\t\t\t\ttag: Tag | ((obj: GameObj, col?: Collision) => void),\n\t\t\t\tcb?: (obj: GameObj, col?: Collision) => void,\n\t\t\t): EventController {\n\t\t\t\tif (typeof tag === \"function\" && cb === undefined) {\n\t\t\t\t\treturn this.on(\"collide\", tag)\n\t\t\t\t} else if (typeof tag === \"string\") {\n\t\t\t\t\treturn this.onCollide((obj, col) => {\n\t\t\t\t\t\tif (obj.is(tag)) {\n\t\t\t\t\t\t\tcb(obj, col)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonCollideUpdate(\n\t\t\t\tthis: GameObj<AreaComp>,\n\t\t\t\ttag: Tag | ((obj: GameObj, col?: Collision) => void),\n\t\t\t\tcb?: (obj: GameObj, col?: Collision) => void,\n\t\t\t): EventController {\n\t\t\t\tif (typeof tag === \"function\" && cb === undefined) {\n\t\t\t\t\treturn this.on(\"collideUpdate\", tag)\n\t\t\t\t} else if (typeof tag === \"string\") {\n\t\t\t\t\treturn this.on(\"collideUpdate\", (obj, col) => obj.is(tag) && cb(obj, col))\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonCollideEnd(\n\t\t\t\tthis: GameObj<AreaComp>,\n\t\t\t\ttag: Tag | ((obj: GameObj) => void),\n\t\t\t\tcb?: (obj: GameObj) => void,\n\t\t\t): EventController {\n\t\t\t\tif (typeof tag === \"function\" && cb === undefined) {\n\t\t\t\t\treturn this.on(\"collideEnd\", tag)\n\t\t\t\t} else if (typeof tag === \"string\") {\n\t\t\t\t\treturn this.on(\"collideEnd\", (obj) => obj.is(tag) && cb(obj))\n\t\t\t\t}\n\t\t\t},\n\n\t\t\thasPoint(pt: Vec2): boolean {\n\t\t\t\treturn testPolygonPoint(this.worldArea(), pt)\n\t\t\t},\n\n\t\t\t// push an obj out of another if they're overlapped\n\t\t\tpushOut(this: GameObj<AreaComp | PosComp>, obj: GameObj<AreaComp>) {\n\t\t\t\tconst res = this.checkCollision(obj)\n\t\t\t\tif (res) {\n\t\t\t\t\tthis.pos = this.pos.add(res)\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// TODO: recursive\n\t\t\t// push object out of other solid objects\n\t\t\tpushOutAll() {\n\t\t\t\tgame.root.getAll().forEach(this.pushOut)\n\t\t\t},\n\n\t\t\tlocalArea(this: GameObj<AreaComp | { renderArea(): Shape }>): Shape {\n\t\t\t\treturn this.area.shape\n\t\t\t\t\t? this.area.shape\n\t\t\t\t\t: this.renderArea()\n\t\t\t},\n\n\t\t\t// TODO: cache\n\t\t\tworldArea(this: GameObj<AreaComp | AnchorComp>): Polygon {\n\n\t\t\t\tconst localArea = this.localArea()\n\n\t\t\t\tif (!(localArea instanceof Polygon || localArea instanceof Rect)) {\n\t\t\t\t\tthrow new Error(\"Only support polygon and rect shapes for now\")\n\t\t\t\t}\n\n\t\t\t\tlet transform = this.transform\n\t\t\t\t\t.scale(vec2(this.area.scale ?? 1))\n\t\t\t\t\t.translate(this.area.offset)\n\n\t\t\t\tif (localArea instanceof Rect) {\n\t\t\t\t\tconst bbox = localArea.bbox()\n\t\t\t\t\tconst offset = anchorPt(this.anchor || DEF_ANCHOR)\n\t\t\t\t\t\t.add(1, 1)\n\t\t\t\t\t\t.scale(-0.5)\n\t\t\t\t\t\t.scale(bbox.width, bbox.height)\n\t\t\t\t\ttransform = transform.translate(offset)\n\t\t\t\t}\n\n\t\t\t\treturn localArea.transform(transform) as Polygon\n\n\t\t\t},\n\n\t\t\tscreenArea(this: GameObj<AreaComp | FixedComp>): Polygon {\n\t\t\t\tconst area = this.worldArea()\n\t\t\t\tif (this.fixed) {\n\t\t\t\t\treturn area\n\t\t\t\t} else {\n\t\t\t\t\treturn area.transform(game.cam.transform)\n\t\t\t\t}\n\t\t\t},\n\n\t\t}\n\n\t}\n\n\t// make the list of common render properties from the \"pos\", \"scale\", \"color\", \"opacity\", \"rotate\", \"anchor\", \"outline\", and \"shader\" components of a game object\n\tfunction getRenderProps(obj: GameObj<any>) {\n\t\treturn {\n\t\t\tcolor: obj.color,\n\t\t\topacity: obj.opacity,\n\t\t\tanchor: obj.anchor,\n\t\t\toutline: obj.outline,\n\t\t\tfixed: obj.fixed,\n\t\t\tshader: obj.shader,\n\t\t\tuniform: obj.uniform,\n\t\t}\n\t}\n\n\t// TODO: clean\n\tfunction sprite(\n\t\tsrc: string | SpriteData | Asset<SpriteData>,\n\t\topt: SpriteCompOpt = {},\n\t): SpriteComp {\n\n\t\tlet spriteData: SpriteData | null = null\n\t\tlet curAnim: SpriteCurAnim | null = null\n\n\t\tif (!src) {\n\t\t\tthrow new Error(\"Please pass the resource name or data to sprite()\")\n\t\t}\n\n\t\tconst calcTexScale = (tex: Texture, q: Quad, w?: number, h?: number): Vec2 => {\n\t\t\tconst scale = vec2(1, 1)\n\t\t\tif (w && h) {\n\t\t\t\tscale.x = w / (tex.width * q.w)\n\t\t\t\tscale.y = h / (tex.height * q.h)\n\t\t\t} else if (w) {\n\t\t\t\tscale.x = w / (tex.width * q.w)\n\t\t\t\tscale.y = scale.x\n\t\t\t} else if (h) {\n\t\t\t\tscale.y = h / (tex.height * q.h)\n\t\t\t\tscale.x = scale.y\n\t\t\t}\n\t\t\treturn scale\n\t\t}\n\n\t\treturn {\n\n\t\t\tid: \"sprite\",\n\t\t\t// TODO: allow update\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tframe: opt.frame || 0,\n\t\t\tquad: opt.quad || new Quad(0, 0, 1, 1),\n\t\t\tanimSpeed: opt.animSpeed ?? 1,\n\n\t\t\tdraw(this: GameObj<SpriteComp>) {\n\t\t\t\tif (!spriteData) return\n\t\t\t\tdrawSprite({\n\t\t\t\t\t...getRenderProps(this),\n\t\t\t\t\tsprite: spriteData,\n\t\t\t\t\tframe: this.frame,\n\t\t\t\t\tquad: this.quad,\n\t\t\t\t\tflipX: opt.flipX,\n\t\t\t\t\tflipY: opt.flipY,\n\t\t\t\t\ttiled: opt.tiled,\n\t\t\t\t\twidth: opt.width,\n\t\t\t\t\theight: opt.height,\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tupdate(this: GameObj<SpriteComp>) {\n\n\t\t\t\tif (!spriteData) {\n\n\t\t\t\t\tconst spr = resolveSprite(src)\n\n\t\t\t\t\tif (!spr || !spr.data) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tlet q = spr.data.frames[0].clone()\n\n\t\t\t\t\tif (opt.quad) {\n\t\t\t\t\t\tq = q.scale(opt.quad)\n\t\t\t\t\t}\n\n\t\t\t\t\tconst scale = calcTexScale(spr.data.tex, q, opt.width, opt.height)\n\n\t\t\t\t\tthis.width = spr.data.tex.width * q.w * scale.x\n\t\t\t\t\tthis.height = spr.data.tex.height * q.h * scale.y\n\n\t\t\t\t\tif (opt.anim) {\n\t\t\t\t\t\tthis.play(opt.anim)\n\t\t\t\t\t}\n\n\t\t\t\t\tspriteData = spr.data\n\t\t\t\t\tthis.trigger(\"spriteLoaded\", spriteData)\n\n\t\t\t\t}\n\n\t\t\t\tif (!curAnim) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst anim = spriteData.anims[curAnim.name]\n\n\t\t\t\tif (typeof anim === \"number\") {\n\t\t\t\t\tthis.frame = anim\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (anim.speed === 0) {\n\t\t\t\t\tthrow new Error(\"Sprite anim speed cannot be 0\")\n\t\t\t\t}\n\n\t\t\t\tcurAnim.timer += dt() * this.animSpeed\n\n\t\t\t\tif (curAnim.timer >= (1 / curAnim.speed)) {\n\t\t\t\t\tcurAnim.timer = 0\n\t\t\t\t\t// TODO: clean up\n\t\t\t\t\tif (anim.from > anim.to) {\n\t\t\t\t\t\tthis.frame--\n\t\t\t\t\t\tif (this.frame < anim.to) {\n\t\t\t\t\t\t\tif (curAnim.loop) {\n\t\t\t\t\t\t\t\tthis.frame = anim.from\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.frame++\n\t\t\t\t\t\t\t\tcurAnim.onEnd()\n\t\t\t\t\t\t\t\tthis.stop()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.frame++\n\t\t\t\t\t\tif (this.frame > anim.to) {\n\t\t\t\t\t\t\tif (curAnim.loop) {\n\t\t\t\t\t\t\t\tthis.frame = anim.from\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.frame--\n\t\t\t\t\t\t\t\tcurAnim.onEnd()\n\t\t\t\t\t\t\t\tthis.stop()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tplay(this: GameObj<SpriteComp>, name: string, opt: SpriteAnimPlayOpt = {}) {\n\n\t\t\t\tif (!spriteData) {\n\t\t\t\t\tthis.on(\"spriteLoaded\", () => {\n\t\t\t\t\t\tthis.play(name, opt)\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst anim = spriteData.anims[name]\n\n\t\t\t\tif (!anim) {\n\t\t\t\t\tthrow new Error(`Anim not found: ${name}`)\n\t\t\t\t}\n\n\t\t\t\tif (curAnim) {\n\t\t\t\t\tthis.stop()\n\t\t\t\t}\n\n\t\t\t\tcurAnim = typeof anim === \"number\"\n\t\t\t\t\t? {\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\ttimer: 0,\n\t\t\t\t\t\tloop: false,\n\t\t\t\t\t\tpingpong: false,\n\t\t\t\t\t\tspeed: 0,\n\t\t\t\t\t\tonEnd: () => {},\n\t\t\t\t\t}\n\t\t\t\t\t: {\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\ttimer: 0,\n\t\t\t\t\t\tloop: opt.loop ?? anim.loop ?? false,\n\t\t\t\t\t\tpingpong: opt.pingpong ?? anim.pingpong ?? false,\n\t\t\t\t\t\tspeed: opt.speed ?? anim.speed ?? 10,\n\t\t\t\t\t\tonEnd: opt.onEnd ?? (() => {}),\n\t\t\t\t\t}\n\n\t\t\t\tthis.frame = typeof anim === \"number\"\n\t\t\t\t\t? anim\n\t\t\t\t\t: anim.from\n\n\t\t\t\tthis.trigger(\"animStart\", name)\n\n\t\t\t},\n\n\t\t\tstop(this: GameObj<SpriteComp>) {\n\t\t\t\tif (!curAnim) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tconst prevAnim = curAnim.name\n\t\t\t\tcurAnim = null\n\t\t\t\tthis.trigger(\"animEnd\", prevAnim)\n\t\t\t},\n\n\t\t\tnumFrames() {\n\t\t\t\tif (!spriteData) {\n\t\t\t\t\treturn 0\n\t\t\t\t}\n\t\t\t\treturn spriteData.frames.length\n\t\t\t},\n\n\t\t\tcurAnim() {\n\t\t\t\treturn curAnim?.name\n\t\t\t},\n\n\t\t\tflipX(b: boolean) {\n\t\t\t\topt.flipX = b\n\t\t\t},\n\n\t\t\tflipY(b: boolean) {\n\t\t\t\topt.flipY = b\n\t\t\t},\n\n\t\t\tonAnimEnd(\n\t\t\t\tthis: GameObj<SpriteComp>,\n\t\t\t\tname: string,\n\t\t\t\taction: () => void,\n\t\t\t): EventController {\n\t\t\t\treturn this.on(\"animEnd\", (anim) => {\n\t\t\t\t\tif (anim === name) {\n\t\t\t\t\t\taction()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tonAnimStart(\n\t\t\t\tthis: GameObj<SpriteComp>,\n\t\t\t\tname: string,\n\t\t\t\taction: () => void,\n\t\t\t): EventController {\n\t\t\t\treturn this.on(\"animStart\", (anim) => {\n\t\t\t\t\tif (anim === name) {\n\t\t\t\t\t\taction()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\trenderArea() {\n\t\t\t\treturn new Rect(vec2(0), this.width, this.height)\n\t\t\t},\n\n\t\t\tinspect() {\n\t\t\t\tif (typeof src === \"string\") {\n\t\t\t\t\treturn `\"${src}\"`\n\t\t\t\t}\n\t\t\t},\n\n\t\t}\n\n\t}\n\n\tfunction text(t: string, opt: TextCompOpt = {}): TextComp {\n\n\t\tfunction update(obj: GameObj<TextComp | any>) {\n\n\t\t\tconst ftext = formatText({\n\t\t\t\t...getRenderProps(obj),\n\t\t\t\ttext: obj.text + \"\",\n\t\t\t\tsize: obj.textSize,\n\t\t\t\tfont: obj.font,\n\t\t\t\twidth: opt.width && obj.width,\n\t\t\t\talign: obj.align,\n\t\t\t\tletterSpacing: obj.letterSpacing,\n\t\t\t\tlineSpacing: obj.lineSpacing,\n\t\t\t\ttransform: obj.textTransform,\n\t\t\t\tstyles: obj.textStyles,\n\t\t\t})\n\n\t\t\tif (!opt.width) {\n\t\t\t\tobj.width = ftext.width / (obj.scale?.x || 1)\n\t\t\t}\n\n\t\t\tobj.height = ftext.height / (obj.scale?.y || 1)\n\n\t\t\treturn ftext\n\n\t\t}\n\n\t\treturn {\n\n\t\t\tid: \"text\",\n\t\t\ttext: t,\n\t\t\ttextSize: opt.size ?? DEF_TEXT_SIZE,\n\t\t\tfont: opt.font,\n\t\t\twidth: opt.width,\n\t\t\theight: 0,\n\t\t\talign: opt.align,\n\t\t\tlineSpacing: opt.lineSpacing,\n\t\t\tletterSpacing: opt.letterSpacing,\n\t\t\ttextTransform: opt.transform,\n\t\t\ttextStyles: opt.styles,\n\n\t\t\tadd(this: GameObj<TextComp>) {\n\t\t\t\tonLoad(() => update(this))\n\t\t\t},\n\n\t\t\tdraw(this: GameObj<TextComp>) {\n\t\t\t\tdrawFormattedText(update(this))\n\t\t\t},\n\n\t\t\trenderArea() {\n\t\t\t\treturn new Rect(vec2(0), this.width, this.height)\n\t\t\t},\n\n\t\t}\n\n\t}\n\n\tfunction rect(w: number, h: number, opt: RectCompOpt = {}): RectComp {\n\t\treturn {\n\t\t\tid: \"rect\",\n\t\t\twidth: w,\n\t\t\theight: h,\n\t\t\tradius: opt.radius || 0,\n\t\t\tdraw(this: GameObj<RectComp>) {\n\t\t\t\tdrawRect({\n\t\t\t\t\t...getRenderProps(this),\n\t\t\t\t\twidth: this.width,\n\t\t\t\t\theight: this.height,\n\t\t\t\t\tradius: this.radius,\n\t\t\t\t})\n\t\t\t},\n\t\t\trenderArea() {\n\t\t\t\treturn new Rect(vec2(0), this.width, this.height)\n\t\t\t},\n\t\t\tinspect() {\n\t\t\t\treturn `${Math.ceil(this.width)}, ${Math.ceil(this.height)}`\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction uvquad(w: number, h: number): UVQuadComp {\n\t\treturn {\n\t\t\tid: \"rect\",\n\t\t\twidth: w,\n\t\t\theight: h,\n\t\t\tdraw(this: GameObj<UVQuadComp>) {\n\t\t\t\tdrawUVQuad({\n\t\t\t\t\t...getRenderProps(this),\n\t\t\t\t\twidth: this.width,\n\t\t\t\t\theight: this.height,\n\t\t\t\t})\n\t\t\t},\n\t\t\trenderArea() {\n\t\t\t\treturn new Rect(vec2(0), this.width, this.height)\n\t\t\t},\n\t\t\tinspect() {\n\t\t\t\treturn `${Math.ceil(this.width)}, ${Math.ceil(this.height)}`\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction circle(radius: number): CircleComp {\n\t\treturn {\n\t\t\tid: \"circle\",\n\t\t\tradius: radius,\n\t\t\tdraw(this: GameObj<CircleComp>) {\n\t\t\t\tdrawCircle({\n\t\t\t\t\t...getRenderProps(this),\n\t\t\t\t\tradius: this.radius,\n\t\t\t\t})\n\t\t\t},\n\t\t\trenderArea() {\n\t\t\t\treturn new Circle(vec2(0), this.radius)\n\t\t\t},\n\t\t\tinspect() {\n\t\t\t\treturn `${Math.ceil(this.radius)}`\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction outline(width: number = 1, color: Color = rgb(0, 0, 0)): OutlineComp {\n\t\treturn {\n\t\t\tid: \"outline\",\n\t\t\toutline: {\n\t\t\t\twidth,\n\t\t\t\tcolor,\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction timer(time?: number, action?: () => void): TimerComp {\n\t\tconst timers: IDList<Timer> = new IDList()\n\t\tif (time && action) {\n\t\t\ttimers.pushd(new Timer(time, action))\n\t\t}\n\t\treturn {\n\t\t\tid: \"timer\",\n\t\t\twait(time: number, action: () => void): EventController {\n\t\t\t\tconst timer = new Timer(time, action)\n\t\t\t\tconst cancel = timers.pushd(timer)\n\t\t\t\treturn {\n\t\t\t\t\tget paused() {\n\t\t\t\t\t\treturn timer.paused\n\t\t\t\t\t},\n\t\t\t\t\tset paused(p) {\n\t\t\t\t\t\ttimer.paused = p\n\t\t\t\t\t},\n\t\t\t\t\tcancel: cancel,\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate() {\n\t\t\t\ttimers.forEach((timer, id) => {\n\t\t\t\t\tif (timer.tick(dt())) {\n\t\t\t\t\t\ttimers.delete(id)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t}\n\t}\n\n\t// maximum y velocity with body()\n\tconst DEF_JUMP_FORCE = 640\n\tconst MAX_VEL = 65536\n\n\t// TODO: land on wall\n\tfunction body(opt: BodyCompOpt = {}): BodyComp {\n\n\t\tlet velY = 0\n\t\tlet curPlatform: GameObj<PosComp | AreaComp | BodyComp> | null = null\n\t\tlet lastPlatformPos = null\n\t\tlet wantFall = false\n\t\tconst events: Array<EventController> = []\n\n\t\treturn {\n\n\t\t\tid: \"body\",\n\t\t\trequire: [ \"pos\", \"area\" ],\n\t\t\tjumpForce: opt.jumpForce ?? DEF_JUMP_FORCE,\n\t\t\tgravityScale: opt.gravityScale ?? 1,\n\t\t\tisStatic: opt.isStatic ?? false,\n\t\t\tmass: opt.mass ?? 0,\n\n\t\t\tadd(this: GameObj<BodyComp | AreaComp>) {\n\n\t\t\t\t// TODO\n\t\t\t\t// static vs static: don't resolve\n\t\t\t\t// static vs non-static: always resolve non-static\n\t\t\t\t// non-static vs non-static: resolve the first one\n\t\t\t\tevents.push(this.onCollideUpdate((other, col) => {\n\n\t\t\t\t\tif (!other.is(\"body\")) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tif (col.resolved) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.isStatic && other.isStatic) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\t// TODO: if both not static, use mass, or use velocity?\n\n\t\t\t\t\t// resolve the non static one\n\t\t\t\t\tconst col2 = (!this.isStatic && other.isStatic) ? col : col.reverse()\n\t\t\t\t\tcol2.source.trigger(\"beforePhysicsResolve\", col2)\n\t\t\t\t\tcol2.target.trigger(\"beforePhysicsResolve\", col2.reverse())\n\n\t\t\t\t\t// user can mark 'resolved' in beforePhysicsResolve to stop a resolution\n\t\t\t\t\tif (col.resolved) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tcol2.source.pos = col2.source.pos.add(col2.displacement)\n\t\t\t\t\t// TODO: update all children transform?\n\t\t\t\t\tcol2.source.transform = calcTransform(col2.source)\n\t\t\t\t\tcol.resolved = true\n\t\t\t\t\tcol2.source.trigger(\"physicsResolve\", col2)\n\t\t\t\t\tcol2.target.trigger(\"physicsResolve\", col2.reverse())\n\n\t\t\t\t}))\n\n\t\t\t\tevents.push(this.onPhysicsResolve((col) => {\n\t\t\t\t\tif (game.gravity) {\n\t\t\t\t\t\tif (col.isBottom() && this.isFalling()) {\n\t\t\t\t\t\t\tvelY = 0\n\t\t\t\t\t\t\tcurPlatform = col.target as GameObj<PosComp | BodyComp | AreaComp>\n\t\t\t\t\t\t\tlastPlatformPos = col.target.pos\n\t\t\t\t\t\t\tif (wantFall) {\n\t\t\t\t\t\t\t\twantFall = false\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.trigger(\"ground\", curPlatform)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (col.isTop() && this.isJumping()) {\n\t\t\t\t\t\t\tvelY = 0\n\t\t\t\t\t\t\tthis.trigger(\"headbutt\", col.target)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}))\n\n\t\t\t},\n\n\t\t\tupdate(this: GameObj<PosComp | BodyComp | AreaComp>) {\n\n\t\t\t\tif (!game.gravity) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (this.isStatic) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (wantFall) {\n\t\t\t\t\tcurPlatform = null\n\t\t\t\t\tlastPlatformPos = null\n\t\t\t\t\tthis.trigger(\"fallOff\")\n\t\t\t\t\twantFall = false\n\t\t\t\t}\n\n\t\t\t\tif (curPlatform) {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!this.isTouching(curPlatform)\n\t\t\t\t\t\t|| !curPlatform.exists()\n\t\t\t\t\t\t|| !curPlatform.is(\"body\")\n\t\t\t\t\t) {\n\t\t\t\t\t\twantFall = true\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!curPlatform.pos.eq(lastPlatformPos)\n\t\t\t\t\t\t\t&& opt.stickToPlatform !== false\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.moveBy(curPlatform.pos.sub(lastPlatformPos))\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlastPlatformPos = curPlatform.pos\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst prevVelY = velY\n\t\t\t\tvelY += game.gravity * this.gravityScale * dt()\n\t\t\t\tvelY = Math.min(velY, opt.maxVelocity ?? MAX_VEL)\n\t\t\t\tif (prevVelY < 0 && velY >= 0) {\n\t\t\t\t\tthis.trigger(\"fall\")\n\t\t\t\t}\n\t\t\t\tthis.move(0, velY)\n\n\t\t\t},\n\n\t\t\tdestroy() {\n\t\t\t\tevents.forEach((e) => e.cancel())\n\t\t\t},\n\n\t\t\tonPhysicsResolve(this: GameObj, action) {\n\t\t\t\treturn this.on(\"physicsResolve\", action)\n\t\t\t},\n\n\t\t\tonBeforePhysicsResolve(this: GameObj, action) {\n\t\t\t\treturn this.on(\"beforePhysicsResolve\", action)\n\t\t\t},\n\n\t\t\tcurPlatform(): GameObj | null {\n\t\t\t\treturn curPlatform\n\t\t\t},\n\n\t\t\tisGrounded() {\n\t\t\t\treturn curPlatform !== null\n\t\t\t},\n\n\t\t\tisFalling(): boolean {\n\t\t\t\treturn velY > 0\n\t\t\t},\n\n\t\t\tisJumping(): boolean {\n\t\t\t\treturn velY < 0\n\t\t\t},\n\n\t\t\tjump(force: number) {\n\t\t\t\tcurPlatform = null\n\t\t\t\tlastPlatformPos = null\n\t\t\t\tvelY = -force || -this.jumpForce\n\t\t\t},\n\n\t\t\tonGround(this: GameObj, action: () => void): EventController {\n\t\t\t\treturn this.on(\"ground\", action)\n\t\t\t},\n\n\t\t\tonFall(this: GameObj, action: () => void): EventController {\n\t\t\t\treturn this.on(\"fall\", action)\n\t\t\t},\n\n\t\t\tonFallOff(this: GameObj, action: () => void): EventController {\n\t\t\t\treturn this.on(\"fallOff\", action)\n\t\t\t},\n\n\t\t\tonHeadbutt(this: GameObj, action: () => void): EventController {\n\t\t\t\treturn this.on(\"headbutt\", action)\n\t\t\t},\n\n\t\t}\n\n\t}\n\n\tfunction doubleJump(numJumps: number = 2): DoubleJumpComp {\n\t\tlet jumpsLeft = numJumps\n\t\tconst events = []\n\t\treturn {\n\t\t\tid: \"doubleJump\",\n\t\t\trequire: [ \"body\" ],\n\t\t\tnumJumps: numJumps,\n\t\t\tadd(this: GameObj<BodyComp | DoubleJumpComp>) {\n\t\t\t\tevents.push(this.onGround(() => {\n\t\t\t\t\tjumpsLeft = this.numJumps\n\t\t\t\t}))\n\t\t\t},\n\t\t\tdestroy() {\n\t\t\t\tevents.forEach((e) => e.cancel())\n\t\t\t},\n\t\t\tdoubleJump(this: GameObj<BodyComp | DoubleJumpComp>, force?: number) {\n\t\t\t\tif (jumpsLeft <= 0) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (jumpsLeft < this.numJumps) {\n\t\t\t\t\tthis.trigger(\"doubleJump\")\n\t\t\t\t}\n\t\t\t\tjumpsLeft--\n\t\t\t\tthis.jump(force)\n\t\t\t},\n\t\t\tonDoubleJump(this: GameObj, action: () => void): EventController {\n\t\t\t\treturn this.on(\"doubleJump\", action)\n\t\t\t},\n\t\t\tinspect(this: GameObj<BodyComp | DoubleJumpComp>) {\n\t\t\t\treturn `${jumpsLeft}`\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction shader(id: string, uniform: Uniform = {}): ShaderComp {\n\t\treturn {\n\t\t\tid: \"shader\",\n\t\t\tshader: id,\n\t\t\tuniform: uniform,\n\t\t}\n\t}\n\n\t// TODO: all children should be fixed\n\tfunction fixed(): FixedComp {\n\t\treturn {\n\t\t\tid: \"fixed\",\n\t\t\tfixed: true,\n\t\t}\n\t}\n\n\tfunction stay(scenesToStay?: string[]): StayComp {\n\t\treturn {\n\t\t\tid: \"stay\",\n\t\t\tstay: true,\n\t\t\tscenesToStay: scenesToStay,\n\t\t}\n\t}\n\n\tfunction health(hp: number): HealthComp {\n\t\tif (hp == null) {\n\t\t\tthrow new Error(\"health() requires the initial amount of hp\")\n\t\t}\n\t\treturn {\n\t\t\tid: \"health\",\n\t\t\thurt(this: GameObj, n: number = 1) {\n\t\t\t\tthis.setHP(hp - n)\n\t\t\t\tthis.trigger(\"hurt\")\n\t\t\t},\n\t\t\theal(this: GameObj, n: number = 1) {\n\t\t\t\tthis.setHP(hp + n)\n\t\t\t\tthis.trigger(\"heal\")\n\t\t\t},\n\t\t\thp(): number {\n\t\t\t\treturn hp\n\t\t\t},\n\t\t\tsetHP(this: GameObj, n: number) {\n\t\t\t\thp = n\n\t\t\t\tif (hp <= 0) {\n\t\t\t\t\tthis.trigger(\"death\")\n\t\t\t\t}\n\t\t\t},\n\t\t\tonHurt(this: GameObj, action: () => void): EventController {\n\t\t\t\treturn this.on(\"hurt\", action)\n\t\t\t},\n\t\t\tonHeal(this: GameObj, action: () => void): EventController {\n\t\t\t\treturn this.on(\"heal\", action)\n\t\t\t},\n\t\t\tonDeath(this: GameObj, action: () => void): EventController {\n\t\t\t\treturn this.on(\"death\", action)\n\t\t\t},\n\t\t\tinspect() {\n\t\t\t\treturn `${hp}`\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction lifespan(time: number, opt: LifespanCompOpt = {}): LifespanComp {\n\t\tif (time == null) {\n\t\t\tthrow new Error(\"lifespan() requires time\")\n\t\t}\n\t\tconst fade = opt.fade ?? 0\n\t\treturn {\n\t\t\tid: \"lifespan\",\n\t\t\tasync add(this: GameObj<OpacityComp>) {\n\t\t\t\tawait wait(time)\n\t\t\t\t// TODO: this secretively requires opacity comp, make opacity on every game obj?\n\t\t\t\tif (fade > 0 && this.opacity) {\n\t\t\t\t\tawait tween(this.opacity, 0, fade, (a) => this.opacity = a, easings.linear)\n\t\t\t\t}\n\t\t\t\tthis.destroy()\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction state(\n\t\tinitState: string,\n\t\tstateList?: string[],\n\t\ttransitions?: Record<string, string | string[]>,\n\t): StateComp {\n\n\t\tif (!initState) {\n\t\t\tthrow new Error(\"state() requires an initial state\")\n\t\t}\n\n\t\tconst events = {}\n\n\t\tfunction initStateEvents(state: string) {\n\t\t\tif (!events[state]) {\n\t\t\t\tevents[state] = {\n\t\t\t\t\tenter: new Event(),\n\t\t\t\t\tend: new Event(),\n\t\t\t\t\tupdate: new Event(),\n\t\t\t\t\tdraw: new Event(),\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction on(event, state, action) {\n\t\t\tinitStateEvents(state)\n\t\t\treturn events[state][event].add(action)\n\t\t}\n\n\t\tfunction trigger(event, state, ...args) {\n\t\t\tinitStateEvents(state)\n\t\t\tevents[state][event].trigger(...args)\n\t\t}\n\n\t\tlet didFirstEnter = false\n\n\t\treturn {\n\n\t\t\tid: \"state\",\n\t\t\tstate: initState,\n\n\t\t\tenterState(state: string, ...args) {\n\n\t\t\t\tdidFirstEnter = true\n\n\t\t\t\tif (stateList && !stateList.includes(state)) {\n\t\t\t\t\tthrow new Error(`State not found: ${state}`)\n\t\t\t\t}\n\n\t\t\t\tconst oldState = this.state\n\n\t\t\t\tif (transitions) {\n\n\t\t\t\t\t// check if the transition is legal, if transition graph is defined\n\t\t\t\t\tif (!transitions?.[oldState]) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tconst available = typeof transitions[oldState] === \"string\"\n\t\t\t\t\t\t? [transitions[oldState]]\n\t\t\t\t\t\t: transitions[oldState] as string[]\n\n\t\t\t\t\tif (!available.includes(state)) {\n\t\t\t\t\t\tthrow new Error(`Cannot transition state from \"${oldState}\" to \"${state}\". Available transitions: ${available.map((s) => `\"${s}\"`).join(\", \")}`)\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttrigger(\"end\", oldState, ...args)\n\t\t\t\tthis.state = state\n\t\t\t\ttrigger(\"enter\", state, ...args)\n\t\t\t\ttrigger(\"enter\", `${oldState} -> ${state}`, ...args)\n\n\t\t\t},\n\n\t\t\tonStateTransition(from: string, to: string, action: () => void): EventController {\n\t\t\t\treturn on(\"enter\", `${from} -> ${to}`, action)\n\t\t\t},\n\n\t\t\tonStateEnter(state: string, action: () => void): EventController {\n\t\t\t\treturn on(\"enter\", state, action)\n\t\t\t},\n\n\t\t\tonStateUpdate(state: string, action: () => void): EventController {\n\t\t\t\treturn on(\"update\", state, action)\n\t\t\t},\n\n\t\t\tonStateDraw(state: string, action: () => void): EventController {\n\t\t\t\treturn on(\"draw\", state, action)\n\t\t\t},\n\n\t\t\tonStateEnd(state: string, action: () => void): EventController {\n\t\t\t\treturn on(\"end\", state, action)\n\t\t\t},\n\n\t\t\tupdate() {\n\t\t\t// execute the enter event for initState\n\t\t\t\tif (!didFirstEnter) {\n\t\t\t\t\ttrigger(\"enter\", initState)\n\t\t\t\t\tdidFirstEnter = true\n\t\t\t\t}\n\t\t\t\ttrigger(\"update\", this.state)\n\t\t\t},\n\n\t\t\tdraw() {\n\t\t\t\ttrigger(\"draw\", this.state)\n\t\t\t},\n\n\t\t\tinspect() {\n\t\t\t\treturn this.state\n\t\t\t},\n\n\t\t}\n\n\t}\n\n\tfunction fadeIn(time: number = 1): Comp {\n\t\tlet t = 0\n\t\tlet done = false\n\t\treturn {\n\t\t\trequire: [ \"opacity\" ],\n\t\t\tadd(this: GameObj<OpacityComp>) {\n\t\t\t\tthis.opacity = 0\n\t\t\t},\n\t\t\tupdate(this: GameObj<OpacityComp>) {\n\t\t\t\tif (done) return\n\t\t\t\tt += dt()\n\t\t\t\tthis.opacity = map(t, 0, time, 0, 1)\n\t\t\t\tif (t >= time) {\n\t\t\t\t\tthis.opacity = 1\n\t\t\t\t\tdone = true\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction onLoad(cb: () => void): void {\n\t\tif (assets.loaded) {\n\t\t\tcb()\n\t\t} else {\n\t\t\tgame.ev.on(\"load\", cb)\n\t\t}\n\t}\n\n\tfunction scene(id: SceneID, def: SceneDef) {\n\t\tgame.scenes[id] = def\n\t}\n\n\tfunction go(id: SceneID, ...args) {\n\n\t\tif (!game.scenes[id]) {\n\t\t\tthrow new Error(`Scene not found: ${id}`)\n\t\t}\n\n\t\tgame.ev.onOnce(\"frameEnd\", () => {\n\n\t\t\tgame.ev = new EventHandler()\n\t\t\tgame.objEvents = new EventHandler()\n\n\t\t\tgame.root.get().forEach((obj) => {\n\t\t\t\tif (\n\t\t\t\t\t!obj.stay\n\t\t\t\t\t|| (obj.scenesToStay && !obj.scenesToStay.includes(id))\n\t\t\t\t) {\n\t\t\t\t\tgame.root.remove(obj)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tgame.root.clearEvents()\n\n\t\t\t// cam\n\t\t\tgame.cam = {\n\t\t\t\tpos: null,\n\t\t\t\tscale: vec2(1),\n\t\t\t\tangle: 0,\n\t\t\t\tshake: 0,\n\t\t\t\ttransform: new Mat4(),\n\t\t\t}\n\n\t\t\tgame.gravity = 0\n\t\t\tgame.scenes[id](...args)\n\n\t\t\tif (gopt.debug !== false) {\n\t\t\t\tenterDebugMode()\n\t\t\t}\n\n\t\t\tif (gopt.burp) {\n\t\t\t\tenterBurpMode()\n\t\t\t}\n\n\t\t})\n\n\t}\n\n\tfunction getData<T>(key: string, def?: T): T {\n\t\ttry {\n\t\t\treturn JSON.parse(window.localStorage[key])\n\t\t} catch {\n\t\t\tif (def) {\n\t\t\t\tsetData(key, def)\n\t\t\t\treturn def\n\t\t\t} else {\n\t\t\t\treturn null\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setData(key: string, data: any) {\n\t\twindow.localStorage[key] = JSON.stringify(data)\n\t}\n\n\tfunction plug<T>(plugin: KaboomPlugin<T>): MergeObj<T> & KaboomCtx {\n\t\tconst funcs = plugin(ctx)\n\t\tfor (const k in funcs) {\n\t\t\t// @ts-ignore\n\t\t\tctx[k] = funcs[k]\n\t\t\tif (gopt.global !== false) {\n\t\t\t\t// @ts-ignore\n\t\t\t\twindow[k] = funcs[k]\n\t\t\t}\n\t\t}\n\t\treturn ctx as unknown as MergeObj<T> & KaboomCtx\n\t}\n\n\tfunction center(): Vec2 {\n\t\treturn vec2(width() / 2, height() / 2)\n\t}\n\n\tinterface GridComp extends Comp {\n\t\tgridPos: Vec2,\n\t\tsetGridPos(...args),\n\t\tmoveLeft(),\n\t\tmoveRight(),\n\t\tmoveUp(),\n\t\tmoveDown(),\n\t}\n\n\tfunction grid(level: GameObj<LevelComp>, p: Vec2): GridComp {\n\n\t\treturn {\n\n\t\t\tid: \"grid\",\n\t\t\tgridPos: p.clone(),\n\n\t\t\tsetGridPos(this: GameObj<GridComp | PosComp>, ...args) {\n\t\t\t\tconst p = vec2(...args)\n\t\t\t\tthis.gridPos = p.clone()\n\t\t\t\tthis.pos = vec2(\n\t\t\t\t\tthis.gridPos.x * level.gridWidth(),\n\t\t\t\t\tthis.gridPos.y * level.gridHeight(),\n\t\t\t\t)\n\t\t\t},\n\n\t\t\tmoveLeft() {\n\t\t\t\tthis.setGridPos(this.gridPos.add(vec2(-1, 0)))\n\t\t\t},\n\n\t\t\tmoveRight() {\n\t\t\t\tthis.setGridPos(this.gridPos.add(vec2(1, 0)))\n\t\t\t},\n\n\t\t\tmoveUp() {\n\t\t\t\tthis.setGridPos(this.gridPos.add(vec2(0, -1)))\n\t\t\t},\n\n\t\t\tmoveDown() {\n\t\t\t\tthis.setGridPos(this.gridPos.add(vec2(0, 1)))\n\t\t\t},\n\n\t\t}\n\n\t}\n\n\tfunction addLevel(map: string[], opt: LevelOpt): GameObj<PosComp | LevelComp> {\n\n\t\tif (!opt.width || !opt.height) {\n\t\t\tthrow new Error(\"Must provide level grid width & height.\")\n\t\t}\n\n\t\tconst level = add([\n\t\t\tpos(opt.pos ?? vec2(0)),\n\t\t])\n\n\t\tlet maxRowLen = 0\n\n\t\tconst levelComp: LevelComp = {\n\n\t\t\tid: \"level\",\n\n\t\t\tgridWidth() {\n\t\t\t\treturn opt.width\n\t\t\t},\n\n\t\t\tgridHeight() {\n\t\t\t\treturn opt.height\n\t\t\t},\n\n\t\t\tgetPos(...args): Vec2 {\n\t\t\t\tconst p = vec2(...args)\n\t\t\t\treturn vec2(\n\t\t\t\t\tp.x * opt.width,\n\t\t\t\t\tp.y * opt.height,\n\t\t\t\t)\n\t\t\t},\n\n\t\t\tspawn(this: GameObj<LevelComp>, key: string, ...args): GameObj {\n\n\t\t\t\tconst p = vec2(...args)\n\n\t\t\t\tconst comps = (() => {\n\t\t\t\t\tif (opt[key]) {\n\t\t\t\t\t\tif (typeof opt[key] !== \"function\") {\n\t\t\t\t\t\t\tthrow new Error(\"Level symbol def must be a function returning a component list\")\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn opt[key](p)\n\t\t\t\t\t} else if (opt.any) {\n\t\t\t\t\t\treturn opt.any(key, p)\n\t\t\t\t\t}\n\t\t\t\t})()\n\n\t\t\t\tif (!comps) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst posComp = vec2(\n\t\t\t\t\tp.x * opt.width,\n\t\t\t\t\tp.y * opt.height,\n\t\t\t\t)\n\n\t\t\t\tfor (const comp of comps) {\n\t\t\t\t\tif (comp.id === \"pos\") {\n\t\t\t\t\t\tposComp.x += comp.pos.x\n\t\t\t\t\t\tposComp.y += comp.pos.y\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcomps.push(pos(posComp))\n\t\t\t\tcomps.push(grid(this, p))\n\n\t\t\t\treturn level.add(comps)\n\n\t\t\t},\n\n\t\t\tlevelWidth() {\n\t\t\t\treturn maxRowLen * opt.width\n\t\t\t},\n\n\t\t\tlevelHeight() {\n\t\t\t\treturn map.length * opt.height\n\t\t\t},\n\n\t\t}\n\n\t\tlevel.use(levelComp)\n\n\t\tmap.forEach((row, i) => {\n\n\t\t\tconst keys = row.split(\"\")\n\n\t\t\tmaxRowLen = Math.max(keys.length, maxRowLen)\n\n\t\t\tkeys.forEach((key, j) => {\n\t\t\t\tlevel.spawn(key, vec2(j, i))\n\t\t\t})\n\n\t\t})\n\n\t\treturn level\n\n\t}\n\n\tfunction record(frameRate?): Recording {\n\n\t\tconst stream = app.canvas.captureStream(frameRate)\n\t\tconst audioDest = audio.ctx.createMediaStreamDestination()\n\n\t\taudio.masterNode.connect(audioDest)\n\n\t\t// TODO: Enabling audio results in empty video if no audio received\n\t\t// const audioStream = audioDest.stream\n\t\t// const [firstAudioTrack] = audioStream.getAudioTracks()\n\n\t\t// stream.addTrack(firstAudioTrack);\n\n\t\tconst recorder = new MediaRecorder(stream)\n\t\tconst chunks = []\n\n\t\trecorder.ondataavailable = (e) => {\n\t\t\tif (e.data.size > 0) {\n\t\t\t\tchunks.push(e.data)\n\t\t\t}\n\t\t}\n\n\t\trecorder.onerror = () => {\n\t\t\taudio.masterNode.disconnect(audioDest)\n\t\t\tstream.getTracks().forEach(t => t.stop())\n\t\t}\n\n\t\trecorder.start()\n\n\t\treturn {\n\n\t\t\tresume() {\n\t\t\t\trecorder.resume()\n\t\t\t},\n\n\t\t\tpause() {\n\t\t\t\trecorder.pause()\n\t\t\t},\n\n\t\t\tstop(): Promise<Blob> {\n\t\t\t\trecorder.stop()\n\t\t\t\t// cleanup\n\t\t\t\taudio.masterNode.disconnect(audioDest)\n\t\t\t\tstream.getTracks().forEach(t => t.stop())\n\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\trecorder.onstop = () => {\n\t\t\t\t\t\tresolve(new Blob(chunks, {\n\t\t\t\t\t\t\ttype: \"video/mp4\",\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tdownload(filename = \"kaboom.mp4\") {\n\t\t\t\tthis.stop().then((blob) => downloadBlob(filename, blob))\n\t\t\t},\n\n\t\t}\n\n\t}\n\n\tfunction isFocused(): boolean {\n\t\treturn document.activeElement === app.canvas\n\t}\n\n\tfunction destroy(obj: GameObj) {\n\t\tobj.destroy()\n\t}\n\n\t// aliases for root game obj operations\n\tconst add = game.root.add.bind(game.root)\n\tconst readd = game.root.readd.bind(game.root)\n\tconst destroyAll = game.root.removeAll.bind(game.root)\n\tconst get = game.root.get.bind(game.root)\n\tconst getAll = game.root.getAll.bind(game.root)\n\n\t// TODO: expose this\n\tfunction boom(speed: number = 2, size: number = 1): Comp {\n\t\tlet time = 0\n\t\treturn {\n\t\t\tid: \"boom\",\n\t\t\trequire: [ \"scale\" ],\n\t\t\tupdate(this: GameObj<ScaleComp>) {\n\t\t\t\tconst s = Math.sin(time * speed) * size\n\t\t\t\tif (s < 0) {\n\t\t\t\t\tthis.destroy()\n\t\t\t\t}\n\t\t\t\tthis.scale = vec2(s)\n\t\t\t\ttime += dt()\n\t\t\t},\n\t\t}\n\t}\n\n\tconst kaSprite = loadSprite(null, kaSpriteSrc)\n\tconst boomSprite = loadSprite(null, boomSpriteSrc)\n\n\tfunction addKaboom(p: Vec2, opt: BoomOpt = {}): GameObj {\n\n\t\tconst kaboom = add([\n\t\t\tpos(p),\n\t\t\tstay(),\n\t\t])\n\n\t\tconst speed = (opt.speed || 1) * 5\n\t\tconst s = opt.scale || 1\n\n\t\tkaboom.add([\n\t\t\tsprite(boomSprite),\n\t\t\tscale(0),\n\t\t\tanchor(\"center\"),\n\t\t\tboom(speed, s),\n\t\t\t...opt.comps ?? [],\n\t\t])\n\n\t\tconst ka = kaboom.add([\n\t\t\tsprite(kaSprite),\n\t\t\tscale(0),\n\t\t\tanchor(\"center\"),\n\t\t\ttimer(0.4 / speed, () => ka.use(boom(speed, s))),\n\t\t\t...opt.comps ?? [],\n\t\t])\n\n\t\tka.onDestroy(() => kaboom.destroy())\n\n\t\treturn kaboom\n\n\t}\n\n\tfunction updateFrame() {\n\n\t\t// update every obj\n\t\tgame.root.update()\n\n\t}\n\n\tconst DEF_HASH_GRID_SIZE = 64\n\n\tclass Collision {\n\t\tsource: GameObj\n\t\ttarget: GameObj\n\t\tdisplacement: Vec2\n\t\tresolved: boolean = false\n\t\tconstructor(source: GameObj, target: GameObj, dis: Vec2, resolved = false) {\n\t\t\tthis.source = source\n\t\t\tthis.target = target\n\t\t\tthis.displacement = dis\n\t\t\tthis.resolved = resolved\n\t\t}\n\t\treverse() {\n\t\t\treturn new Collision(\n\t\t\t\tthis.target,\n\t\t\t\tthis.source,\n\t\t\t\tthis.displacement.scale(-1),\n\t\t\t\tthis.resolved,\n\t\t\t)\n\t\t}\n\t\tisLeft() {\n\t\t\treturn this.displacement.x > 0\n\t\t}\n\t\tisRight() {\n\t\t\treturn this.displacement.x < 0\n\t\t}\n\t\tisTop() {\n\t\t\treturn this.displacement.y > 0\n\t\t}\n\t\tisBottom() {\n\t\t\treturn this.displacement.y < 0\n\t\t}\n\t\tpreventResolve() {\n\t\t\tthis.resolved = true\n\t\t}\n\t}\n\n\tfunction checkFrame() {\n\n\t\t// TODO: persistent grid?\n\t\t// start a spatial hash grid for more efficient collision detection\n\t\tconst grid: Record<number, Record<number, GameObj<AreaComp>[]>> = {}\n\t\tconst cellSize = gopt.hashGridSize || DEF_HASH_GRID_SIZE\n\n\t\t// current transform\n\t\tlet tr = new Mat4()\n\n\t\t// a local transform stack\n\t\tconst stack = []\n\n\t\tfunction checkObj(obj: GameObj) {\n\n\t\t\tstack.push(tr)\n\n\t\t\t// Update object transform here. This will be the transform later used in rendering.\n\t\t\tif (obj.pos) tr = tr.translate(obj.pos)\n\t\t\tif (obj.scale) tr = tr.scale(obj.scale)\n\t\t\tif (obj.angle) tr = tr.rotateZ(obj.angle)\n\t\t\tobj.transform = tr.clone()\n\n\t\t\tif (obj.c(\"area\") && !obj.paused) {\n\n\t\t\t\t// TODO: only update worldArea if transform changed\n\t\t\t\tconst aobj = obj as GameObj<AreaComp>\n\t\t\t\tconst area = aobj.worldArea()\n\t\t\t\tconst bbox = area.bbox()\n\n\t\t\t\t// Get spatial hash grid coverage\n\t\t\t\tconst xmin = Math.floor(bbox.pos.x / cellSize)\n\t\t\t\tconst ymin = Math.floor(bbox.pos.y / cellSize)\n\t\t\t\tconst xmax = Math.ceil((bbox.pos.x + bbox.width) / cellSize)\n\t\t\t\tconst ymax = Math.ceil((bbox.pos.y + bbox.height) / cellSize)\n\n\t\t\t\t// Cache objs that are already checked\n\t\t\t\tconst checked = new Set()\n\n\t\t\t\t// insert & check against all covered grids\n\t\t\t\tfor (let x = xmin; x <= xmax; x++) {\n\t\t\t\t\tfor (let y = ymin; y <= ymax; y++) {\n\t\t\t\t\t\tif(!grid[x]) {\n\t\t\t\t\t\t\tgrid[x] = {}\n\t\t\t\t\t\t\tgrid[x][y] = [aobj]\n\t\t\t\t\t\t} else if(!grid[x][y]) {\n\t\t\t\t\t\t\tgrid[x][y] = [aobj]\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst cell = grid[x][y]\n\t\t\t\t\t\t\tfor (const other of cell) {\n\t\t\t\t\t\t\t\tif (!other.exists()) {\n\t\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (checked.has(other.id)) {\n\t\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// TODO: is this too slow\n\t\t\t\t\t\t\t\tfor (const tag of aobj.collisionIgnore) {\n\t\t\t\t\t\t\t\t\tif (other.is(tag)) {\n\t\t\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfor (const tag of other.collisionIgnore) {\n\t\t\t\t\t\t\t\t\tif (aobj.is(tag)) {\n\t\t\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst res = aobj.checkCollision(other)\n\t\t\t\t\t\t\t\tif (res && !res.isZero()) {\n\t\t\t\t\t\t\t\t\t// TODO: rehash if the object position is changed after resolution?\n\t\t\t\t\t\t\t\t\tconst col1 = new Collision(aobj, other, res)\n\t\t\t\t\t\t\t\t\taobj.trigger(\"collideUpdate\", other, col1)\n\t\t\t\t\t\t\t\t\tconst col2 = col1.reverse()\n\t\t\t\t\t\t\t\t\t// resolution only has to happen once\n\t\t\t\t\t\t\t\t\tcol2.resolved = col1.resolved\n\t\t\t\t\t\t\t\t\tother.trigger(\"collideUpdate\", aobj, col2)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked.add(other.id)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcell.push(aobj)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tobj.get().forEach(checkObj)\n\t\t\ttr = stack.pop()\n\n\t\t}\n\n\t\tcheckObj(game.root)\n\n\t}\n\n\tfunction drawFrame() {\n\n\t\t// calculate camera matrix\n\t\tconst cam = game.cam\n\t\tconst shake = Vec2.fromAngle(rand(0, 360)).scale(cam.shake)\n\n\t\tcam.shake = lerp(cam.shake, 0, 5 * dt())\n\t\tcam.transform = new Mat4()\n\t\t\t.translate(center())\n\t\t\t.scale(cam.scale)\n\t\t\t.rotateZ(cam.angle)\n\t\t\t.translate((cam.pos ?? center()).scale(-1).add(shake))\n\n\t\tgame.root.draw()\n\t\tflush()\n\n\t}\n\n\tfunction drawLoadScreen() {\n\n\t\tconst progress = loadProgress()\n\n\t\tdrawUnscaled(() => {\n\n\t\t\tconst w = width() / 2\n\t\t\tconst h = 24\n\t\t\tconst pos = vec2(width() / 2, height() / 2).sub(vec2(w / 2, h / 2))\n\n\t\t\tdrawRect({\n\t\t\t\tpos: vec2(0),\n\t\t\t\twidth: width(),\n\t\t\t\theight: height(),\n\t\t\t\tcolor: rgb(0, 0, 0),\n\t\t\t})\n\n\t\t\tdrawRect({\n\t\t\t\tpos: pos,\n\t\t\t\twidth: w,\n\t\t\t\theight: h,\n\t\t\t\tfill: false,\n\t\t\t\toutline: {\n\t\t\t\t\twidth: 4,\n\t\t\t\t},\n\t\t\t})\n\n\t\t\tdrawRect({\n\t\t\t\tpos: pos,\n\t\t\t\twidth: w * progress,\n\t\t\t\theight: h,\n\t\t\t})\n\n\t\t})\n\n\t\tgame.ev.trigger(\"loading\", progress)\n\n\t}\n\n\tfunction drawInspectText(pos, txt) {\n\n\t\tdrawUnscaled(() => {\n\n\t\t\tconst pad = vec2(8)\n\n\t\t\tpushTransform()\n\t\t\tpushTranslate(pos)\n\n\t\t\tconst ftxt = formatText({\n\t\t\t\ttext: txt,\n\t\t\t\tfont: DBG_FONT,\n\t\t\t\tsize: 16,\n\t\t\t\tpos: pad,\n\t\t\t\tcolor: rgb(255, 255, 255),\n\t\t\t\tfixed: true,\n\t\t\t})\n\n\t\t\tconst bw = ftxt.width + pad.x * 2\n\t\t\tconst bh = ftxt.height + pad.x * 2\n\n\t\t\tif (pos.x + bw >= width()) {\n\t\t\t\tpushTranslate(vec2(-bw, 0))\n\t\t\t}\n\n\t\t\tif (pos.y + bh >= height()) {\n\t\t\t\tpushTranslate(vec2(0, -bh))\n\t\t\t}\n\n\t\t\tdrawRect({\n\t\t\t\twidth: bw,\n\t\t\t\theight: bh,\n\t\t\t\tcolor: rgb(0, 0, 0),\n\t\t\t\tradius: 4,\n\t\t\t\topacity: 0.8,\n\t\t\t\tfixed: true,\n\t\t\t})\n\n\t\t\tdrawFormattedText(ftxt)\n\t\t\tpopTransform()\n\n\t\t})\n\n\t}\n\n\tfunction drawDebug() {\n\n\t\tif (debug.inspect) {\n\n\t\t\tlet inspecting = null\n\n\t\t\tfor (const obj of getAll()) {\n\t\t\t\tif (obj.c(\"area\") && obj.isHovering()) {\n\t\t\t\t\tinspecting = obj\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgame.root.drawInspect()\n\n\t\t\tif (inspecting) {\n\n\t\t\t\tconst lines = []\n\t\t\t\tconst data = inspecting.inspect()\n\n\t\t\t\tfor (const tag in data) {\n\t\t\t\t\tif (data[tag]) {\n\t\t\t\t\t\tlines.push(`${tag}: ${data[tag]}`)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlines.push(`${tag}`)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdrawInspectText(contentToView(mousePos()), lines.join(\"\\n\"))\n\n\t\t\t}\n\n\t\t\tdrawInspectText(vec2(8), `FPS: ${debug.fps()}`)\n\n\t\t}\n\n\t\tif (debug.paused) {\n\n\t\t\tdrawUnscaled(() => {\n\n\t\t\t\t// top right corner\n\t\t\t\tpushTransform()\n\t\t\t\tpushTranslate(width(), 0)\n\t\t\t\tpushTranslate(-8, 8)\n\n\t\t\t\tconst size = 32\n\n\t\t\t\t// bg\n\t\t\t\tdrawRect({\n\t\t\t\t\twidth: size,\n\t\t\t\t\theight: size,\n\t\t\t\t\tanchor: \"topright\",\n\t\t\t\t\tcolor: rgb(0, 0, 0),\n\t\t\t\t\topacity: 0.8,\n\t\t\t\t\tradius: 4,\n\t\t\t\t\tfixed: true,\n\t\t\t\t})\n\n\t\t\t\t// pause icon\n\t\t\t\tfor (let i = 1; i <= 2; i++) {\n\t\t\t\t\tdrawRect({\n\t\t\t\t\t\twidth: 4,\n\t\t\t\t\t\theight: size * 0.6,\n\t\t\t\t\t\tanchor: \"center\",\n\t\t\t\t\t\tpos: vec2(-size / 3 * i, size * 0.5),\n\t\t\t\t\t\tcolor: rgb(255, 255, 255),\n\t\t\t\t\t\tradius: 2,\n\t\t\t\t\t\tfixed: true,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tpopTransform()\n\n\t\t\t})\n\n\t\t}\n\n\t\tif (debug.timeScale !== 1) {\n\n\t\t\tdrawUnscaled(() => {\n\n\t\t\t\t// bottom right corner\n\t\t\t\tpushTransform()\n\t\t\t\tpushTranslate(width(), height())\n\t\t\t\tpushTranslate(-8, -8)\n\n\t\t\t\tconst pad = 8\n\n\t\t\t\t// format text first to get text size\n\t\t\t\tconst ftxt = formatText({\n\t\t\t\t\ttext: debug.timeScale.toFixed(1),\n\t\t\t\t\tfont: DBG_FONT,\n\t\t\t\t\tsize: 16,\n\t\t\t\t\tcolor: rgb(255, 255, 255),\n\t\t\t\t\tpos: vec2(-pad),\n\t\t\t\t\tanchor: \"botright\",\n\t\t\t\t\tfixed: true,\n\t\t\t\t})\n\n\t\t\t\t// bg\n\t\t\t\tdrawRect({\n\t\t\t\t\twidth: ftxt.width + pad * 2 + pad * 4,\n\t\t\t\t\theight: ftxt.height + pad * 2,\n\t\t\t\t\tanchor: \"botright\",\n\t\t\t\t\tcolor: rgb(0, 0, 0),\n\t\t\t\t\topacity: 0.8,\n\t\t\t\t\tradius: 4,\n\t\t\t\t\tfixed: true,\n\t\t\t\t})\n\n\t\t\t\t// fast forward / slow down icon\n\t\t\t\tfor (let i = 0; i < 2; i++) {\n\t\t\t\t\tconst flipped = debug.timeScale < 1\n\t\t\t\t\tdrawTriangle({\n\t\t\t\t\t\tp1: vec2(-ftxt.width - pad * (flipped ? 2 : 3.5), -pad),\n\t\t\t\t\t\tp2: vec2(-ftxt.width - pad * (flipped ? 2 : 3.5), -pad - ftxt.height),\n\t\t\t\t\t\tp3: vec2(-ftxt.width - pad * (flipped ? 3.5 : 2), -pad - ftxt.height / 2),\n\t\t\t\t\t\tpos: vec2(-i * pad * 1 + (flipped ? -pad * 0.5 : 0), 0),\n\t\t\t\t\t\tcolor: rgb(255, 255, 255),\n\t\t\t\t\t\tfixed: true,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\t// text\n\t\t\t\tdrawFormattedText(ftxt)\n\n\t\t\t\tpopTransform()\n\n\t\t\t})\n\n\t\t}\n\n\t\tif (debug.curRecording) {\n\n\t\t\tdrawUnscaled(() => {\n\n\t\t\t\tpushTransform()\n\t\t\t\tpushTranslate(0, height())\n\t\t\t\tpushTranslate(24, -24)\n\n\t\t\t\tdrawCircle({\n\t\t\t\t\tradius: 12,\n\t\t\t\t\tcolor: rgb(255, 0, 0),\n\t\t\t\t\topacity: wave(0, 1, time() * 4),\n\t\t\t\t\tfixed: true,\n\t\t\t\t})\n\n\t\t\t\tpopTransform()\n\n\t\t\t})\n\n\t\t}\n\n\t\tif (debug.showLog && game.logs.length > 0) {\n\n\t\t\tdrawUnscaled(() => {\n\n\t\t\t\tpushTransform()\n\t\t\t\tpushTranslate(0, height())\n\t\t\t\tpushTranslate(8, -8)\n\n\t\t\t\tconst pad = 8\n\n\t\t\t\tconst ftext = formatText({\n\t\t\t\t\ttext: game.logs.join(\"\\n\"),\n\t\t\t\t\tfont: DBG_FONT,\n\t\t\t\t\tpos: vec2(pad, -pad),\n\t\t\t\t\tanchor: \"botleft\",\n\t\t\t\t\tsize: 16,\n\t\t\t\t\twidth: width() * 0.6,\n\t\t\t\t\tlineSpacing: pad / 2,\n\t\t\t\t\tfixed: true,\n\t\t\t\t\tstyles: {\n\t\t\t\t\t\t\"time\": { color: rgb(127, 127, 127) },\n\t\t\t\t\t\t\"info\": { color: rgb(255, 255, 255) },\n\t\t\t\t\t\t\"error\": { color: rgb(255, 0, 127) },\n\t\t\t\t\t},\n\t\t\t\t})\n\n\t\t\t\tdrawRect({\n\t\t\t\t\twidth: ftext.width + pad * 2,\n\t\t\t\t\theight: ftext.height + pad * 2,\n\t\t\t\t\tanchor: \"botleft\",\n\t\t\t\t\tcolor: rgb(0, 0, 0),\n\t\t\t\t\tradius: 4,\n\t\t\t\t\topacity: 0.8,\n\t\t\t\t\tfixed: true,\n\t\t\t\t})\n\n\t\t\t\tdrawFormattedText(ftext)\n\t\t\t\tpopTransform()\n\n\t\t\t})\n\n\t\t}\n\n\t}\n\n\tfunction drawVirtualControls() {\n\n\t\t// TODO: mousePos incorrect in \"stretch\" mode\n\t\tconst mpos = mousePos()\n\n\t\tconst drawCircleButton = (pos: Vec2, btn: VirtualButton, text?: string) => {\n\n\t\t\tconst size = 80\n\n\t\t\tdrawCircle({\n\t\t\t\tradius: size / 2,\n\t\t\t\tpos: pos,\n\t\t\t\toutline: { width: 4, color: rgb(0, 0, 0) },\n\t\t\t\topacity: 0.5,\n\t\t\t})\n\n\t\t\tif (text) {\n\t\t\t\tdrawText({\n\t\t\t\t\ttext: text,\n\t\t\t\t\tpos: pos,\n\t\t\t\t\tcolor: rgb(0, 0, 0),\n\t\t\t\t\tsize: 40,\n\t\t\t\t\tanchor: \"center\",\n\t\t\t\t\topacity: 0.5,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// TODO: touch\n\t\t\tif (isMousePressed(\"left\")) {\n\t\t\t\tif (testCirclePoint(new Circle(pos, size / 2), mpos)) {\n\t\t\t\t\tgame.ev.onOnce(\"frameEnd\", () => {\n\t\t\t\t\t\tapp.virtualButtonStates[btn] = \"pressed\"\n\t\t\t\t\t\t// TODO: caller specify another value as connected key?\n\t\t\t\t\t\tapp.keyStates[btn] = \"pressed\"\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isMouseReleased(\"left\")) {\n\t\t\t\tgame.ev.onOnce(\"frameEnd\", () => {\n\t\t\t\t\tapp.virtualButtonStates[btn] = \"released\"\n\t\t\t\t\tapp.keyStates[btn] = \"released\"\n\t\t\t\t})\n\t\t\t}\n\n\t\t}\n\n\t\tconst drawSquareButton = (pos: Vec2, btn: VirtualButton, text?: string) => {\n\n\t\t\t// TODO: mousePos incorrect in \"stretch\" mode\n\t\t\tconst size = 64\n\n\t\t\tdrawRect({\n\t\t\t\twidth: size,\n\t\t\t\theight: size,\n\t\t\t\tpos: pos,\n\t\t\t\toutline: { width: 4, color: rgb(0, 0, 0) },\n\t\t\t\tradius: 4,\n\t\t\t\tanchor: \"center\",\n\t\t\t\topacity: 0.5,\n\t\t\t})\n\n\t\t\tif (text) {\n\t\t\t\tdrawText({\n\t\t\t\t\ttext: text,\n\t\t\t\t\tpos: pos,\n\t\t\t\t\tcolor: rgb(0, 0, 0),\n\t\t\t\t\tsize: 40,\n\t\t\t\t\tanchor: \"center\",\n\t\t\t\t\topacity: 0.5,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// TODO: touch\n\t\t\tif (isMousePressed(\"left\")) {\n\t\t\t\tif (testRectPoint(new Rect(pos.add(-size / 2, -size / 2), size, size), mpos)) {\n\t\t\t\t\tgame.ev.onOnce(\"frameEnd\", () => {\n\t\t\t\t\t\tapp.virtualButtonStates[btn] = \"pressed\"\n\t\t\t\t\t\tapp.keyStates[btn] = \"pressed\"\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isMouseReleased(\"left\")) {\n\t\t\t\tgame.ev.onOnce(\"frameEnd\", () => {\n\t\t\t\t\tapp.virtualButtonStates[btn] = \"released\"\n\t\t\t\t\tapp.keyStates[btn] = \"released\"\n\t\t\t\t})\n\t\t\t}\n\n\t\t}\n\n\t\tdrawUnscaled(() => {\n\t\t\tdrawCircleButton(vec2(width() - 80, height() - 160), \"a\")\n\t\t\tdrawCircleButton(vec2(width() - 160, height() - 80), \"b\")\n\t\t\tdrawSquareButton(vec2(60, height() - 124), \"left\")\n\t\t\tdrawSquareButton(vec2(188, height() - 124), \"right\")\n\t\t\tdrawSquareButton(vec2(124, height() - 188), \"up\")\n\t\t\tdrawSquareButton(vec2(124, height() - 60), \"down\")\n\t\t})\n\n\t}\n\n\tif (gopt.debug !== false) {\n\t\tenterDebugMode()\n\t}\n\n\tif (gopt.burp) {\n\t\tenterBurpMode()\n\t}\n\n\tfunction onLoadUpdate(action: (err: Error) => void) {\n\t\tgame.ev.on(\"loading\", action)\n\t}\n\n\tfunction onResize(action: (\n\t\tprevWidth: number,\n\t\tprevHeight: number,\n\t\tcurWidth: number,\n\t\tcurHeight: number,\n\t) => void) {\n\t\tgame.ev.on(\"resize\", action)\n\t}\n\n\tfunction onError(action: (err: Error) => void) {\n\t\tgame.ev.on(\"error\", action)\n\t}\n\n\tfunction handleErr(err: Error) {\n\n\t\t// TODO: this should only run once\n\t\trun(() => {\n\n\t\t\tdrawUnscaled(() => {\n\n\t\t\t\tconst pad = 32\n\t\t\t\tconst gap = 16\n\t\t\t\tconst gw = width()\n\t\t\t\tconst gh = height()\n\n\t\t\t\tconst textStyle = {\n\t\t\t\t\tsize: 36,\n\t\t\t\t\twidth: gw - pad * 2,\n\t\t\t\t\tletterSpacing: 4,\n\t\t\t\t\tlineSpacing: 4,\n\t\t\t\t\tfont: DBG_FONT,\n\t\t\t\t\tfixed: true,\n\t\t\t\t}\n\n\t\t\t\tdrawRect({\n\t\t\t\t\twidth: gw,\n\t\t\t\t\theight: gh,\n\t\t\t\t\tcolor: rgb(0, 0, 255),\n\t\t\t\t\tfixed: true,\n\t\t\t\t})\n\n\t\t\t\tconst title = formatText({\n\t\t\t\t\t...textStyle,\n\t\t\t\t\ttext: err.name,\n\t\t\t\t\tpos: vec2(pad),\n\t\t\t\t\tcolor: rgb(255, 128, 0),\n\t\t\t\t\tfixed: true,\n\t\t\t\t})\n\n\t\t\t\tdrawFormattedText(title)\n\n\t\t\t\tdrawText({\n\t\t\t\t\t...textStyle,\n\t\t\t\t\ttext: err.message,\n\t\t\t\t\tpos: vec2(pad, pad + title.height + gap),\n\t\t\t\t\tfixed: true,\n\t\t\t\t})\n\n\t\t\t\tpopTransform()\n\t\t\t\tgame.ev.trigger(\"error\", err)\n\n\t\t\t})\n\n\t\t})\n\n\t}\n\n\tfunction resetInputState() {\n\n\t\tfor (const k in app.keyStates) {\n\t\t\tapp.keyStates[k] = processButtonState(app.keyStates[k])\n\t\t}\n\n\t\tfor (const m in app.mouseStates) {\n\t\t\tapp.mouseStates[m] = processButtonState(app.mouseStates[m])\n\t\t}\n\n\t\tfor (const b in app.virtualButtonStates) {\n\t\t\tapp.virtualButtonStates[b] = processButtonState(app.virtualButtonStates[b])\n\t\t}\n\n\t\tapp.charInputted = []\n\t\tapp.isMouseMoved = false\n\t\tapp.isKeyPressed = false\n\t\tapp.isKeyPressedRepeat = false\n\t\tapp.isKeyReleased = false\n\n\t}\n\n\tfunction run(f: () => void) {\n\n\t\tif (app.loopID !== null) {\n\t\t\tcancelAnimationFrame(app.loopID)\n\t\t}\n\n\t\tconst frame = (t: number) => {\n\n\t\t\tif (app.stopped) return\n\n\t\t\tif (document.visibilityState !== \"visible\") {\n\t\t\t\tapp.loopID = requestAnimationFrame(frame)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst realTime = t / 1000\n\t\t\tconst realDt = realTime - app.realTime\n\n\t\t\tapp.realTime = realTime\n\n\t\t\tif (!app.skipTime) {\n\t\t\t\tapp.dt = realDt\n\t\t\t\tapp.time += dt()\n\t\t\t\tapp.fpsCounter.tick(app.dt)\n\t\t\t}\n\n\t\t\tapp.skipTime = false\n\t\t\tapp.numFrames++\n\n\t\t\tframeStart()\n\t\t\tf()\n\t\t\tframeEnd()\n\n\t\t\tresetInputState()\n\t\t\tgame.ev.trigger(\"frameEnd\")\n\t\t\tapp.loopID = requestAnimationFrame(frame)\n\n\t\t}\n\n\t\tframe(0)\n\n\t}\n\n\tfunction quit() {\n\n\t\tgame.ev.onOnce(\"frameEnd\", () => {\n\n\t\t\t// stop the loop\n\t\t\tapp.stopped = true\n\n\t\t\t// clear canvas\n\t\t\tgl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT | gl.STENCIL_BUFFER_BIT)\n\n\t\t\t// unbind everything\n\t\t\tconst numTextureUnits = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS)\n\n\t\t\tfor (let unit = 0; unit < numTextureUnits; unit++) {\n\t\t\t\tgl.activeTexture(gl.TEXTURE0 + unit)\n\t\t\t\tgl.bindTexture(gl.TEXTURE_2D, null)\n\t\t\t\tgl.bindTexture(gl.TEXTURE_CUBE_MAP, null)\n\t\t\t}\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, null)\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null)\n\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, null)\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null)\n\n\t\t\t// run all scattered gc events\n\t\t\tgc.forEach((f) => f())\n\n\t\t\t// delete webgl buffers\n\t\t\tgl.deleteBuffer(gfx.vbuf)\n\t\t\tgl.deleteBuffer(gfx.ibuf)\n\n\t\t\t// unregister events\n\t\t\tfor (const name in canvasEvents) {\n\t\t\t\tapp.canvas.removeEventListener(name, canvasEvents[name])\n\t\t\t}\n\n\t\t\tfor (const name in docEvents) {\n\t\t\t\tdocument.removeEventListener(name, docEvents[name])\n\t\t\t}\n\n\t\t\tfor (const name in winEvents) {\n\t\t\t\twindow.removeEventListener(name, winEvents[name])\n\t\t\t}\n\n\t\t})\n\n\t}\n\n\t// TODO: tween vec2\n\tfunction tween(\n\t\tmin: number,\n\t\tmax: number,\n\t\tduration: number,\n\t\tsetValue: (value: number) => void,\n\t\teaseFunc = easings.linear,\n\t): TweenController {\n\t\tlet curTime = 0\n\t\tconst onFinishEvents: Array<() => void> = []\n\t\tconst ev = onUpdate(() => {\n\t\t\tcurTime += dt()\n\t\t\tconst t = Math.min(curTime / duration, 1)\n\t\t\tsetValue(lerp(min, max, easeFunc(t)))\n\t\t\tif (t === 1) {\n\t\t\t\tev.cancel()\n\t\t\t\tsetValue(max)\n\t\t\t\tonFinishEvents.forEach((action) => action())\n\t\t\t}\n\t\t})\n\t\treturn {\n\t\t\tget paused() {\n\t\t\t\treturn ev.paused\n\t\t\t},\n\t\t\tset paused(p) {\n\t\t\t\tev.paused = p\n\t\t\t},\n\t\t\tonFinish(action: () => void) {\n\t\t\t\tonFinishEvents.push(action)\n\t\t\t},\n\t\t\tthen(action: () => void) {\n\t\t\t\tthis.onFinish(action)\n\t\t\t\treturn this\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\tev.cancel()\n\t\t\t},\n\t\t\tfinish() {\n\t\t\t\tev.cancel()\n\t\t\t\tsetValue(max)\n\t\t\t\tonFinishEvents.forEach((action) => action())\n\t\t\t},\n\t\t}\n\t}\n\n\tloadBitmapFont(\n\t\t\"happy\",\n\t\thappyFontSrc,\n\t\t28,\n\t\t36,\n\t)\n\n\t// main game loop\n\trun(() => {\n\n\t\tif (!assets.loaded) {\n\t\t\tif (loadProgress() === 1) {\n\t\t\t\tassets.loaded = true\n\t\t\t\tgame.ev.trigger(\"load\")\n\t\t\t}\n\t\t}\n\n\t\tif (!assets.loaded && gopt.loadingScreen !== false) {\n\n\t\t\t// TODO: Currently if assets are not initially loaded no updates or timers will be run, however they will run if loadingScreen is set to false. What's the desired behavior or should we make them consistent?\n\t\t\tdrawLoadScreen()\n\n\t\t} else {\n\n\t\t\tgame.ev.trigger(\"input\")\n\n\t\t\tif (!debug.paused) {\n\t\t\t\tupdateFrame()\n\t\t\t}\n\n\t\t\tcheckFrame()\n\t\t\tdrawFrame()\n\n\t\t\tif (gopt.debug !== false) {\n\t\t\t\tdrawDebug()\n\t\t\t}\n\n\t\t\tif (gopt.virtualControls && isTouchScreen()) {\n\t\t\t\tdrawVirtualControls()\n\t\t\t}\n\n\t\t}\n\n\t})\n\n\t// the exported ctx handle\n\tconst ctx: KaboomCtx = {\n\t\tVERSION,\n\t\t// asset load\n\t\tloadRoot,\n\t\tloadProgress,\n\t\tloadSprite,\n\t\tloadSpriteAtlas,\n\t\tloadSound,\n\t\tloadBitmapFont,\n\t\tloadFont,\n\t\tloadShader,\n\t\tloadAseprite,\n\t\tloadPedit,\n\t\tloadBean,\n\t\tload,\n\t\tgetSprite,\n\t\tgetSound,\n\t\tgetFont,\n\t\tgetBitmapFont,\n\t\tgetShader,\n\t\tAsset,\n\t\tSpriteData,\n\t\tSoundData,\n\t\t// query\n\t\twidth,\n\t\theight,\n\t\tcenter,\n\t\tdt,\n\t\ttime,\n\t\tscreenshot,\n\t\trecord,\n\t\tisFocused,\n\t\tsetCursor,\n\t\tsetFullscreen,\n\t\tisFullscreen,\n\t\tisTouchScreen,\n\t\tonLoad,\n\t\tonLoadUpdate,\n\t\tonResize,\n\t\tonError,\n\t\t// misc\n\t\tcamPos,\n\t\tcamScale,\n\t\tcamRot,\n\t\tshake,\n\t\ttoScreen,\n\t\ttoWorld,\n\t\tgravity,\n\t\t// obj\n\t\tadd,\n\t\tdestroy,\n\t\tdestroyAll,\n\t\tget,\n\t\tgetAll,\n\t\treadd,\n\t\t// comps\n\t\tpos,\n\t\tscale,\n\t\trotate,\n\t\tcolor,\n\t\topacity,\n\t\tanchor,\n\t\tarea,\n\t\tsprite,\n\t\ttext,\n\t\trect,\n\t\tcircle,\n\t\tuvquad,\n\t\toutline,\n\t\tbody,\n\t\tdoubleJump,\n\t\tshader,\n\t\ttimer,\n\t\tfixed,\n\t\tstay,\n\t\thealth,\n\t\tlifespan,\n\t\tz,\n\t\tmove,\n\t\toffscreen,\n\t\tfollow,\n\t\tstate,\n\t\tfadeIn,\n\t\t// group events\n\t\ton,\n\t\tonUpdate,\n\t\tonDraw,\n\t\tonAdd,\n\t\tonDestroy,\n\t\tonCollide,\n\t\tonClick,\n\t\tonHover,\n\t\tonHoverUpdate,\n\t\tonHoverEnd,\n\t\t// input\n\t\tonKeyDown,\n\t\tonKeyPress,\n\t\tonKeyPressRepeat,\n\t\tonKeyRelease,\n\t\tonMouseDown,\n\t\tonMousePress,\n\t\tonMouseRelease,\n\t\tonMouseMove,\n\t\tonCharInput,\n\t\tonTouchStart,\n\t\tonTouchMove,\n\t\tonTouchEnd,\n\t\tonVirtualButtonPress,\n\t\tonVirtualButtonDown,\n\t\tonVirtualButtonRelease,\n\t\tmousePos,\n\t\tmouseDeltaPos,\n\t\tisKeyDown,\n\t\tisKeyPressed,\n\t\tisKeyPressedRepeat,\n\t\tisKeyReleased,\n\t\tisMouseDown,\n\t\tisMousePressed,\n\t\tisMouseReleased,\n\t\tisMouseMoved,\n\t\tisVirtualButtonPressed,\n\t\tisVirtualButtonDown,\n\t\tisVirtualButtonReleased,\n\t\t// timer\n\t\tloop,\n\t\twait,\n\t\t// audio\n\t\tplay,\n\t\tvolume,\n\t\tburp,\n\t\taudioCtx: audio.ctx,\n\t\t// math\n\t\tTimer,\n\t\tLine,\n\t\tRect,\n\t\tCircle,\n\t\tPolygon,\n\t\tVec2,\n\t\tColor,\n\t\tMat4,\n\t\tQuad,\n\t\tRNG,\n\t\trand,\n\t\trandi,\n\t\trandSeed,\n\t\tvec2,\n\t\trgb,\n\t\thsl2rgb,\n\t\tquad,\n\t\tchoose,\n\t\tchance,\n\t\tlerp,\n\t\ttween,\n\t\teasings,\n\t\tmap,\n\t\tmapc,\n\t\twave,\n\t\tdeg2rad,\n\t\trad2deg,\n\t\ttestLineLine,\n\t\ttestRectRect,\n\t\ttestRectLine,\n\t\ttestRectPoint,\n\t\t// raw draw\n\t\tdrawSprite,\n\t\tdrawText,\n\t\tformatText,\n\t\tdrawRect,\n\t\tdrawLine,\n\t\tdrawLines,\n\t\tdrawTriangle,\n\t\tdrawCircle,\n\t\tdrawEllipse,\n\t\tdrawUVQuad,\n\t\tdrawPolygon,\n\t\tdrawFormattedText,\n\t\tdrawMasked,\n\t\tdrawSubtracted,\n\t\tpushTransform,\n\t\tpopTransform,\n\t\tpushTranslate,\n\t\tpushScale,\n\t\tpushRotate,\n\t\tpushRotateX,\n\t\tpushRotateY,\n\t\tpushRotateZ,\n\t\tpushMatrix,\n\t\t// debug\n\t\tdebug,\n\t\t// scene\n\t\tscene,\n\t\tgo,\n\t\t// level\n\t\taddLevel,\n\t\t// storage\n\t\tgetData,\n\t\tsetData,\n\t\tdownload,\n\t\tdownloadJSON,\n\t\tdownloadText,\n\t\tdownloadBlob,\n\t\t// plugin\n\t\tplug,\n\t\t// char sets\n\t\tASCII_CHARS,\n\t\t// dom\n\t\tcanvas: app.canvas,\n\t\t// misc\n\t\taddKaboom,\n\t\t// dirs\n\t\tLEFT: Vec2.LEFT,\n\t\tRIGHT: Vec2.RIGHT,\n\t\tUP: Vec2.UP,\n\t\tDOWN: Vec2.DOWN,\n\t\t// colors\n\t\tRED: Color.RED,\n\t\tGREEN: Color.GREEN,\n\t\tBLUE: Color.BLUE,\n\t\tYELLOW: Color.YELLOW,\n\t\tMAGENTA: Color.MAGENTA,\n\t\tCYAN: Color.CYAN,\n\t\tWHITE: Color.WHITE,\n\t\tBLACK: Color.BLACK,\n\t\tquit,\n\t\t// helpers\n\t\tEvent,\n\t\tEventHandler,\n\t}\n\n\tif (gopt.plugins) {\n\t\tgopt.plugins.forEach(plug)\n\t}\n\n\t// export everything to window if global is set\n\tif (gopt.global !== false) {\n\t\tfor (const k in ctx) {\n\t\t\twindow[k] = ctx[k]\n\t\t}\n\t}\n\n\tapp.canvas.focus()\n\n\treturn ctx\n\n}\n", "// adds better movement && coyote time && jump buffer\nexport default function ssControllerComponent() {\n\treturn {\n\t\tssController({ moveSpeed = 240, accel = 12, deccel = 8, velPower = 1, friction = 0.9, jumpForce = 480, coyoteTime = 0.1, jumpBufferTime = 0.2, blockTag = \"block\", useInput = true } = {}) {\n\n\t\t\t// movement\t\n\t\t\tvar velocity = 0;\n\t\t\tvar targetSpeed = 0;\n\t\t\tvar amount;\n\n\t\t\t// coyoteTime\n\t\t\tvar coyoteCount = 0;\n\n\t\t\tvar canJump = false;\n\n\t\t\t// jump buffer\n\t\t\tvar jumpBufferCount = 0;\n\n\t\t\t// dash\n\t\t\tvar dashCooldownTime = 0.5;\n\t\t\tvar dashCount = 0;\n\n\t\t\treturn {\n\n\t\t\t\tid: \"sscontroller\",\n\t\t\t\trequire: [\"pos\", \"body\"],\n\n\t\t\t\tadd() {\n\n\t\t\t\t\tthis.input = 0;\n\n\t\t\t\t\tthis.kinematic = false;\n\n\t\t\t\t\tonKeyPress(\"space\", () => {\n\t\t\t\t\t\t//console.log(canJump + \" \" + !this.kinematic);\n\t\t\t\t\t\tif (canJump && !this.kinematic) {\n\t\t\t\t\t\t\tif (this.curPlatform() != null) {\n\t\t\t\t\t\t\t\tif (!this.curPlatform().is(\"spring\")) {\n\t\t\t\t\t\t\t\t\tthis.jump(jumpForce);\n\t\t\t\t\t\t\t\t\tplay(\"blip\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tjumpBufferCount = jumpBufferTime;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tonKeyPress(\"z\", () => {\n\t\t\t\t\t\t//console.log(canJump + \" \" + !this.kinematic);\n\t\t\t\t\t\tif (canJump && !this.kinematic) {\n\t\t\t\t\t\t\tif (this.curPlatform() != null) {\n\t\t\t\t\t\t\t\tif (!this.curPlatform().is(\"spring\")) {\n\t\t\t\t\t\t\t\t\tthis.jump(jumpForce);\n\t\t\t\t\t\t\t\t\tplay(\"blip\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tjumpBufferCount = jumpBufferTime;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t/*\n\t\t\t\t\tonKeyPress([\"r\"], () => {\n\t\t\t\t\t\tif (velocity <= moveSpeed && dashCount < 0) {\n\t\t\t\t\t\t\tvelocity *= 10;\n\t\t\t\t\t\t\tdashCount = dashCooldownTime;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t*/\n\n\t\t\t\t\tthis.onPhysicsResolve((c) => {\n\t\t\t\t\t\tif (c.target.is(\"body\")) {\n\t\t\t\t\t\t\tif (c.target.isStatic)\n\t\t\t\t\t\t\t\tif (c) {\n\t\t\t\t\t\t\t\t\tif (c.isRight() && velocity > 0)\n\t\t\t\t\t\t\t\t\t\tvelocity = 0;\n\t\t\t\t\t\t\t\t\telse if (c.isLeft() && velocity < 0)\n\t\t\t\t\t\t\t\t\t\tvelocity = 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tc.target.move(velocity, 0);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t},\n\n\t\t\t\tupdate() {\n\n\t\t\t\t\t// input\n\t\t\t\t\tif (this.kinematic) {\n\t\t\t\t\t\tvelocity = 0;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (useInput) {\n\t\t\t\t\t\tthis.input = 0;\n\n\t\t\t\t\t\tif (isKeyDown(\"a\") || isKeyDown(\"left\"))\n\t\t\t\t\t\t\tthis.input -= 1;\n\n\t\t\t\t\t\tif (isKeyDown(\"d\") || isKeyDown(\"right\"))\n\t\t\t\t\t\t\tthis.input += 1;\n\t\t\t\t\t}\n\n\t\t\t\t\t// movement\n\n\t\t\t\t\ttargetSpeed = this.input * moveSpeed;\n\n\t\t\t\t\tspeedDif = targetSpeed - velocity;\n\n\t\t\t\t\taccelRate = (Math.abs(targetSpeed) > 0.01) ? accel : deccel;\n\n\t\t\t\t\tmovement = Math.pow(Math.abs(speedDif) * accelRate, velPower) * Math.sign(speedDif);\n\n\t\t\t\t\tvelocity += movement * dt();\n\n\t\t\t\t\tthis.move(velocity, 0);\n\n\t\t\t\t\t// friction\n\n\t\t\t\t\tamount = Math.min(Math.abs(velocity), Math.abs(friction));\n\n\t\t\t\t\tamount *= Math.sign(velocity);\n\n\t\t\t\t\tvelocity -= amount;\n\n\t\t\t\t\t// coyote time\n\t\t\t\t\tif (this.isGrounded()) {\n\t\t\t\t\t\tcoyoteCount = coyoteTime;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcoyoteCount -= dt();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((coyoteCount > 0 && this.isFalling()) || this.isGrounded())\n\t\t\t\t\t\tcanJump = true;\n\t\t\t\t\telse\n\t\t\t\t\t\tcanJump = false;\n\n\t\t\t\t\t// jump buffer\n\t\t\t\t\tif (jumpBufferCount > 0 && canJump) {\n\t\t\t\t\t\tif (this.curPlatform() != null) {\n\t\t\t\t\t\t\tif (!this.curPlatform().is(\"spring\")) {\n\t\t\t\t\t\t\t\tthis.jump(jumpForce);\n\t\t\t\t\t\t\t\tplay(\"blip\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjumpBufferCount -= dt();\n\t\t\t\t\t}\n\n\t\t\t\t\t// dash\n\t\t\t\t\t//dashCount -= dt();\n\t\t\t\t},\n\n\t\t\t\tinspect() {\n\t\t\t\t\treturn \"{\\n\\tInput: \" + this.input + \"\\n\\tVelocity: \" + (Math.round(velocity * 10) / 10) + \"\\n\\tCoyote: \" + (Math.round(coyoteCount * 10) / 10) + \"\\n\\tJump Buffer: \" + (Math.round(jumpBufferCount * 10) / 10) + \"\\n\\tCanJump: \" + canJump + \"\\n}\";\n\t\t\t\t},\n\n\t\t\t\t// other methods\n\n\t\t\t\tgetVelocity() {\n\t\t\t\t\treturn velocity;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}", "export default class GridObject {\n\n\t// should only contain these parameters\n\tconstructor(grid, x, y) {\n\t\tthis.grid = grid;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\t// add value to gridObject to change object\n\t\tthis.value = null;\n\t}\n\n\t// value is a kaboom object\n\tsetValue(value) {\n\t\t//destroy(this.value);\n\t\tthis.value = value;\n\t\t// trigger grid value changed\n\t}\n\n\tgetValue() {\n\t\treturn this.value;\n\t}\n\n\tdestroy() {\n\t\tif (this.value != null) {\n\t\t\tthis.value.destroy();\n\t\t\tthis.value = null;\n\t\t}\n\t}\n\n\ttoString() {\n\t\treturn this.x + \", \" + this.y;\n\t}\n\n\t// get world pos\n\n\tgetWorldPos() {\n\t\treturn vec2(this.x * this.grid.cellSize, this.y * this.grid.cellSize).add(this.grid.pos);\n\t}\n\n}", "import GridObject from \"./gridObject.js\";\n\nexport default function gridComponent(k) {\n\treturn {\n\t\tgrid(width = 4, height = 4, cellSize = 32, { createGridObject = (g, x, y) => new GridObject(g, x, y), d = false } = {}) {\n\t\t\treturn {\n\n\t\t\t\trequire: [\"pos\"],\n\t\t\t\tid: \"grid\",\n\n\t\t\t\tadd() {\n\t\t\t\t\tthis.width = width;\n\t\t\t\t\tthis.height = height;\n\t\t\t\t\tthis.cellSize = cellSize;\n\t\t\t\t\tthis.createGridObject = createGridObject;\n\n\t\t\t\t\tthis.d = d;\n\n\t\t\t\t\tthis.gridArray = [];\n\n\t\t\t\t\tfor (var i = 0; i < this.width; i++) {\n\t\t\t\t\t\tthis.gridArray.push([]);\n\t\t\t\t\t\tfor (var j = 0; j < this.height; j++) {\n\t\t\t\t\t\t\tthis.gridArray[i].push(createGridObject(this, i, j));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tdraw() {\n\t\t\t\t\tif (this.d) {\n\n\t\t\t\t\t\t//debug.log(\"horizontal\");\n\n\t\t\t\t\t\tfor (var i = 0; i <= this.height; i++) {\n\t\t\t\t\t\t\tvar v1 = k.vec2(0, i * this.cellSize).add(this.pos);\n\t\t\t\t\t\t\tvar v2 = k.vec2(this.width * this.cellSize, i * this.cellSize).add(this.pos);\n\n\t\t\t\t\t\t\t//debug.log(v1 + \" -> \" + v2);\n\n\t\t\t\t\t\t\tk.drawLine({\n\t\t\t\t\t\t\t\tp1: v1,\n\t\t\t\t\t\t\t\tp2: v2,\n\t\t\t\t\t\t\t\twidth: 1,\n\t\t\t\t\t\t\t\tcolor: k.rgb(77, 155, 230),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//debug.log(\"vertical\");\n\n\t\t\t\t\t\tfor (var j = 0; j <= this.width; j++) {\n\t\t\t\t\t\t\tvar v1 = k.vec2(j * this.cellSize, 0).add(this.pos);\n\t\t\t\t\t\t\tvar v2 = k.vec2(j * this.cellSize, this.height * this.cellSize).add(this.pos);\n\n\t\t\t\t\t\t\t//debug.log(v1 + \" -> \" + v2);\n\n\t\t\t\t\t\t\tk.drawLine({\n\t\t\t\t\t\t\t\tp1: v1,\n\t\t\t\t\t\t\t\tp2: v2,\n\t\t\t\t\t\t\t\twidth: 1,\n\t\t\t\t\t\t\t\tcolor: k.rgb(77, 155, 230),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tdestroy() {\n\n\t\t\t\t},\n\n\t\t\t\tinspect() {\n\n\t\t\t\t},\n\n\t\t\t\t// grid methods\n\n\t\t\t\tgetGridXY(pos) {\n\t\t\t\t\tvar worldPos = k.toWorld(pos);\n\t\t\t\t\tworldPos.x = Math.floor((worldPos.sub(this.pos)).x / this.cellSize);\n\t\t\t\t\tworldPos.y = Math.floor((worldPos.sub(this.pos)).y / this.cellSize);\n\t\t\t\t\treturn worldPos;\n\t\t\t\t},\n\n\t\t\t\t// returns world position from gridXY\n\t\t\t\tgetWorldPos(x, y) {\n\t\t\t\t\tvar vector2 = k.vec2(x * this.cellSize, y * this.cellSize).add(this.pos);\n\t\t\t\t\treturn vector2;\n\t\t\t\t},\n\n\t\t\t\t// sets the value of the object at x, y\n\t\t\t\tsetGridObjectXY(x, y, value) {\n\t\t\t\t\tif (x < this.width && x >= 0 && y < this.height && y >= 0)\n\t\t\t\t\t\tthis.gridArray[x][y] = value;\n\t\t\t\t},\n\n\t\t\t\tsetGridObjectWP(worldPosition, value) {\n\t\t\t\t\tvar gridXY = this.getGridXY(worldPosition);\n\t\t\t\t\tthis.setGridObjectXY(gridXY.x, gridXY.y, value);\n\t\t\t\t},\n\n\t\t\t\t// gets the value of the object at x, y\n\t\t\t\tgetGridObjectXY(x, y) {\n\t\t\t\t\tif (x < this.width && x >= 0 && y < this.height && y >= 0)\n\t\t\t\t\t\treturn this.gridArray[x][y];\n\t\t\t\t\telse\n\t\t\t\t\t\treturn null;\n\t\t\t\t},\n\n\t\t\t\tgetGridObjectWP(worldPosition) {\n\t\t\t\t\tvar gridXY = this.getGridXY(worldPosition);\n\t\t\t\t\treturn this.getGridObjectXY(gridXY.x, gridXY.y);\n\t\t\t\t},\n\n\t\t\t\ttriggerGridObjectChanged(x, y) {\n\t\t\t\t\t// tmp\n\t\t\t\t\tdebug.log(\"Placed @\" + x + \",\" + y + \"!\");\n\t\t\t\t},\n\n\t\t\t\tisXYinBounds(x, y) {\n\t\t\t\t\treturn (x < this.width && x >= 0 && y < this.height && y >= 0);\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\n\t\taddGrid(level, levelConfig) {\n\t\t\tvar g = add([\n\t\t\t\tpos(),\n\t\t\t\tgrid(levelConfig.width, levelConfig.height, levelConfig.cellSize),\n\t\t\t]);\n\n\t\t\tfor (var r = 0; r < levelConfig.height; r++) {\n\t\t\t\tfor (var c = 0; c < levelConfig.width; c++) {\n\t\t\t\t\tconst o = g.getGridObjectXY(c, r);\n\t\t\t\t\tconst p = level[r][c];\n\t\t\t\t\tif (levelConfig[p] != null && p != \"-1\" && p != \"0\") {\n\t\t\t\t\t\tconst obj = add(levelConfig[p][0](levelConfig[p][1]))\n\t\t\t\t\t\to.setValue(obj);\n\t\t\t\t\t\tobj.pos = g.getWorldPos(o.x, o.y).add(o.getValue().pos);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn g;\n\t\t}\n\t}\n}", "export default function gameManager() {\n\tvar data = {}\n\treturn {\n\t\tloadData() {\n\t\t\treturn data;\n\t\t}\n\t}\n}", "export default function menuScene() {\n\n\tvar play = playButton()\n\n\tvar custom = customLevels()\n\n\tonKeyPress(\"e\", () => {\n\t\tgo(\"levelEdit\")\n\t})\n\n\t// db debug\n\tonKeyPress(\"c\", () => {\n\t\treplit.setData(\"db_debug\", 0);\n\t})\n\t\n\tonKeyPress(\"u\", () => {\n\t\treplit.getData(\"db_debug\").then((d) => {\n\t\t\tconsole.log(d);\n\t\t\tif (d == null)\n\t\t\t\treplit.setData(\"db_debug\", 0)\n\t\t\treplit.setData(\"db_debug\", d + 1)\n\t\t})\n\t})\n\n\tonKeyPress(\"p\", () => {\n\t\treplit.getData(\"db_debug\").then(console.log);\n\t})\n\t\n}\n\nfunction playButton() {\n\n\tconst play = add([\n\t\tpos(center()),\n\t\tanchor(\"center\"),\n\t\trect(128,48),\n\t\tcolor(255,255,255),\n\t\tscale(1),\n\t\tarea(),\n\t])\n\n\tvar t = play.add([\n\t\tpos(),\n\t\tanchor(\"center\"),\n\t\ttext(\"Play\", {\n\t\t\t size: 24,\n\t\t}),\n\t\tcolor(0),\n\t])\n\n\tplay.onClick(() => {\n\t\tdebug.log(\"he\")\n\t\tgo(\"game\")\n\t})\n\t\n\treturn play\n}\n\nfunction customLevels() {\n\n\tconst customBut = add([\n\t\tpos(center().add(0,64)),\n\t\tanchor(\"center\"),\n\t\trect(128,48),\n\t\tcolor(255,255,255),\n\t\tscale(1),\n\t\tarea(),\n\t])\n\n\tvar t = customBut.add([\n\t\tpos(),\n\t\tanchor(\"center\"),\n\t\ttext(\"Custom\", {\n\t\t\t size: 24,\n\t\t}),\n\t\tcolor(0),\n\t])\n\n\tcustomBut.onClick(() => {\n\t\tgo(\"customLevel\")\n\t})\n\t\n\t\n}", "export default function gameScene({ customId = -1 } = {}) {\n\n\tvar data = loadData()\n\n\tdata.coins = 0;\n\tvar id = data.levelID;\n\n\tgravity(1600);\n\n\tlet levels = data[\"levels\"]\n\tlet dict = data[\"spriteDict\"]\n\n\tlet l;\n\tif (customId == -1) {\n\t\tl = addGrid(levels[id], getLevelConfig(id))\n\t} else {\n\t\treplit.getData(\"levels\").then((customLevels) => {\n\t\t\tl = addGrid(customLevels[customId], );\n\t\t});\n\t}\n\n\n\tfunction getLevelConfig(levelID) {\n\t\tlet lc = {\n\t\t\theight: levels[levelID].length,\n\t\t\twidth: levels[levelID][0].length,\n\t\t\tcellSize: 32,\n\t\t}\n\n\t\tconsole.log(levels[levelID])\n\n\t\t// todo\n\t\tfor (let [key, value] of Object.entries(dict)) {\n\t\t\tlc[key] = value.getTypeOutput()\n\t\t}\n\n\t\treturn lc\n\t}\n\n\t// game\n\n\tvar bottom = l.height * l.cellSize;\n\n\tlet player = add([\n\t\tpos(0, 256 + 64),\n\t\tsprite(\"player\", { anim: \"idle1\" }),\n\t\tarea({ shape: new Rect(vec2(2, 5), 12, 11) }),\n\t\tbody(),\n\t\tssController(),\n\t\tscale(2),\n\t\t{\n\t\t\tadd() {\n\t\t\t\tthis.n = 0;\n\t\t\t\tthis.frame = 0;\n\t\t\t\tthis.die = false;\n\n\t\t\t\tthis.onBeforePhysicsResolve((col) => {\n\t\t\t\t\tif (col.target.is(\"spring\")) {\n\t\t\t\t\t\tif (!col.isBottom() || this.isJumping()) {\n\t\t\t\t\t\t\tcol.preventResolve();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (Math.abs(col.displacement.y) > 25)\n\t\t\t\t\t\t\t\tcol.preventResolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (col.target.is(\"platform\")) {\n\t\t\t\t\t\tif (!col.isBottom() || this.isJumping())\n\t\t\t\t\t\t\tcol.preventResolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.onPhysicsResolve((c) => {\n\t\t\t\t\tif (c.target.is(\"spring\") && c.resolved) {\n\t\t\t\t\t\t// do spring\n\t\t\t\t\t\tif (c.target.curAnim() != \"bounce\") {\n\t\t\t\t\t\t\tc.target.play(\"bounce\", {\n\t\t\t\t\t\t\t\tpingpong: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (isKeyDown(\"space\") || isKeyDown(\"z\")) {\n\t\t\t\t\t\t\t\tthis.jump(750);\n\t\t\t\t\t\t\t\tplay(\"spring\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.jump(500);\n\t\t\t\t\t\t\t\tplay(\"spring\", { speed: 1.25, detune: randi(2, 4) * 100, volume: 0.5 });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tasync update() {\n\t\t\t\tif (this.pos.y >= bottom) {\n\t\t\t\t\tthis.die = true;\n\t\t\t\t\tthis.destroy();\n\t\t\t\t}\n\n\t\t\t\tif (this.input != 0) {\n\t\t\t\t\tif (this.getVelocity() < 0) {\n\t\t\t\t\t\tthis.flipX(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.flipX(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.n % 8 == 0) {\n\t\t\t\t\tvar curA = this.curAnim();\n\t\t\t\t\tif (Math.abs(this.getVelocity()) > 0.5) {\n\t\t\t\t\t\tswitch (curA) {\n\t\t\t\t\t\t\tcase \"run3\":\n\t\t\t\t\t\t\tcase \"idle0\":\n\t\t\t\t\t\t\t\tvar frame = 0;\n\t\t\t\t\t\t\t\tif (curA == \"run3\") {\n\t\t\t\t\t\t\t\t\tframe = (this.frame - 1) % 4;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.play(\"run0\");\n\t\t\t\t\t\t\t\tthis.frame = 1 + frame;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"run0\":\n\t\t\t\t\t\t\tcase \"idle1\":\n\t\t\t\t\t\t\t\tvar frame = 0;\n\t\t\t\t\t\t\t\tif (curA == \"run0\") {\n\t\t\t\t\t\t\t\t\tframe = (this.frame - 1) % 4;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.play(\"run1\");\n\t\t\t\t\t\t\t\tthis.frame = 8 + frame;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"run1\":\n\t\t\t\t\t\t\tcase \"idle2\":\n\t\t\t\t\t\t\t\tvar frame = 0;\n\t\t\t\t\t\t\t\tif (curA == \"run1\") {\n\t\t\t\t\t\t\t\t\tframe = (this.frame) % 4;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.play(\"run2\");\n\t\t\t\t\t\t\t\tthis.frame = 15 + frame;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"run2\":\n\t\t\t\t\t\t\tcase \"idle3\":\n\t\t\t\t\t\t\t\tvar frame = 0;\n\t\t\t\t\t\t\t\tif (curA == \"run2\") {\n\t\t\t\t\t\t\t\t\tframe = (this.frame + 1) % 4;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.play(\"run3\");\n\t\t\t\t\t\t\t\tthis.frame = 22 + frame;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tswitch (curA) {\n\t\t\t\t\t\t\tcase \"run0\":\n\t\t\t\t\t\t\tcase \"idle0\":\n\t\t\t\t\t\t\t\tthis.play(\"idle1\");\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"run1\":\n\t\t\t\t\t\t\tcase \"idle1\":\n\t\t\t\t\t\t\t\tthis.play(\"idle2\");\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"run2\":\n\t\t\t\t\t\t\tcase \"idle2\":\n\t\t\t\t\t\t\t\tthis.play(\"idle3\");\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"run3\":\n\t\t\t\t\t\t\tcase \"idle3\":\n\t\t\t\t\t\t\t\tthis.play(\"idle0\");\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.n++;\n\t\t\t},\n\n\t\t\tdestroy() {\n\t\t\t\tif (this.die) {\n\t\t\t\t\tvar pp = this.pos.add(16, -14);\n\t\t\t\t\tplay(\"explode\");\n\t\t\t\t\tfor (var i = 0; i < 50; i++) {\n\t\t\t\t\t\tvar a = randi(0, 360);\n\t\t\t\t\t\tadd([\n\t\t\t\t\t\t\tpos(pp),\n\t\t\t\t\t\t\trect(randi(2, 4), 1),\n\t\t\t\t\t\t\trotate(a),\n\t\t\t\t\t\t\tmove(a, randi(25, 75)),\n\t\t\t\t\t\t\tcolor(255, 255, 255),\n\t\t\t\t\t\t\tlifespan(0.625),\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t\"player\",\n\t])\n\n\tvar w = l.width\n\tvar h = l.height\n\tvar c = l.cellSize\n\n\tvar left_border = add([\n\t\tpos(-32, 0),\n\t\trect(32, l.height * l.cellSize),\n\t\tarea(),\n\t\tbody({ isStatic: true }),\n\t])\n\n\tvar right_border = add([\n\t\tpos(l.width * l.cellSize, 0),\n\t\trect(32, l.height * l.cellSize),\n\t\tarea(),\n\t\tbody({ isStatic: true }),\n\t])\n\n\tvar top_border = add([\n\t\tpos(32, -32),\n\t\trect(l.width * l.cellSize, 32),\n\t\tarea(),\n\t\tbody({ isStatic: true }),\n\t])\n\n\tvar bot_border = add([\n\t\tpos(32, l.height * l.cellSize + 32),\n\t\trect(l.width * l.cellSize, 32),\n\t\tarea(),\n\t\tbody({ isStatic: true }),\n\t])\n\n\tfunction clampCamPos(v) {\n\t\tx = Math.min(Math.max(v.x, 320), w * c - 320)\n\t\ty = Math.min(Math.max(v.y, 240), h * c - 240)\n\n\t\t//console.log(\"C:\" + vec2(x, y) + \", Max: \" + vec2(w * c, h * c))\n\t\treturn vec2(x, y)\n\t}\n\n\tonDraw(async () => {\n\t\tcamPos(clampCamPos(player.pos.add(0, -50)));\n\t})\n\n\t// ui\n\n\tlet cont = add([\n\t\tpos(width() - 32, 32),\n\t\tanchor(\"topright\"),\n\t\trect(128, 48),\n\t\tcolor(0, 0, 0),\n\t\toutline(2, rgb(255, 255, 255)),\n\t\tfixed(),\n\t])\n\tcont.radius = 24;\n\n\tcont.add([\n\t\tpos(-70, 24),\n\t\tanchor(\"left\"),\n\t\ttext(\"0\", {\n\t\t\tsize: 16,\n\t\t}),\n\t\tfixed(),\n\t\t{\n\t\t\tasync update() {\n\t\t\t\tthis.text = data.coins;\n\t\t\t},\n\t\t}\n\t])\n\n\tcont.add([\n\t\tpos(-90, 24),\n\t\tanchor(\"center\"),\n\t\tsprite(\"41\"),\n\t\tscale(2),\n\t\tfixed(),\n\t])\n\n\tonKeyPress(\"r\", () => {\n\t\tplayer.die = true;\n\t\tgo(\"game\")\n\t})\n\n\tonKeyPress(\"escape\", () => {\n\t\tgo(\"menu\")\n\t})\n\n}", "export default function levelEditScene(width = 40, height = 30) {\n\n\tdb.set(\"levels\", {});\n\n\tvar data = loadData()\n\n\tvar dict = data[\"spriteDict\"];\n\n\tconsole.log(dict)\n\n\tvar selIndex = 5\n\n\tvar g = add([\n\t\tpos(),\n\t\tgrid(width, height, 32, { d: true }),\n\t])\n\n\tfunction place(p) {\n\t\tvar gridObj = g.getGridObjectWP(p)\n\t\tif (gridObj == null)\n\t\t\treturn\n\t\tif (gridObj.getValue() != null)\n\t\t\tgridObj.destroy()\n\t\tvar obj = add([\n\t\t\tpos(),\n\t\t\tsprite(dict[selIndex].sprite),\n\t\t\tscale(2),\n\t\t\toutview({ hide: true }),\n\t\t\t{\n\t\t\t\tadd() {\n\t\t\t\t\tthis.spriteID = selIndex\n\t\t\t\t}\n\t\t\t}\n\t\t])\n\t\tgridObj.setValue(obj)\n\t\tobj.pos = g.getWorldPos(gridObj.x, gridObj.y)\n\t\tconsole.log(obj.spriteID)\n\t}\n\n\tfunction remove(p) {\n\t\tvar gridObj = g.getGridObjectWP(p)\n\t\tif (gridObj == null)\n\t\t\treturn\n\t\tvar obj = gridObj.getValue()\n\t\tif (obj == null)\n\t\t\treturn\n\t\tgridObj.destroy()\n\t}\n\n\tvar s = add([\n\t\tpos(center()),\n\t\tsprite(dict[selIndex].sprite),\n\t\tcolor(120, 120, 255),\n\t\topacity(0.5),\n\t\tscale(2),\n\t\tz(2),\n\t])\n\n\tonMouseDown(\"left\", (p) => {\n\t\tplace(p)\n\t\ts.color = rgb(120, 255, 120)\n\t})\n\n\tonMouseDown(\"right\", (p) => {\n\t\tremove(p)\n\t\ts.color = rgb(255, 120, 120)\n\t})\n\n\tonMouseRelease(\"left\", () => {\n\t\ts.color = rgb(120, 120, 255)\n\t})\n\n\tonMouseRelease(\"right\", () => {\n\t\ts.color = rgb(120, 120, 255)\n\t})\n\n\tonUpdate(() => {\n\t\tvar p = mousePos()\n\t\tdebug.log(selIndex);\n\t\tif (isNaN(p.x) || isNaN(p.y))\n\t\t\treturn\n\t\tvar xy = g.getGridXY(p)\n\t\ts.pos = g.getWorldPos(xy.x, xy.y)\n\t\ts.use(sprite(dict[selIndex].sprite))\n\t})\n\n\tonKeyPress(\"q\", () => {\n\t\tif (selIndex > 0)\n\t\t\tselIndex--;\n\t})\n\n\tonKeyPress(\"e\", () => {\n\t\tif (selIndex < Object.keys(dict).length - 1)\n\t\t\tselIndex++;\n\t})\n\n\tonKeyPress(\"f\", () => {\n\t\tif (selIndex < Object.keys(dict).length - 6)\n\t\t\tselIndex += 5;\n\t})\n\n\tonKeyPress(\"r\", () => {\n\t\tif (selIndex > 6)\n\t\t\tselIndex -= 5\n\t})\n\n\tvar w = g.width\n\tvar h = g.height\n\tvar c = g.cellSize\n\tfunction clampCamPos(x, y) {\n\t\tx = Math.min(Math.max(x, 320), w * c - 320)\n\t\ty = Math.min(Math.max(y, 240), h * c - 240)\n\n\t\t//console.log(\"C:\" + vec2(x, y) + \", Max: \" + vec2(w * c, h * c))\n\t\treturn vec2(x, y)\n\t}\n\n\tvar speed = 150;\n\tvar mult = 1;\n\tonUpdate(() => {\n\t\tif (isKeyDown(\"shift\"))\n\t\t\tmult = 2;\n\t\telse\n\t\t\tmult = 1;\n\t})\n\n\tonKeyDown(\"w\", () => {\n\t\tvar p = camPos().add(0, -speed * mult * dt())\n\t\tcamPos(clampCamPos(p.x, p.y))\n\t})\n\n\tonKeyDown(\"s\", () => {\n\t\tvar p = camPos().add(0, speed * mult * dt())\n\t\tcamPos(clampCamPos(p.x, p.y))\n\t})\n\n\tonKeyDown(\"a\", () => {\n\t\tvar p = camPos().add(-speed * mult * dt(), 0)\n\t\tcamPos(clampCamPos(p.x, p.y))\n\t})\n\n\tonKeyDown(\"d\", () => {\n\t\tvar p = camPos().add(speed * mult * dt(), 0)\n\t\tcamPos(clampCamPos(p.x, p.y))\n\t})\n\n\tonKeyPress(\"escape\", () => {\n\t\tgo(\"menu\")\n\t})\n\n\tonKeyPress(\"space\", () => {\n\t\tvar level = [];\n\t\tfor (var r = 0; r < g.height; r++) {\n\t\t\tlevel[r] = [];\n\t\t\tfor (var c = 0; c < g.width; c++) {\n\t\t\t\tvar obj = g.getGridObjectXY(c, r).getValue()\n\t\t\t\tif (obj == null)\n\t\t\t\t\tlevel[r].push(-1)\n\t\t\t\telse\n\t\t\t\t\tlevel[r].push(obj.spriteID)\n\t\t\t}\n\t\t}\n\t\tconsole.log(level)\n\t})\n\n}", "export default function customLevelScene() {\n\n\tvar player = {};\n\n\tvar t = add([\n\t\tpos(center()),\n\t\tanchor(\"center\"),\n\t\ttext(\"Logging into\\n Repl.it\", {\n\t\t\tsize: 48,\n\t\t}),\n\t\tcolor(255, 255, 255),\n\t])\n\n\treplit.getUserOrAuth().then((user) => {\n\t\t// check locked\n\t\tvar locked = true;\n\t\tvar cancelled = false;\n\t\treplit.getData(\"players\").then((players) => {\n\t\t\tif (!(user.id in players)) {\n\t\t\t\taddPlayer(locked)\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Already in database!\")\n\t\t\t}\n\t\t\t// after log in\n\t\t\tplayer = players[user.id]\n\n\t\t\tlScene(players);\n\t\t})\n\n\t\tfunction addPlayer(locked) {\n\t\t\tif (locked && !cancelled) {\n\t\t\t\treplit.getData(\"p_locked\").then((l) => {\n\t\t\t\t\tlocked = l\n\t\t\t\t\tconsole.log(locked + \" -> \" + l)\n\t\t\t\t\taddPlayer(locked)\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tif (locked && cancelled)\n\t\t\t\t\treturn;\n\t\t\t\treplit.setData(\"p_locked\", true);\n\t\t\t\treplit.getData(\"players\").then((players) => {\n\t\t\t\t\tplayers[user.id] = { id: user.id, name: user.name }\n\t\t\t\t\treplit.setData(\"players\", players).then(console.log)\n\t\t\t\t\treplit.setData(\"p_locked\", false);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tfunction lScene(players) {\n\n\t\t\tdestroy(t);\n\n\t\t\tvar page = 1;\n\t\t\tvar LPP = 5\n\n\t\t\treplit.getData(\"levels\").then((levels) => {\n\n\t\t\t\tconsole.log(levels);\n\n\t\t\t\tvar levelsLength = Object.keys(levels).length\n\t\t\t\tvar pages = levelsLength / LPP\n\n\t\t\t\t// TODO: display (LPP) levels per page, arrows across pages :)\n\n\t\t\t\tvar i = (page - 1) * LPP;\n\t\t\t\tfor (var levelKey in levels) {\n\t\t\t\t\tvar level = levels[levelKey]\n\n\t\t\t\t\tif (i >= LPP * page || i >= levelsLength)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tvar pageText = add([\n\t\t\t\t\t\tpos(width() / 2, 24),\n\t\t\t\t\t\tanchor(\"center\"),\n\t\t\t\t\t\ttext(\"Page \" + page, {\n\t\t\t\t\t\t\tsize: 32,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tcolor(255, 255, 255),\n\t\t\t\t\t])\n\n\t\t\t\t\tvar levelElement = add([\n\t\t\t\t\t\tpos(width() / 2, 60 + (i * 88)),\n\t\t\t\t\t\tanchor(\"top\"),\n\t\t\t\t\t\trect(256, 64),\n\t\t\t\t\t\tcolor(255, 255, 255),\n\t\t\t\t\t\tarea(),\n\t\t\t\t\t])\n\t\t\t\t\tlevelElement.radius = 8;\n\n\t\t\t\t\tlevelElement.onClick(() => {\n\t\t\t\t\t\t// show pop up first?\n\t\t\t\t\t\tgo(\"game\", {})\n\t\t\t\t\t})\n\n\t\t\t\t\tvar levelNameText = levelElement.add([\n\t\t\t\t\t\tpos(-120, 16),\n\t\t\t\t\t\tanchor(\"left\"),\n\t\t\t\t\t\ttext(level.name, {\n\t\t\t\t\t\t\tsize: 16\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tcolor(0),\n\t\t\t\t\t])\n\n\t\t\t\t\tvar levelCreatorNameText = levelElement.add([\n\t\t\t\t\t\tpos(-120, 48),\n\t\t\t\t\t\tanchor(\"left\"),\n\t\t\t\t\t\ttext(players[level.creatorId].name, {\n\t\t\t\t\t\t\tsize: 16\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tcolor(0),\n\t\t\t\t\t])\n\n\t\t\t\t\tvar levelInfoButton = levelElement.add([\n\t\t\t\t\t\tpos(120, 48),\n\t\t\t\t\t\tanchor(\"right\"),\n\t\t\t\t\t\trect(24, 24),\n\t\t\t\t\t\tcolor(0),\n\t\t\t\t\t])\n\t\t\t\t\tlevelInfoButton.radius = 8;\n\n\t\t\t\t\tvar levelInfoI = levelInfoButton.add([\n\t\t\t\t\t\tpos(-12, 0),\n\t\t\t\t\t\tanchor(\"center\"),\n\t\t\t\t\t\ttext(\"i\", {\n\t\t\t\t\t\t\tsize: 22,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tcolor(255, 255, 255),\n\t\t\t\t\t])\n\n\t\t\t\t\ti++\n\t\t\t\t}\n\n\t\t\t})\n\n\t\t\t// way to exit\n\t\t\tonKeyPress(\"space\", () => {\n\t\t\t\tgo(\"menu\")\n\t\t\t})\n\n\t\t}\n\t})\n\n}", "export default function levels() {\n\n\tvar l = [\n\t\t// this is a level\n\n\t\t[\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t14,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t53,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t58,\n\t\t\t\t59,\n\t\t\t\t59,\n\t\t\t\t60,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t80,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t36,\n\t\t\t\t35,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t80,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t86,\n\t\t\t\t16,\n\t\t\t\t17,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t]\n\t\t],\n\n\t\t[\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t0,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t36,\n\t\t\t\t17,\n\t\t\t\t-1,\n\t\t\t\t86,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t80,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t82,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t14,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t53,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t80,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t0,\n\t\t\t\t20,\n\t\t\t\t0,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t87,\n\t\t\t\t149,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t149,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t58,\n\t\t\t\t59,\n\t\t\t\t60,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t]\n\t\t],\n\n\t\t[\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t3,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t119,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t23,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t119,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t23,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t23,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t23,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t5,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t24,\n\t\t\t\t25,\n\t\t\t\t26,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t42,\n\t\t\t\t43,\n\t\t\t\t44,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t150,\n\t\t\t\t-1,\n\t\t\t\t150,\n\t\t\t\t118\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t149,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t82,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t170,\n\t\t\t\t-1,\n\t\t\t\t53,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t80,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t]\n\t\t],\n\n\t\t[\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t144,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t144,\n\t\t\t\t145,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t144,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t144,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t144,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t150,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t150,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t144,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t23,\n\t\t\t\t-1,\n\t\t\t\t150,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t144,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t23,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t126,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t23,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t118,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t126,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t88,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t4,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t126,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t82,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t42,\n\t\t\t\t43,\n\t\t\t\t43,\n\t\t\t\t43,\n\t\t\t\t43,\n\t\t\t\t118,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t144,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t126,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t144,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t82,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t126,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t144,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t125,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t144,\n\t\t\t\t143,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t125,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t146,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t82,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t144,\n\t\t\t\t145,\n\t\t\t\t145,\n\t\t\t\t146,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t108,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t110,\n\t\t\t\t108,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t82,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t123,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t119,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t120,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t150,\n\t\t\t\t150,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t125,\n\t\t\t\t-1,\n\t\t\t\t110,\n\t\t\t\t108,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t118,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t119,\n\t\t\t\t120,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t110,\n\t\t\t\t108,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t82,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t150,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t150,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t123,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t53,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t125,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t110,\n\t\t\t\t108,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t80,\n\t\t\t\t81,\n\t\t\t\t81\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t123,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t82,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t20,\n\t\t\t\t113,\n\t\t\t\t20,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t125,\n\t\t\t\t-1,\n\t\t\t\t110,\n\t\t\t\t108,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t82,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t58,\n\t\t\t\t59,\n\t\t\t\t60,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t80,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t82,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t110,\n\t\t\t\t108,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t98,\n\t\t\t\t99,\n\t\t\t\t99\n\t\t\t]\n\t\t],\n\t\t// level 5\n\n\t\t[\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t15,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t21,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t14,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t18,\n\t\t\t\t-1,\n\t\t\t\t18,\n\t\t\t\t16,\n\t\t\t\t17,\n\t\t\t\t18,\n\t\t\t\t-1,\n\t\t\t\t18,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t81,\n\t\t\t\t82,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t0,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t53,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t21,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t70,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t149,\n\t\t\t\t0,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t31,\n\t\t\t\t31,\n\t\t\t\t31,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t0,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t99,\n\t\t\t\t100,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t47,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1,\n\t\t\t\t-1\n\t\t\t]\n\t\t],\n\n\t\t// level 6\n\n\n\n\t]\n\n\treturn l;\n}", "import kaboom from \"kaboom\"\nimport ssControllerComponent from \"./plugins/ssControllerComponent\"\nimport GridComponent from \"./plugins/Grid/gridComponent.js\"\nimport GameManager from \"./plugins/GameManager/gameManager\"\nimport menuScene from \"./scenes/menuScene\"\nimport gameScene from \"./scenes/gameScene\"\nimport levelEditScene from \"./scenes/levelEditScene\"\nimport customLevelScene from \"./scenes/customLevelScene\"\nimport prebuiltLevels from \"./levels\"\n\n// database\n\nvar levels = prebuiltLevels();\n\nconsole.log(replit);\n\nreplit.setData(\"p_locked\", false);\nreplit.setData(\"levels\", { 0: createBasicLevel(0), 1: createBasicLevel(1), 2: createBasicLevel(2), 3: createBasicLevel(3), 4: createBasicLevel(4), 5: createBasicLevel(5) }).then(console.log)\n\nfunction createBasicLevel(i) {\n\treturn { levelId: i, creatorId: 501600, level: levels[0], name: \"Sandwiches are good\", difficulty: 0 }\n}\n\n// initialize context\nkaboom({\n\t//canvas: document.getElementById(\"cv\"),\n\twidth: 640,\n\theight: 480,\n\tbackground: [0, 0, 0],\n})\n\n// plugins\nplug(ssControllerComponent);\nplug(GridComponent);\nplug(GameManager);\n\n// load sprites\n\nvar s = 16;\n\nvar cellSize = 16;\nvar width = 320;\nvar height = 320;\nvar count = 0;\n\nloadSpriteAtlas(\"sprites/1bitplatformer.png\", getAtlas());\n\nvar at = loadSpriteAtlas(\"sprites/1bitplatformer.png\", {\n\t\"void\": {\n\t\t\"x\": 0,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"miniCoin\": {\n\t\t\"x\": s,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"coin\": {\n\t\t\"x\": s * 2,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"chain\": {\n\t\t\"x\": s * 3,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s * 3,\n\t\t\"sliceY\": 3,\n\t},\n\t\"chain-grab\": {\n\t\t\"x\": s * 4,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sus-plat-chain\": {\n\t\t\"x\": s * 5,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"chain-hook\": {\n\t\t\"x\": s * 6,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"exclam-white-o\": {\n\t\t\"x\": s * 7,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"coin-white-o\": {\n\t\t\"x\": s * 8,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plate-white-o\": {\n\t\t\"x\": s * 9,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"cross-white-o\": {\n\t\t\"x\": s * 10,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"special-white-o\": {\n\t\t\"x\": s * 11,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"pipe-top\": {\n\t\t\"x\": s * 12,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plant-hill\": {\n\t\t\"x\": s * 13,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"tree-oak\": {\n\t\t\"x\": s * 14,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s * 2,\n\t},\n\t\"tree-pine\": {\n\t\t\"x\": s * 15,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s * 3,\n\t},\n\t\"plant-flower-mini\": {\n\t\t\"x\": s * 16,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plant-flower\": {\n\t\t\"x\": s * 17,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plant-grass\": {\n\t\t\"x\": s * 18,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plant-vine\": {\n\t\t\"x\": s * 19,\n\t\t\"y\": 0,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t//pt2\n\t\"bit1\": {\n\t\t\"x\": 0,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"bit2\": {\n\t\t\"x\": s,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"bit3\": {\n\t\t\"x\": s * 2,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"chain-link\": {\n\t\t\"x\": s * 3,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sus-plat-link-left\": {\n\t\t\"x\": s * 4,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sus-plat-link-mid\": {\n\t\t\"x\": s * 5,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sus-plat-link-right\": {\n\t\t\"x\": s * 6,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"exclam-black-o\": {\n\t\t\"x\": s * 7,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"coin-black-o\": {\n\t\t\"x\": s * 8,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plate-black-o\": {\n\t\t\"x\": s * 9,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"cross-black-o\": {\n\t\t\"x\": s * 10,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"special-black-o\": {\n\t\t\"x\": s * 11,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"pipe-mid\": {\n\t\t\"x\": s * 12,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"tree-weird\": {\n\t\t\"x\": s * 13,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plant-bush-mini\": {\n\t\t\"x\": s * 16,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plant-bush\": {\n\t\t\"x\": s * 17,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plant-grass-tall\": {\n\t\t\"x\": s * 18,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plant-vine-bottom\": {\n\t\t\"x\": s * 19,\n\t\t\"y\": s,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t// row 3\n\t\"heart-mini\": {\n\t\t\"x\": 0,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"heart\": {\n\t\t\"x\": s,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"heart-full\": {\n\t\t\"x\": s * 2,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"chain-bottom\": {\n\t\t\"x\": s * 3,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sus-plat-plat-left\": {\n\t\t\"x\": s * 4,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sus-plat-plat-mid\": {\n\t\t\"x\": s * 5,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sus-plat-plat-right\": {\n\t\t\"x\": s * 6,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"exclam-white\": {\n\t\t\"x\": s * 7,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"coin-white\": {\n\t\t\"x\": s * 8,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plate-white\": {\n\t\t\"x\": s * 9,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"cross-white\": {\n\t\t\"x\": s * 10,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"special-white-o-2\": {\n\t\t\"x\": s * 11,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"pipe-bottom\": {\n\t\t\"x\": s * 12,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"tree-weird-bottom\": {\n\t\t\"x\": s * 13,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plant-mushroom\": {\n\t\t\"x\": s * 14,\n\t\t\"y\": s * 2,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"door\": {\n\t\t\"x\": s * 16,\n\t\t\"y\": s * 2,\n\t\t\"width\": s * 4,\n\t\t\"height\": s,\n\t\t\"sliceX\": 4,\n\t\t\"anims\": {\n\t\t\t\"closed\": {\n\t\t\t\t\"from\": 0,\n\t\t\t\t\"to\": 0,\n\t\t\t},\n\t\t\t\"locked\": {\n\t\t\t\t\"from\": 1,\n\t\t\t\t\"to\": 1,\n\t\t\t},\n\t\t\t\"open\": {\n\t\t\t\t\"from\": 2,\n\t\t\t\t\"to\": 3,\n\t\t\t\t\"speed\": 3,\n\t\t\t}\n\t\t}\n\t},\n\t// row 4\n\t\"ladder-top\": {\n\t\t\"x\": 0,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ladder-small-top\": {\n\t\t\"x\": s,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"gem\": {\n\t\t\"x\": s * 2,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat1-single\": {\n\t\t\"x\": s * 3,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat1-left\": {\n\t\t\"x\": s * 4,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat1-mid\": {\n\t\t\"x\": s * 5,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat1-right\": {\n\t\t\"x\": s * 6,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"exclam-black\": {\n\t\t\"x\": s * 7,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"coin-black\": {\n\t\t\"x\": s * 8,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plate-black\": {\n\t\t\"x\": s * 9,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"cross-black\": {\n\t\t\"x\": s * 10,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"special-weird\": {\n\t\t\"x\": s * 11,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sign-left\": {\n\t\t\"x\": s * 12,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sign-right\": {\n\t\t\"x\": s * 13,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sign-up\": {\n\t\t\"x\": s * 14,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sign-down\": {\n\t\t\"x\": s * 15,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sign-blank\": {\n\t\t\"x\": s * 16,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sign-exclam\": {\n\t\t\"x\": s * 17,\n\t\t\"y\": s * 3,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"double-door\": {\n\t\t\"x\": s * 18,\n\t\t\"y\": s * 3,\n\t\t\"width\": s * 2,\n\t\t\"height\": s * 2,\n\t\t\"sliceY\": 2,\n\t\t\"anims\": {\n\t\t\t\"closed\": {\n\t\t\t\t\"from\": 0,\n\t\t\t\t\"to\": 0,\n\t\t\t},\n\t\t\t\"open\": {\n\t\t\t\t\"from\": 0,\n\t\t\t\t\"to\": 1,\n\t\t\t},\n\t\t},\n\t},\n\t// row 5\n\t\"ladder-middle\": {\n\t\t\"x\": 0,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ladder-small-middle\": {\n\t\t\"x\": s,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"gem-full\": {\n\t\t\"x\": s * 2,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat2-single\": {\n\t\t\"x\": s * 3,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat2-left\": {\n\t\t\"x\": s * 4,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat2-mid\": {\n\t\t\"x\": s * 5,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat2-right\": {\n\t\t\"x\": s * 6,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-top-left\": {\n\t\t\"x\": s * 7,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-top\": {\n\t\t\"x\": s * 8,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-top-right\": {\n\t\t\"x\": s * 9,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"special-empty\": {\n\t\t\"x\": s * 10,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"special-glass\": {\n\t\t\"x\": s * 11,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sign-left-arrow\": {\n\t\t\"x\": s * 12,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sign-right-arrow\": {\n\t\t\"x\": s * 13,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sign-up-arrow\": {\n\t\t\"x\": s * 14,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sign-down-arrow\": {\n\t\t\"x\": s * 15,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"key-large\": {\n\t\t\"x\": s * 16,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"key\": {\n\t\t\"x\": s * 17,\n\t\t\"y\": s * 4,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t// row 6\n\t\"ladder-middle-2\": {\n\t\t\"x\": 0,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ladder-small-middle-2\": {\n\t\t\"x\": s,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"gem-2\": {\n\t\t\"x\": s * 2,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat3-single\": {\n\t\t\"x\": s * 3,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat3-left\": {\n\t\t\"x\": s * 4,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat3-mid\": {\n\t\t\"x\": s * 5,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat3-right\": {\n\t\t\"x\": s * 6,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-left\": {\n\t\t\"x\": s * 7,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-middle\": {\n\t\t\"x\": s * 8,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-right\": {\n\t\t\"x\": s * 9,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-top-left\": {\n\t\t\"x\": s * 10,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-top\": {\n\t\t\"x\": s * 11,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-top-right\": {\n\t\t\"x\": s * 12,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-single-top\": {\n\t\t\"x\": s * 13,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"connector1\": {\n\t\t\"x\": s * 14,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-top-left\": {\n\t\t\"x\": s * 15,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-top\": {\n\t\t\"x\": s * 16,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-top-right\": {\n\t\t\"x\": s * 17,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-single-top\": {\n\t\t\"x\": s * 18,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"connector2\": {\n\t\t\"x\": s * 19,\n\t\t\"y\": s * 5,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t// row 7\n\t\"ladder-bottom\": {\n\t\t\"x\": 0,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ladder-small-bottom\": {\n\t\t\"x\": s,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"spikes\": {\n\t\t\"x\": s * 2,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"conveyor-single\": {\n\t\t\"x\": s * 3,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"conveyor-left\": {\n\t\t\"x\": s * 4,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"conveyor-mid\": {\n\t\t\"x\": s * 5,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"conveyor-right\": {\n\t\t\"x\": s * 6,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-bot-left\": {\n\t\t\"x\": s * 7,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-bot-middle\": {\n\t\t\"x\": s * 8,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-bot-right\": {\n\t\t\"x\": s * 9,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-left\": {\n\t\t\"x\": s * 10,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-mid\": {\n\t\t\"x\": s * 11,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-right\": {\n\t\t\"x\": s * 12,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-single-mid\": {\n\t\t\"x\": s * 13,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"connector3\": {\n\t\t\"x\": s * 14,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-left\": {\n\t\t\"x\": s * 15,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-mid\": {\n\t\t\"x\": s * 16,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-right\": {\n\t\t\"x\": s * 17,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-single-mid\": {\n\t\t\"x\": s * 18,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"connector4\": {\n\t\t\"x\": s * 19,\n\t\t\"y\": s * 6,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t// row 8\n\t\"bridge\": {\n\t\t\"x\": 0,\n\t\t\"y\": s * 7,\n\t\t\"width\": s * 3,\n\t\t\"height\": s * 2,\n\t},\n\t\"plat4-single\": {\n\t\t\"x\": s * 3,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat4-left\": {\n\t\t\"x\": s * 4,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat4-mid\": {\n\t\t\"x\": s * 5,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"plat4-right\": {\n\t\t\"x\": s * 6,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-tree-top-left\": {\n\t\t\"x\": s * 7,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-tree-top-mid\": {\n\t\t\"x\": s * 8,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-tree-top-right\": {\n\t\t\"x\": s * 9,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-bot-left\": {\n\t\t\"x\": s * 10,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-bot-mid\": {\n\t\t\"x\": s * 11,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-bot-right\": {\n\t\t\"x\": s * 12,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-single-bot\": {\n\t\t\"x\": s * 13,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"connector5\": {\n\t\t\"x\": s * 14,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-bot-left\": {\n\t\t\"x\": s * 15,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-bot-mid\": {\n\t\t\"x\": s * 16,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-bot-right\": {\n\t\t\"x\": s * 17,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-single-bot\": {\n\t\t\"x\": s * 18,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"connector6\": {\n\t\t\"x\": s * 19,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t// row 9\n\t\"spring\": {\n\t\t\"x\": s * 3,\n\t\t\"y\": s * 8,\n\t\t\"width\": s * 3,\n\t\t\"height\": s,\n\t\t\"sliceX\": 3,\n\t\t\"anims\": {\n\t\t\t\"idle\": {\n\t\t\t\t\"from\": 2,\n\t\t\t\t\"to\": 2,\n\t\t\t},\n\t\t\t\"bounce\": {\n\t\t\t\t\"from\": 2,\n\t\t\t\t\"to\": 0,\n\t\t\t\t\"speed\": 20,\n\t\t\t},\n\t\t\t\"debounce\": {\n\t\t\t\t\"from\": 0,\n\t\t\t\t\"to\": 2,\n\t\t\t\t\"speed\": 20,\n\t\t\t}\n\t\t}\n\t},\n\t\"icicles\": {\n\t\t\"x\": s * 6,\n\t\t\"y\": s * 8,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-tree-left\": {\n\t\t\"x\": s * 7,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-tree-mid\": {\n\t\t\"x\": s * 8,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-tree-right\": {\n\t\t\"x\": s * 9,\n\t\t\"y\": s * 7,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-horiz-left\": {\n\t\t\"x\": s * 10,\n\t\t\"y\": s * 8,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-horiz-mid\": {\n\t\t\"x\": s * 11,\n\t\t\"y\": s * 8,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-horiz-right\": {\n\t\t\"x\": s * 12,\n\t\t\"y\": s * 8,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground2-single\": {\n\t\t\"x\": s * 13,\n\t\t\"y\": s * 8,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"connector7\": {\n\t\t\"x\": s * 14,\n\t\t\"y\": s * 8,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-horiz-left\": {\n\t\t\"x\": s * 15,\n\t\t\"y\": s * 8,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-horiz-mid\": {\n\t\t\"x\": s * 16,\n\t\t\"y\": s * 8,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-horiz-right\": {\n\t\t\"x\": s * 17,\n\t\t\"y\": s * 8,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground3-single\": {\n\t\t\"x\": s * 18,\n\t\t\"y\": s * 8,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"connector8\": {\n\t\t\"x\": s * 19,\n\t\t\"y\": s * 8,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t// row 10\n\t\"support-top-left\": {\n\t\t\"x\": 0,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"support-top\": {\n\t\t\"x\": s,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"support-top-right\": {\n\t\t\"x\": s * 2,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"spikes-trap\": {\n\t\t\"x\": s * 3,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s * 3,\n\t\t\"sliceY\": 2,\n\t\t\"anims\": {\n\t\t\t\"inactive\": {\n\t\t\t\t\"from\": 1,\n\t\t\t\t\"to\": 1,\n\t\t\t},\n\t\t\t\"activate\": {\n\t\t\t\t\"from\": 1,\n\t\t\t\t\"to\": 0,\n\t\t\t},\n\t\t},\n\t},\n\t\"sign-post-left\": {\n\t\t\"x\": s * 4,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sign-post-exclam\": {\n\t\t\"x\": s * 5,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"sign-post-right\": {\n\t\t\"x\": s * 6,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-tree-mid2-left\": {\n\t\t\"x\": s * 7,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-tree-mid2-left\": {\n\t\t\"x\": s * 8,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground-tree-mid2-right\": {\n\t\t\"x\": s * 9,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground4-top-left\": {\n\t\t\"x\": s * 10,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground4-top-mid\": {\n\t\t\"x\": s * 11,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground4-top-right\": {\n\t\t\"x\": s * 12,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground4-single-top\": {\n\t\t\"x\": s * 13,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"connector9\": {\n\t\t\"x\": s * 14,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground5-top-left\": {\n\t\t\"x\": s * 15,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground5-top-mid\": {\n\t\t\"x\": s * 16,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground5-top-right\": {\n\t\t\"x\": s * 17,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"ground5-single-top\": {\n\t\t\"x\": s * 18,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t\"connector10\": {\n\t\t\"x\": s * 19,\n\t\t\"y\": s * 9,\n\t\t\"width\": s,\n\t\t\"height\": s,\n\t},\n\t// row 11 (TODO: After sign-post-exclam)\n\n\n\t// extras\n\t\"player\": {\n\t\t\"x\": 0,\n\t\t\"y\": s * 12,\n\t\t\"width\": s * 7,\n\t\t\"height\": s * 4,\n\t\t\"sliceX\": 7,\n\t\t\"sliceY\": 4,\n\t\t\"anims\": {\n\t\t\t\"run0\": {\n\t\t\t\t\"from\": 1,\n\t\t\t\t\"to\": 4,\n\t\t\t\t\"speed\": 10,\n\t\t\t\t\"loop\": true,\n\t\t\t},\n\t\t\t\"run1\": {\n\t\t\t\t\"from\": 1 + 7,\n\t\t\t\t\"to\": 4 + 7,\n\t\t\t\t\"speed\": 10,\n\t\t\t\t\"loop\": true,\n\t\t\t},\n\t\t\t\"run2\": {\n\t\t\t\t\"from\": 1 + 7 * 2,\n\t\t\t\t\"to\": 4 + 7 * 2,\n\t\t\t\t\"speed\": 10,\n\t\t\t\t\"loop\": true,\n\t\t\t},\n\t\t\t\"run3\": {\n\t\t\t\t\"from\": 1 + 7 * 3,\n\t\t\t\t\"to\": 4 + 7 * 3,\n\t\t\t\t\"speed\": 10,\n\t\t\t\t\"loop\": true,\n\t\t\t},\n\t\t\t\"idle0\": {\n\t\t\t\t\"from\": 0,\n\t\t\t\t\"to\": 0,\n\t\t\t\t\"loop\": true,\n\t\t\t},\n\t\t\t\"idle1\": {\n\t\t\t\t\"from\": 7,\n\t\t\t\t\"to\": 7,\n\t\t\t\t\"loop\": true,\n\t\t\t},\n\t\t\t\"idle2\": {\n\t\t\t\t\"from\": 14,\n\t\t\t\t\"to\": 14,\n\t\t\t\t\"loop\": true,\n\t\t\t},\n\t\t\t\"idle3\": {\n\t\t\t\t\"from\": 21,\n\t\t\t\t\"to\": 21,\n\t\t\t\t\"loop\": true,\n\t\t\t},\n\t\t},\n\t}\n});\n\nvar data = loadData();\n\ndata.levelID = 0;\n\nat.onFinish(() => {\n\tvar a = Object.keys(at.data)\n\tvar d = Object.values(at.data)\n\n\tvar dict = {}\n\tfor (var i = 0; i < a.length; i++) {\n\t\tdict[i] = new LevelObject(a[i])\n\t\tswitch (i) {\n\t\t\tcase 7:\n\t\t\tcase 8:\n\t\t\tcase 9:\n\t\t\tcase 10:\n\t\t\tcase 11:\n\t\t\tcase 27:\n\t\t\tcase 28:\n\t\t\tcase 29:\n\t\t\tcase 30:\n\t\t\tcase 31:\n\t\t\tcase 81:\n\t\t\tcase 82:\n\t\t\tcase 100:\n\t\t\tcase 119:\n\t\t\t\tdict[i].type = \"block\"\n\t\t\t\tbreak;\n\t\t\tcase 98:\n\t\t\tcase 80:\n\t\t\tcase 118:\n\t\t\t\tdict[i].type = \"left_block\";\n\t\t\t\tbreak;\n\t\t\tcase 120:\n\t\t\t\tdict[i].type = \"right_block\";\n\t\t\t\tbreak;\n\t\t\tcase 20:\n\t\t\t\tdict[i].type = \"coin\"\n\t\t\t\tbreak;\n\t\t\tcase 149:\n\t\t\t\tdict[i].type = \"spring\"\n\t\t\t\tbreak;\n\t\t\tcase 14:\n\t\t\tcase 16:\n\t\t\tcase 17:\n\t\t\tcase 36:\n\t\t\tcase 35:\n\t\t\tcase 86:\n\t\t\t\tdict[i].type = \"decoration\"\n\t\t\t\tbreak;\n\t\t\tcase 113:\n\t\t\tcase 150:\n\t\t\t\tdict[i].type = \"spikes\"\n\t\t\t\tbreak;\n\t\t\tcase 53:\n\t\t\t\tdict[i].type = \"door\"\n\t\t\t\tbreak;\n\t\t\tcase 42:\n\t\t\tcase 43:\n\t\t\tcase 44:\n\t\t\tcase 58:\n\t\t\tcase 59:\n\t\t\tcase 60:\n\t\t\t\tdict[i].type = \"platform\"\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\tdata[\"spriteDict\"] = dict\n})\n\nfunction getAtlas() {\n\tvar atlas = [];\n\tfor (var i = 0; i < width / cellSize; i++) {\n\t\tfor (var j = 0; j < height / cellSize; j++) {\n\t\t\tvar k = \"\" + count;\n\t\t\tatlas[k] = [];\n\t\t\tatlas[k][\"x\"] = i * cellSize;\n\t\t\tatlas[k][\"y\"] = j * cellSize;\n\t\t\tatlas[k][\"width\"] = cellSize;\n\t\t\tatlas[k][\"height\"] = cellSize;\n\t\t\tcount++;\n\t\t}\n\t}\n\treturn atlas;\n}\n\n// sounds\nloadSound(\"score\", \"sounds/score.mp3\");\nloadSound(\"blip\", \"sounds/blip.mp3\");\nloadSound(\"spring\", \"sounds/spring.mp3\");\nloadSound(\"explode\", \"sounds/explode.mp3\");\n\n// load levels\ndata[\"levels\"] = prebuiltLevels()\n\n// scenes\nscene(\"menu\", menuScene);\nscene(\"game\", gameScene);\nscene(\"levelEdit\", levelEditScene);\nscene(\"customLevel\", customLevelScene)\n\n// go\ngo(\"menu\");\n\n// debug\ndebug.inspect = false;\n\n// additional\n\nclass LevelObject {\n\n\tstatic typeDict = {\n\t\t\"default\": (s) => [\n\t\t\tpos(),\n\t\t\tsprite(s),\n\t\t\tscale(2),\n\t\t\toffscreen({ hide: true }),\n\t\t],\n\t}\n\n\tconstructor(sprite) {\n\t\tthis.sprite = sprite\n\t\tthis.type = \"default\";\n\t}\n\n\tsetType(type) {\n\t\tthis.type = type\n\t}\n\n\t/**\n\t *\tReturns the type dictionary and the callback with this.sprite as a parameter\n\t */\n\tgetTypeOutput() {\n\t\treturn [LevelObject.typeDict[this.type], this.sprite];\n\t}\n\n\t/**\t\n\t *\tDefines type of dictionary\n\t */\n\tstatic setTypeOutput(type, callback) {\n\t\tLevelObject.typeDict[type] = callback\n\t}\n\n}\n\nLevelObject.setTypeOutput(\"block\", (s) => [\n\tpos(),\n\tsprite(s),\n\tarea(),\n\tscale(2),\n\tbody({ isStatic: true }),\n\toffscreen({ hide: true, paused: true }),\n])\n\nLevelObject.setTypeOutput(\"left_block\", (s) => [\n\tpos(),\n\tsprite(s),\n\tarea({ shape: new Rect(vec2(2, 0), 14, 16) }),\n\tscale(2),\n\tbody({ isStatic: true }),\n\toffscreen({ hide: true }),\n])\n\nLevelObject.setTypeOutput(\"right_block\", (s) => [\n\tpos(),\n\tsprite(s),\n\tarea({ shape: new Rect(vec2(0, 0), 14, 16) }),\n\tscale(2),\n\tbody({ isStatic: true }),\n\toffscreen({ hide: true }),\n])\n\nLevelObject.setTypeOutput(\"coin\", (s) => [\n\tpos(),\n\tsprite(\"21\"),\n\tarea({ shape: new Rect(vec2(3, 3), 10, 10) }),\n\tscale(2),\n\toffscreen({ hide: true }),\n\t{\n\t\tadd() {\n\t\t\tthis.onCollide(\"player\", () => {\n\t\t\t\tdata.coins++\n\t\t\t\tplay(\"score\", { detune: data.coins * 100 })\n\t\t\t\tthis.destroy()\n\t\t\t})\n\t\t}\n\t}\n])\n\nLevelObject.setTypeOutput(\"spring\", (s) => [\n\tpos(),\n\tsprite(s, { anim: \"idle\" }),\n\tarea({ shape: new Rect(vec2(0), 16, 16) }),\n\tscale(2),\n\tbody({ isStatic: true }),\n\toffscreen({ hide: true }),\n\t\"spring\",\n\t{\n\t\tadd() {\n\t\t\tthis.onAnimEnd(\"bounce\", () => {\n\t\t\t\tthis.play(\"debounce\")\n\t\t\t});\n\t\t\tthis.onAnimEnd(\"debounce\", () => {\n\t\t\t\tthis.play(\"idle\")\n\t\t\t})\n\t\t},\n\t\tupdate() {\n\t\t\tvar f = this.frame;\n\t\t\tswitch (f) {\n\t\t\t\tcase 0:\n\t\t\t\t\tthis.area.shape = new Rect(vec2(0, 8), 16, 8)\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tthis.area.shape = new Rect(vec2(0, 4), 16, 12)\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\tcase 2:\n\t\t\t\t\tthis.area.shape = new Rect(vec2(0), 16, 16)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n])\n\nLevelObject.setTypeOutput(\"platform\", (s) => [\n\tpos(),\n\tsprite(s),\n\tarea({ shape: new Rect(vec2(0), 16, 8) }),\n\tscale(2),\n\tbody({ isStatic: true }),\n\toffscreen({ hide: true }),\n\t\"platform\",\n])\n\nLevelObject.setTypeOutput(\"spikes\", (s) => [\n\tpos(),\n\tsprite(s),\n\tarea(),\n\tscale(2),\n\tbody({ isStatic: true }),\n\toffscreen({ hide: true }),\n\t\"spike\",\n\t{\n\t\tadd() {\n\t\t\tthis.onCollide(\"player\", (p) => {\n\t\t\t\tvar pp = p.pos.add(16, 16);\n\t\t\t\tp.die = true;\n\t\t\t\tp.destroy();\n\t\t\t})\n\t\t},\n\t}\n])\n\nLevelObject.setTypeOutput(\"decoration\", (s) => [\n\tpos(0, 3),\n\tsprite(s),\n\tscale(2),\n\tz(-1),\n\toffscreen({ hide: true }),\n])\n\nLevelObject.setTypeOutput(\"door\", (s) => [\n\tpos(0, 3),\n\tsprite(s),\n\tarea(),\n\tscale(2),\n\tz(-1),\n\t\"door\",\n\toffscreen({ hide: true }),\n\t{\n\t\tadd() {\n\t\t\tthis.used = false;\n\t\t\tthis.player = null;\n\n\t\t\tthis.onAnimEnd()\n\n\t\t\tthis.onCollideUpdate((p) => {\n\t\t\t\tif (!p.is(\"player\"))\n\t\t\t\t\treturn\n\t\t\t\tif (isKeyDown(\"w\") || isKeyDown(\"up\") && !this.used) {\n\t\t\t\t\tthis.used = true\n\t\t\t\t\tp.kinematic = true\n\t\t\t\t\tvar d = this\n\t\t\t\t\tp.pos = d.pos\n\t\t\t\t\td.play(\"open\", {\n\t\t\t\t\t\tonEnd: () => {\n\t\t\t\t\t\t\tp.destroy()\n\t\t\t\t\t\t\tdata.levelID++\n\t\t\t\t\t\t\tif (data.levelID > data.levels.length - 1) {\n\t\t\t\t\t\t\t\tdata.levelID = 0\n\t\t\t\t\t\t\t\tconsole.log(\"What\")\n\t\t\t\t\t\t\t\tgo(\"menu\")\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.log(\"the heck\")\n\t\t\t\t\t\t\t\tgo(\"game\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n])"],
  "mappings": "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,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,MACD;AAAA,MAEA;AAAA,QACC;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,MACD;AAAA,MAEA;AAAA,QACC;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,MACD;AAAA,MAEA;AAAA,QACC;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,MACD;AAAA,MAGA;AAAA,QACC;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,QACA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,MACD;AAAA,IAMD;AAEA,WAAO;AAAA,EACR;AAl9GwB;;;ACYxB,MAAIC,UAAS,OAAe;AAE5B,UAAQ,IAAI,MAAM;AAElB,SAAO,QAAQ,YAAY,KAAK;AAChC,SAAO,QAAQ,UAAU,EAAE,GAAG,iBAAiB,CAAC,GAAG,GAAG,iBAAiB,CAAC,GAAG,GAAG,iBAAiB,CAAC,GAAG,GAAG,iBAAiB,CAAC,GAAG,GAAG,iBAAiB,CAAC,GAAG,GAAG,iBAAiB,CAAC,EAAE,CAAC,EAAE,KAAK,QAAQ,GAAG;AAE7L,WAAS,iBAAiB,GAAG;AAC5B,WAAO,EAAE,SAAS,GAAG,WAAW,QAAQ,OAAOA,QAAO,IAAI,MAAM,uBAAuB,YAAY,EAAE;AAAA,EACtG;AAFS;AAKT,KAAO;AAAA,IAEN,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,YAAY,CAAC,GAAG,GAAG,CAAC;AAAA,EACrB,CAAC;AAGD,OAAK,qBAAqB;AAC1B,OAAK,aAAa;AAClB,OAAK,WAAW;AAIhB,MAAI,IAAI;AAER,MAAI,WAAW;AACf,MAAIC,SAAQ;AACZ,MAAI,SAAS;AACb,MAAI,QAAQ;AAEZ,kBAAgB,8BAA8B,SAAS,CAAC;AAExD,MAAI,KAAK,gBAAgB,8BAA8B;AAAA,IACtD,QAAQ;AAAA,MACP,KAAK;AAAA,MACL,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,YAAY;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,QAAQ;AAAA,MACP,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,SAAS;AAAA,MACR,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU,IAAI;AAAA,MACd,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,kBAAkB;AAAA,MACjB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,kBAAkB;AAAA,MACjB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,iBAAiB;AAAA,MAChB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,iBAAiB;AAAA,MAChB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,YAAY;AAAA,MACX,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,YAAY;AAAA,MACX,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU,IAAI;AAAA,IACf;AAAA,IACA,aAAa;AAAA,MACZ,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU,IAAI;AAAA,IACf;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IAEA,QAAQ;AAAA,MACP,KAAK;AAAA,MACL,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,QAAQ;AAAA,MACP,KAAK;AAAA,MACL,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,QAAQ;AAAA,MACP,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,sBAAsB;AAAA,MACrB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,uBAAuB;AAAA,MACtB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,kBAAkB;AAAA,MACjB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,iBAAiB;AAAA,MAChB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,iBAAiB;AAAA,MAChB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,YAAY;AAAA,MACX,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IAEA,cAAc;AAAA,MACb,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,SAAS;AAAA,MACR,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,sBAAsB;AAAA,MACrB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,uBAAuB;AAAA,MACtB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,kBAAkB;AAAA,MACjB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,QAAQ;AAAA,MACP,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS,IAAI;AAAA,MACb,UAAU;AAAA,MACV,UAAU;AAAA,MACV,SAAS;AAAA,QACR,UAAU;AAAA,UACT,QAAQ;AAAA,UACR,MAAM;AAAA,QACP;AAAA,QACA,UAAU;AAAA,UACT,QAAQ;AAAA,UACR,MAAM;AAAA,QACP;AAAA,QACA,QAAQ;AAAA,UACP,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,SAAS;AAAA,QACV;AAAA,MACD;AAAA,IACD;AAAA,IAEA,cAAc;AAAA,MACb,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,OAAO;AAAA,MACN,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,aAAa;AAAA,MACZ,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,iBAAiB;AAAA,MAChB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,aAAa;AAAA,MACZ,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,WAAW;AAAA,MACV,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,aAAa;AAAA,MACZ,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS,IAAI;AAAA,MACb,UAAU,IAAI;AAAA,MACd,UAAU;AAAA,MACV,SAAS;AAAA,QACR,UAAU;AAAA,UACT,QAAQ;AAAA,UACR,MAAM;AAAA,QACP;AAAA,QACA,QAAQ;AAAA,UACP,QAAQ;AAAA,UACR,MAAM;AAAA,QACP;AAAA,MACD;AAAA,IACD;AAAA,IAEA,iBAAiB;AAAA,MAChB,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,uBAAuB;AAAA,MACtB,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,YAAY;AAAA,MACX,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,aAAa;AAAA,MACZ,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,iBAAiB;AAAA,MAChB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,iBAAiB;AAAA,MAChB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,iBAAiB;AAAA,MAChB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,aAAa;AAAA,MACZ,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,OAAO;AAAA,MACN,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IAEA,mBAAmB;AAAA,MAClB,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,yBAAyB;AAAA,MACxB,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,SAAS;AAAA,MACR,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,aAAa;AAAA,MACZ,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,iBAAiB;AAAA,MAChB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,sBAAsB;AAAA,MACrB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,sBAAsB;AAAA,MACrB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IAEA,iBAAiB;AAAA,MAChB,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,uBAAuB;AAAA,MACtB,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,UAAU;AAAA,MACT,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,iBAAiB;AAAA,MAChB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,kBAAkB;AAAA,MACjB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,iBAAiB;AAAA,MAChB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,sBAAsB;AAAA,MACrB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,iBAAiB;AAAA,MAChB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,sBAAsB;AAAA,MACrB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IAEA,UAAU;AAAA,MACT,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS,IAAI;AAAA,MACb,UAAU,IAAI;AAAA,IACf;AAAA,IACA,gBAAgB;AAAA,MACf,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,aAAa;AAAA,MACZ,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,wBAAwB;AAAA,MACvB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,uBAAuB;AAAA,MACtB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,yBAAyB;AAAA,MACxB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,sBAAsB;AAAA,MACrB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,sBAAsB;AAAA,MACrB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IAEA,UAAU;AAAA,MACT,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS,IAAI;AAAA,MACb,UAAU;AAAA,MACV,UAAU;AAAA,MACV,SAAS;AAAA,QACR,QAAQ;AAAA,UACP,QAAQ;AAAA,UACR,MAAM;AAAA,QACP;AAAA,QACA,UAAU;AAAA,UACT,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,SAAS;AAAA,QACV;AAAA,QACA,YAAY;AAAA,UACX,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,SAAS;AAAA,QACV;AAAA,MACD;AAAA,IACD;AAAA,IACA,WAAW;AAAA,MACV,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,sBAAsB;AAAA,MACrB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,uBAAuB;AAAA,MACtB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,kBAAkB;AAAA,MACjB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,sBAAsB;AAAA,MACrB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,uBAAuB;AAAA,MACtB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,kBAAkB;AAAA,MACjB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IAEA,oBAAoB;AAAA,MACnB,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU,IAAI;AAAA,MACd,UAAU;AAAA,MACV,SAAS;AAAA,QACR,YAAY;AAAA,UACX,QAAQ;AAAA,UACR,MAAM;AAAA,QACP;AAAA,QACA,YAAY;AAAA,UACX,QAAQ;AAAA,UACR,MAAM;AAAA,QACP;AAAA,MACD;AAAA,IACD;AAAA,IACA,kBAAkB;AAAA,MACjB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,yBAAyB;AAAA,MACxB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,yBAAyB;AAAA,MACxB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,0BAA0B;AAAA,MACzB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,sBAAsB;AAAA,MACrB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACb,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,oBAAoB;AAAA,MACnB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,mBAAmB;AAAA,MAClB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,qBAAqB;AAAA,MACpB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,sBAAsB;AAAA,MACrB,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,MACd,KAAK,IAAI;AAAA,MACT,KAAK,IAAI;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,IAKA,UAAU;AAAA,MACT,KAAK;AAAA,MACL,KAAK,IAAI;AAAA,MACT,SAAS,IAAI;AAAA,MACb,UAAU,IAAI;AAAA,MACd,UAAU;AAAA,MACV,UAAU;AAAA,MACV,SAAS;AAAA,QACR,QAAQ;AAAA,UACP,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,SAAS;AAAA,UACT,QAAQ;AAAA,QACT;AAAA,QACA,QAAQ;AAAA,UACP,QAAQ,IAAI;AAAA,UACZ,MAAM,IAAI;AAAA,UACV,SAAS;AAAA,UACT,QAAQ;AAAA,QACT;AAAA,QACA,QAAQ;AAAA,UACP,QAAQ,IAAI,IAAI;AAAA,UAChB,MAAM,IAAI,IAAI;AAAA,UACd,SAAS;AAAA,UACT,QAAQ;AAAA,QACT;AAAA,QACA,QAAQ;AAAA,UACP,QAAQ,IAAI,IAAI;AAAA,UAChB,MAAM,IAAI,IAAI;AAAA,UACd,SAAS;AAAA,UACT,QAAQ;AAAA,QACT;AAAA,QACA,SAAS;AAAA,UACR,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,QAAQ;AAAA,QACT;AAAA,QACA,SAAS;AAAA,UACR,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,QAAQ;AAAA,QACT;AAAA,QACA,SAAS;AAAA,UACR,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,QAAQ;AAAA,QACT;AAAA,QACA,SAAS;AAAA,UACR,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,QAAQ;AAAA,QACT;AAAA,MACD;AAAA,IACD;AAAA,EACD,CAAC;AAED,MAAI,OAAO,SAAS;AAEpB,OAAK,UAAU;AAEf,KAAG,SAAS,MAAM;AACjB,QAAI,IAAI,OAAO,KAAK,GAAG,IAAI;AAC3B,QAAI,IAAI,OAAO,OAAO,GAAG,IAAI;AAE7B,QAAI,OAAO,CAAC;AACZ,aAAS,IAAI,GAAG,IAAI,EAAE,QAAQ,KAAK;AAClC,WAAK,KAAK,IAAI,YAAY,EAAE,EAAE;AAC9B,cAAQ,GAAG;AAAA,QACV,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACJ,eAAK,GAAG,OAAO;AACf;AAAA,QACD,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACJ,eAAK,GAAG,OAAO;AACf;AAAA,QACD,KAAK;AACJ,eAAK,GAAG,OAAO;AACf;AAAA,QACD,KAAK;AACJ,eAAK,GAAG,OAAO;AACf;AAAA,QACD,KAAK;AACJ,eAAK,GAAG,OAAO;AACf;AAAA,QACD,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACJ,eAAK,GAAG,OAAO;AACf;AAAA,QACD,KAAK;AAAA,QACL,KAAK;AACJ,eAAK,GAAG,OAAO;AACf;AAAA,QACD,KAAK;AACJ,eAAK,GAAG,OAAO;AACf;AAAA,QACD,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACJ,eAAK,GAAG,OAAO;AACf;AAAA,QACD;AACC;AAAA,MACF;AAAA,IACD;AACA,SAAK,gBAAgB;AAAA,EACtB,CAAC;AAED,WAAS,WAAW;AACnB,QAAI,QAAQ,CAAC;AACb,aAAS,IAAI,GAAG,IAAIA,SAAQ,UAAU,KAAK;AAC1C,eAASC,KAAI,GAAGA,KAAI,SAAS,UAAUA,MAAK;AAC3C,YAAI,IAAI,KAAK;AACb,cAAM,KAAK,CAAC;AACZ,cAAM,GAAG,OAAO,IAAI;AACpB,cAAM,GAAG,OAAOA,KAAI;AACpB,cAAM,GAAG,WAAW;AACpB,cAAM,GAAG,YAAY;AACrB;AAAA,MACD;AAAA,IACD;AACA,WAAO;AAAA,EACR;AAdS;AAiBT,YAAU,SAAS,kBAAkB;AACrC,YAAU,QAAQ,iBAAiB;AACnC,YAAU,UAAU,mBAAmB;AACvC,YAAU,WAAW,oBAAoB;AAGzC,OAAK,YAAY,OAAe;AAGhC,QAAM,QAAQ,SAAS;AACvB,QAAM,QAAQ,SAAS;AACvB,QAAM,aAAa,cAAc;AACjC,QAAM,eAAe,gBAAgB;AAGrC,KAAG,MAAM;AAGT,QAAM,UAAU;AAIhB,MAAM,eAAN,MAAkB;AAAA,IAWjB,YAAYC,SAAQ;AACnB,WAAK,SAASA;AACd,WAAK,OAAO;AAAA,IACb;AAAA,IAEA,QAAQ,MAAM;AACb,WAAK,OAAO;AAAA,IACb;AAAA,IAKA,gBAAgB;AACf,aAAO,CAAC,aAAY,SAAS,KAAK,OAAO,KAAK,MAAM;AAAA,IACrD;AAAA,IAKA,OAAO,cAAc,MAAM,UAAU;AACpC,mBAAY,SAAS,QAAQ;AAAA,IAC9B;AAAA,EAED;AAlCA,MAAM,cAAN;AAAM;AAEL,gBAFK,aAEE,YAAW;AAAA,IACjB,WAAW,CAACC,OAAM;AAAA,MACjB,IAAI;AAAA,MACJ,OAAOA,EAAC;AAAA,MACR,MAAM,CAAC;AAAA,MACP,UAAU,EAAE,MAAM,KAAK,CAAC;AAAA,IACzB;AAAA,EACD;AA2BD,cAAY,cAAc,SAAS,CAACA,OAAM;AAAA,IACzC,IAAI;AAAA,IACJ,OAAOA,EAAC;AAAA,IACR,KAAK;AAAA,IACL,MAAM,CAAC;AAAA,IACP,KAAK,EAAE,UAAU,KAAK,CAAC;AAAA,IACvB,UAAU,EAAE,MAAM,MAAM,QAAQ,KAAK,CAAC;AAAA,EACvC,CAAC;AAED,cAAY,cAAc,cAAc,CAACA,OAAM;AAAA,IAC9C,IAAI;AAAA,IACJ,OAAOA,EAAC;AAAA,IACR,KAAK,EAAE,OAAO,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC;AAAA,IAC5C,MAAM,CAAC;AAAA,IACP,KAAK,EAAE,UAAU,KAAK,CAAC;AAAA,IACvB,UAAU,EAAE,MAAM,KAAK,CAAC;AAAA,EACzB,CAAC;AAED,cAAY,cAAc,eAAe,CAACA,OAAM;AAAA,IAC/C,IAAI;AAAA,IACJ,OAAOA,EAAC;AAAA,IACR,KAAK,EAAE,OAAO,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC;AAAA,IAC5C,MAAM,CAAC;AAAA,IACP,KAAK,EAAE,UAAU,KAAK,CAAC;AAAA,IACvB,UAAU,EAAE,MAAM,KAAK,CAAC;AAAA,EACzB,CAAC;AAED,cAAY,cAAc,QAAQ,CAACA,OAAM;AAAA,IACxC,IAAI;AAAA,IACJ,OAAO,IAAI;AAAA,IACX,KAAK,EAAE,OAAO,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC;AAAA,IAC5C,MAAM,CAAC;AAAA,IACP,UAAU,EAAE,MAAM,KAAK,CAAC;AAAA,IACxB;AAAA,MACC,MAAM;AACL,aAAK,UAAU,UAAU,MAAM;AAC9B,eAAK;AACL,eAAK,SAAS,EAAE,QAAQ,KAAK,QAAQ,IAAI,CAAC;AAC1C,eAAK,QAAQ;AAAA,QACd,CAAC;AAAA,MACF;AAAA,IACD;AAAA,EACD,CAAC;AAED,cAAY,cAAc,UAAU,CAACA,OAAM;AAAA,IAC1C,IAAI;AAAA,IACJ,OAAOA,IAAG,EAAE,MAAM,OAAO,CAAC;AAAA,IAC1B,KAAK,EAAE,OAAO,IAAI,KAAK,KAAK,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC;AAAA,IACzC,MAAM,CAAC;AAAA,IACP,KAAK,EAAE,UAAU,KAAK,CAAC;AAAA,IACvB,UAAU,EAAE,MAAM,KAAK,CAAC;AAAA,IACxB;AAAA,IACA;AAAA,MACC,MAAM;AACL,aAAK,UAAU,UAAU,MAAM;AAC9B,eAAK,KAAK,UAAU;AAAA,QACrB,CAAC;AACD,aAAK,UAAU,YAAY,MAAM;AAChC,eAAK,KAAK,MAAM;AAAA,QACjB,CAAC;AAAA,MACF;AAAA,MACA,SAAS;AACR,YAAIC,KAAI,KAAK;AACb,gBAAQA,IAAG;AAAA,UACV,KAAK;AACJ,iBAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC;AAC5C;AAAA,UACD,KAAK;AACJ,iBAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG,IAAI,EAAE;AAC7C;AAAA,UACD;AAAA,UACA,KAAK;AACJ,iBAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,CAAC,GAAG,IAAI,EAAE;AAC1C;AAAA,QACF;AAAA,MACD;AAAA,IACD;AAAA,EACD,CAAC;AAED,cAAY,cAAc,YAAY,CAACD,OAAM;AAAA,IAC5C,IAAI;AAAA,IACJ,OAAOA,EAAC;AAAA,IACR,KAAK,EAAE,OAAO,IAAI,KAAK,KAAK,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;AAAA,IACxC,MAAM,CAAC;AAAA,IACP,KAAK,EAAE,UAAU,KAAK,CAAC;AAAA,IACvB,UAAU,EAAE,MAAM,KAAK,CAAC;AAAA,IACxB;AAAA,EACD,CAAC;AAED,cAAY,cAAc,UAAU,CAACA,OAAM;AAAA,IAC1C,IAAI;AAAA,IACJ,OAAOA,EAAC;AAAA,IACR,KAAK;AAAA,IACL,MAAM,CAAC;AAAA,IACP,KAAK,EAAE,UAAU,KAAK,CAAC;AAAA,IACvB,UAAU,EAAE,MAAM,KAAK,CAAC;AAAA,IACxB;AAAA,IACA;AAAA,MACC,MAAM;AACL,aAAK,UAAU,UAAU,CAAC,MAAM;AAC/B,cAAI,KAAK,EAAE,IAAI,IAAI,IAAI,EAAE;AACzB,YAAE,MAAM;AACR,YAAE,QAAQ;AAAA,QACX,CAAC;AAAA,MACF;AAAA,IACD;AAAA,EACD,CAAC;AAED,cAAY,cAAc,cAAc,CAACA,OAAM;AAAA,IAC9C,IAAI,GAAG,CAAC;AAAA,IACR,OAAOA,EAAC;AAAA,IACR,MAAM,CAAC;AAAA,IACP,EAAE,EAAE;AAAA,IACJ,UAAU,EAAE,MAAM,KAAK,CAAC;AAAA,EACzB,CAAC;AAED,cAAY,cAAc,QAAQ,CAACA,OAAM;AAAA,IACxC,IAAI,GAAG,CAAC;AAAA,IACR,OAAOA,EAAC;AAAA,IACR,KAAK;AAAA,IACL,MAAM,CAAC;AAAA,IACP,EAAE,EAAE;AAAA,IACJ;AAAA,IACA,UAAU,EAAE,MAAM,KAAK,CAAC;AAAA,IACxB;AAAA,MACC,MAAM;AACL,aAAK,OAAO;AACZ,aAAK,SAAS;AAEd,aAAK,UAAU;AAEf,aAAK,gBAAgB,CAAC,MAAM;AAC3B,cAAI,CAAC,EAAE,GAAG,QAAQ;AACjB;AACD,cAAI,UAAU,GAAG,KAAK,UAAU,IAAI,KAAK,CAAC,KAAK,MAAM;AACpD,iBAAK,OAAO;AACZ,cAAE,YAAY;AACd,gBAAI,IAAI;AACR,cAAE,MAAM,EAAE;AACV,cAAE,KAAK,QAAQ;AAAA,cACd,OAAO,MAAM;AACZ,kBAAE,QAAQ;AACV,qBAAK;AACL,oBAAI,KAAK,UAAU,KAAK,OAAO,SAAS,GAAG;AAC1C,uBAAK,UAAU;AACf,0BAAQ,IAAI,MAAM;AAClB,qBAAG,MAAM;AAAA,gBACV,OAAO;AACN,0BAAQ,IAAI,UAAU;AACtB,qBAAG,MAAM;AAAA,gBACV;AAAA,cACD;AAAA,YACD,CAAC;AAAA,UACF;AAAA,QACD,CAAC;AAAA,MACF;AAAA,IACD;AAAA,EACD,CAAC;",
  "names": ["deg2rad", "deg", "__name", "rad2deg", "rad", "clamp", "val", "min", "max", "lerp", "a", "b", "t", "map", "v", "l1", "h1", "l2", "h2", "mapc", "_Vec2", "x", "y", "angle", "args", "p2", "vec2", "s", "len", "n", "other", "Vec2", "__publicField", "Vec3", "z", "vec3", "_Color", "g", "arr", "hex", "result", "h", "l", "rgb", "hue2rgb", "p", "q", "r", "Color", "hsl2rgb", "Quad", "w", "quad", "Mat4", "m", "out", "i", "j", "p4", "f00", "f01", "f02", "f03", "f04", "f05", "f06", "f07", "f08", "f09", "f10", "f11", "f12", "f13", "f14", "f15", "f16", "f17", "f18", "det", "wave", "lo", "hi", "f", "A", "C", "M", "RNG", "seed", "defRNG", "randSeed", "rand", "randi", "chance", "choose", "list", "testRectRect", "r1", "r2", "testLineLineT", "denom", "ua", "ub", "testLineLine", "testRectLine", "testRectPoint", "pts", "Line", "pt", "testCirclePoint", "c", "testPolygonPoint", "poly", "p1", "Rect", "pos", "width", "height", "Polygon", "dx", "dy", "Circle", "center", "radius", "tr", "Ellipse", "rx", "ry", "sat", "overlap", "displacement", "axisProj", "min1", "max1", "min2", "max2", "o", "o1", "o2", "c1", "c2", "c3", "c4", "c5", "easings", "IDList", "id", "Event", "action", "cancel", "handle", "ev", "res", "EventHandler", "name", "deepEq", "t1", "t2", "k1", "k2", "k", "v1", "v2", "base64ToArrayBuffer", "base64", "binstr", "bytes", "dataURLToArrayBuffer", "url", "download", "filename", "downloadText", "text", "downloadJSON", "data", "downloadBlob", "blob", "isDataURL", "str", "uid", "FPSCounter", "dt", "Timer", "time", "VERSION", "KEY_ALIAS", "MOUSE_BUTTONS", "PREVENT_DEFAULT_KEYS", "ASCII_CHARS", "MIN_GAIN", "MAX_GAIN", "MIN_SPEED", "MAX_SPEED", "MIN_DETUNE", "MAX_DETUNE", "DEF_ANCHOR", "BG_GRID_SIZE", "DEF_FONT", "DBG_FONT", "DEF_TEXT_SIZE", "DEF_TEXT_CACHE_SIZE", "FONT_ATLAS_SIZE", "UV_PAD", "LOG_MAX", "VERTEX_FORMAT", "STRIDE", "sum", "MAX_BATCHED_QUAD", "MAX_BATCHED_VERTS", "MAX_BATCHED_INDICES", "VERT_TEMPLATE", "FRAG_TEMPLATE", "DEF_VERT", "DEF_FRAG", "COMP_DESC", "COMP_EVENTS", "processButtonState", "enterFullscreen", "el", "exitFullscreen", "getFullscreenElement", "anchorPt", "orig", "alignPt", "align", "createEmptyAudioBuffer", "ctx", "kaboom_default", "gopt", "gc", "app", "root", "canvas", "gscale", "stretchToParent", "pw", "ph", "cw", "ch", "pixelDensity", "styles", "gl", "Texture", "opt", "filter", "wrap", "img", "tex", "gfx", "defShader", "makeShader", "emptyTex", "vbuf", "offset", "ibuf", "bgTex", "SpriteData", "frames", "anims", "src", "slice", "loadImg", "SoundData", "buf", "resolve", "reject", "audio", "fetchArrayBuffer", "masterNode", "burpSnd", "burp_default", "err", "Asset", "loader", "asset", "AssetBucket", "loaded", "assets", "game", "make", "load", "prom", "loadProgress", "buckets", "bucket", "loadRoot", "path", "fetchURL", "fetchJSON", "fetchText", "loadFont", "font", "loadBitmapFont", "gw", "gh", "makeFont", "qw", "qh", "loadSpriteAtlas", "rej", "data2", "atlas", "info", "spr", "loadSprite", "loadPedit", "images", "loadAseprite", "imgSrc", "jsonSrc", "size", "anim", "loadShader", "vert", "frag", "isUrl", "resolveUrl", "vcode", "fcode", "loadSound", "loadBean", "bean_default", "getSprite", "getSound", "getFont", "getBitmapFont", "getShader", "resolveSprite", "resolveSound", "snd", "resolveShader", "shader", "resolveFont", "volume", "play", "pb", "doPlay", "pb2", "onLoad", "stopped", "srcNode", "gainNode", "startTime", "stopTime", "seek", "oldNode", "burp", "vertSrc", "fragSrc", "vertShader", "fragShader", "prog", "formatShaderError", "msg", "FMT", "match", "vertError", "fragError", "uniform", "loc", "chars", "cols", "charMap", "drawRaw", "verts", "indices", "fixed", "shaderSrc", "flush", "transform", "screen2ndc", "frameStart", "updateViewport", "drawUnscaled", "drawUVQuad", "frameEnd", "pushMatrix", "pushTranslate", "pushScale", "pushRotateX", "pushRotateY", "pushRotateZ", "pushRotate", "pushTransform", "popTransform", "color", "opacity", "uvPadX", "uvPadY", "qx", "qy", "drawTexture", "scale", "repX", "repY", "drawSprite", "getArcPts", "radiusX", "radiusY", "start", "end", "nverts", "step", "drawRect", "drawPolygon", "drawLine", "dis", "drawLines", "minLen", "drawCircle", "drawTriangle", "drawEllipse", "polyOpt", "npts", "drawStenciled", "content", "mask", "test", "drawMasked", "drawSubtracted", "getViewportScale", "ow", "oh", "applyCharTransform", "fchar", "TEXT_STYLE_RE", "compileStyledText", "charStyleMap", "renderText", "idxOffset", "origIdx", "fontAtlases", "formatText", "fontName", "c2d", "lineSpacing", "letterSpacing", "curX", "tw", "th", "lines", "curLine", "cursor", "lastSpace", "lastSpaceWidth", "fchars", "line", "ox", "idx", "localIdx", "style", "drawText", "drawFormattedText", "ftext", "isFullscreen", "prevWidth", "prevHeight", "pd", "ww", "wh", "rw", "rc", "sw", "sh", "rg", "canvasEvents", "docEvents", "winEvents", "windowToContent", "contentToView", "setMousePos", "mpos", "touches", "debug", "handleErr", "mousePos", "mouseDeltaPos", "isMousePressed", "isMouseDown", "isMouseReleased", "isMouseMoved", "isKeyPressed", "isKeyPressedRepeat", "isKeyDown", "isKeyReleased", "isVirtualButtonPressed", "btn", "isVirtualButtonDown", "isVirtualButtonReleased", "charInputted", "screenshot", "setCursor", "setFullscreen", "isTouchScreen", "updateFrame", "camPos", "camScale", "camRot", "shake", "intensity", "toScreen", "toWorld", "calcTransform", "obj", "comps", "compStates", "customState", "tag", "child", "comp", "state", "cleanups", "checkDeps", "dep", "func", "e", "cb", "on", "event", "promisifyEvent", "onUpdate", "add", "onDraw", "onAdd", "onDestroy", "onCollide", "col", "forAllCurrentAndFuture", "get", "onClick", "onMousePress", "events", "joinEventControllers", "onHover", "onHoverUpdate", "onHoverEnd", "wait", "actions", "loop", "curTimer", "newF", "onKeyDown", "onKeyPress", "onKeyPressRepeat", "onKeyRelease", "onMouseDown", "onMouseRelease", "onMouseMove", "onCharInput", "onTouchStart", "onTouchMove", "onTouchEnd", "onVirtualButtonPress", "onVirtualButtonDown", "onVirtualButtonRelease", "enterDebugMode", "toFixed", "enterBurpMode", "gravity", "dest", "speed", "diff", "rotate", "easeFunc", "tween", "anchor", "follow", "move", "dir", "d", "DEF_OFFSCREEN_DIS", "offscreen", "distance", "isOut", "screenRect", "area", "opts", "a1", "a2", "hovering", "localArea", "_a", "bbox", "getRenderProps", "sprite", "spriteData", "curAnim", "calcTexScale", "prevAnim", "update", "rect", "uvquad", "circle", "outline", "timer", "timers", "DEF_JUMP_FORCE", "MAX_VEL", "body", "velY", "curPlatform", "lastPlatformPos", "wantFall", "col2", "prevVelY", "force", "doubleJump", "numJumps", "jumpsLeft", "stay", "scenesToStay", "health", "hp", "lifespan", "fade", "initState", "stateList", "transitions", "initStateEvents", "trigger", "didFirstEnter", "oldState", "available", "from", "to", "fadeIn", "done", "scene", "def", "go", "getData", "key", "setData", "plug", "plugin", "funcs", "grid", "level", "addLevel", "maxRowLen", "levelComp", "posComp", "row", "keys", "record", "frameRate", "stream", "audioDest", "recorder", "chunks", "isFocused", "destroy", "readd", "destroyAll", "getAll", "boom", "kaSprite", "ka_default", "boomSprite", "boom_default", "addKaboom", "kaboom", "ka", "DEF_HASH_GRID_SIZE", "Collision", "source", "target", "resolved", "checkFrame", "cellSize", "stack", "checkObj", "aobj", "xmin", "ymin", "xmax", "ymax", "checked", "cell", "col1", "drawFrame", "cam", "drawLoadScreen", "progress", "drawInspectText", "txt", "pad", "ftxt", "bw", "bh", "drawDebug", "inspecting", "flipped", "drawVirtualControls", "drawCircleButton", "drawSquareButton", "onLoadUpdate", "onResize", "onError", "run", "textStyle", "title", "resetInputState", "frame", "realTime", "realDt", "quit", "numTextureUnits", "unit", "duration", "setValue", "curTime", "onFinishEvents", "happy_28x36_default", "grid", "x", "y", "width", "height", "cellSize", "x", "y", "j", "pos", "data", "play", "data", "levels", "customLevels", "c", "width", "height", "data", "s", "x", "y", "c", "locked", "levels", "levels", "width", "j", "sprite", "s", "f"]
}
